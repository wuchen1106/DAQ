<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ROOT Analyzer: libMidasInterface/TMidasEvent.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_8b306e26762ee91ba34195053e27d894.html">libMidasInterface</a>
  </div>
</div>
<div class="contents">
<h1>TMidasEvent.h</h1><a href="a00087.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//</span>
<a name="l00002"></a>00002 <span class="comment">// TMidasEvent.h</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="preprocessor">#ifndef TMIDASEVENT_H</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor">#define TMIDASEVENT_H</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &quot;<a class="code" href="a00093.html">TMidasStructs.h</a>&quot;</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">///</span>
<a name="l00011"></a>00011 <span class="comment">/// C++ class representing one midas event.</span>
<a name="l00012"></a>00012 <span class="comment">///</span>
<a name="l00013"></a>00013 <span class="comment">/// Objects of this class are created by reading</span>
<a name="l00014"></a>00014 <span class="comment">/// midas events from a file, by reading</span>
<a name="l00015"></a>00015 <span class="comment">/// them from a midas shared memory buffer or by</span>
<a name="l00016"></a>00016 <span class="comment">/// receiving them through the mserver</span>
<a name="l00017"></a>00017 <span class="comment">///</span>
<a name="l00018"></a>00018 <span class="comment"></span><span class="comment"></span>
<a name="l00019"></a>00019 <span class="comment">/// MIDAS event</span>
<a name="l00020"></a>00020 <span class="comment"></span>
<a name="l00021"></a>00021 <span class="keyword">class </span><a class="code" href="a00030.html" title="MIDAS event.">TMidasEvent</a>
<a name="l00022"></a>00022 {
<a name="l00023"></a>00023  <span class="keyword">public</span>:
<a name="l00024"></a>00024 
<a name="l00025"></a>00025   <span class="comment">// houskeeping functions</span>
<a name="l00026"></a>00026 
<a name="l00027"></a>00027   <a class="code" href="a00030.html#a9190d98299353eed902cabc15b9e9d3b" title="default constructor">TMidasEvent</a>(); <span class="comment">///&lt; default constructor</span>
<a name="l00028"></a>00028 <span class="comment"></span>  <a class="code" href="a00030.html#a9190d98299353eed902cabc15b9e9d3b" title="default constructor">TMidasEvent</a>(<span class="keyword">const</span> <a class="code" href="a00030.html" title="MIDAS event.">TMidasEvent</a> &amp;); <span class="comment">///&lt; copy constructor</span>
<a name="l00029"></a>00029 <span class="comment"></span>  <a class="code" href="a00030.html#ab217d2cdd66b3eaf26d507252dd7da93" title="destructor">~TMidasEvent</a>(); <span class="comment">///&lt; destructor</span>
<a name="l00030"></a>00030 <span class="comment"></span>  <a class="code" href="a00030.html" title="MIDAS event.">TMidasEvent</a>&amp; <a class="code" href="a00030.html#a96d00e61ec48ac323804d0b7ea1472e3" title="assignement operator">operator=</a>(<span class="keyword">const</span> <a class="code" href="a00030.html" title="MIDAS event.">TMidasEvent</a> &amp;); <span class="comment">///&lt; assignement operator</span>
<a name="l00031"></a>00031 <span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="a00030.html#a2eaf81576e2c7b54ab3af3ec1da749bd" title="clear event for reuse">Clear</a>(); <span class="comment">///&lt; clear event for reuse</span>
<a name="l00032"></a>00032 <span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="a00030.html#af616ad7f2abed1e124b5b6bbb4b0c6cc" title="copy helper">Copy</a>(<span class="keyword">const</span> <a class="code" href="a00030.html" title="MIDAS event.">TMidasEvent</a> &amp;); <span class="comment">///&lt; copy helper</span>
<a name="l00033"></a>00033 <span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="a00030.html#a442773e8be576cc7866e1a23f6c6d615" title="show all event information">Print</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* option = <span class="stringliteral">&quot;&quot;</span>) <span class="keyword">const</span>; <span class="comment">///&lt; show all event information</span>
<a name="l00034"></a>00034 <span class="comment"></span>
<a name="l00035"></a>00035   <span class="comment">// get event information</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037   uint16_t <a class="code" href="a00030.html#a1e49f1dc3eeef7723243f127c8fcbad3" title="return the event id">GetEventId</a>() <span class="keyword">const</span>;      <span class="comment">///&lt; return the event id</span>
<a name="l00038"></a>00038 <span class="comment"></span>  uint16_t <a class="code" href="a00030.html#a61e84b6a009741eb2b9c15863cf6647f" title="return the triger mask">GetTriggerMask</a>() <span class="keyword">const</span>;     <span class="comment">///&lt; return the triger mask</span>
<a name="l00039"></a>00039 <span class="comment"></span>  uint32_t <a class="code" href="a00030.html#acbaff1df97247584f3772ac8b5df720e" title="return the serial number">GetSerialNumber</a>() <span class="keyword">const</span>; <span class="comment">///&lt; return the serial number</span>
<a name="l00040"></a>00040 <span class="comment"></span>  uint32_t <a class="code" href="a00030.html#a82634a948b076861d708e53b5ac17c09" title="return the time stamp (unix time in seconds)">GetTimeStamp</a>() <span class="keyword">const</span>; <span class="comment">///&lt; return the time stamp (unix time in seconds)</span>
<a name="l00041"></a>00041 <span class="comment"></span>  uint32_t <a class="code" href="a00030.html#a339db17cb1f0d30c298d008fa380f164" title="return the event size">GetDataSize</a>() <span class="keyword">const</span>; <span class="comment">///&lt; return the event size</span>
<a name="l00042"></a>00042 <span class="comment"></span>
<a name="l00043"></a>00043   <span class="comment">// get data banks</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="a00030.html#aaff19b02ead60949a97117aaf7a3f9ef" title="return a list of data banks">GetBankList</a>() <span class="keyword">const</span>; <span class="comment">///&lt; return a list of data banks</span>
<a name="l00046"></a>00046 <span class="comment"></span>  <span class="keywordtype">int</span> <a class="code" href="a00030.html#ab43ecd65b499093aa9a388c6bd1ae902">FindBank</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* bankName, <span class="keywordtype">int</span>* bankLength, <span class="keywordtype">int</span>* bankType, <span class="keywordtype">void</span> **bankPtr) <span class="keyword">const</span>;
<a name="l00047"></a>00047   <span class="keywordtype">int</span> <a class="code" href="a00030.html#a9ca976221e70917aebfd50e23b274c8d">LocateBank</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *unused, <span class="keyword">const</span> <span class="keywordtype">char</span>* bankName, <span class="keywordtype">void</span> **bankPtr) <span class="keyword">const</span>;
<a name="l00048"></a>00048 
<a name="l00049"></a>00049   <span class="keywordtype">bool</span> <a class="code" href="a00030.html#a892acc37f677273cb286c1cc18174bf1" title="returns &amp;quot;true&amp;quot; if event uses 32-bit banks">IsBank32</a>() <span class="keyword">const</span>; <span class="comment">///&lt; returns &quot;true&quot; if event uses 32-bit banks</span>
<a name="l00050"></a>00050 <span class="comment"></span>  <span class="keywordtype">int</span> <a class="code" href="a00030.html#af2ad694c11698d4c7145328c742cec4a" title="iterate through 16-bit data banks">IterateBank</a>(<a class="code" href="a00026.html" title="16-bit data bank">TMidas_BANK</a> **, <span class="keywordtype">char</span> **pdata) <span class="keyword">const</span>; <span class="comment">///&lt; iterate through 16-bit data banks</span>
<a name="l00051"></a>00051 <span class="comment"></span>  <span class="keywordtype">int</span> <a class="code" href="a00030.html#a31219788e979aa3485cbf2e98dccd848" title="iterate through 32-bit data banks">IterateBank32</a>(<a class="code" href="a00027.html" title="32-bit data bank">TMidas_BANK32</a> **, <span class="keywordtype">char</span> **pdata) <span class="keyword">const</span>; <span class="comment">///&lt; iterate through 32-bit data banks</span>
<a name="l00052"></a>00052 <span class="comment"></span>
<a name="l00053"></a>00053   <span class="comment">// helpers for event creation</span>
<a name="l00054"></a>00054 
<a name="l00055"></a>00055   <a class="code" href="a00029.html" title="Event header.">TMidas_EVENT_HEADER</a>* <a class="code" href="a00030.html#a185596086a78015119f24c5e5132f2d0" title="return pointer to the event header">GetEventHeader</a>(); <span class="comment">///&lt; return pointer to the event header</span>
<a name="l00056"></a>00056 <span class="comment"></span>  <span class="keywordtype">char</span>* <a class="code" href="a00030.html#af7b600b29911a56e604a2bd0159a8664" title="return pointer to the data buffer">GetData</a>(); <span class="comment">///&lt; return pointer to the data buffer</span>
<a name="l00057"></a>00057 <span class="comment"></span>
<a name="l00058"></a>00058   <span class="keywordtype">void</span> <a class="code" href="a00030.html#a49f5869d31fb4f9ec1f6c9db12050fee" title="allocate data buffer using the existing event header">AllocateData</a>(); <span class="comment">///&lt; allocate data buffer using the existing event header</span>
<a name="l00059"></a>00059 <span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="a00030.html#a9851d9e0a990beb8782ad738177575dc" title="set an externally allocated data buffer">SetData</a>(uint32_t dataSize, <span class="keywordtype">char</span>* dataBuffer); <span class="comment">///&lt; set an externally allocated data buffer</span>
<a name="l00060"></a>00060 <span class="comment"></span>
<a name="l00061"></a>00061   <span class="keywordtype">int</span> <a class="code" href="a00030.html#a3a99e7a49d343d38c7c3395383fcd90e" title="create the list of data banks, return number of banks">SetBankList</a>(); <span class="comment">///&lt; create the list of data banks, return number of banks</span>
<a name="l00062"></a>00062 <span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="a00030.html#a7431aed59b35c7850894ea8fafd01964" title="validate the event length">IsGoodSize</a>() <span class="keyword">const</span>; <span class="comment">///&lt; validate the event length</span>
<a name="l00063"></a>00063 <span class="comment"></span>
<a name="l00064"></a>00064   <span class="keywordtype">void</span> <a class="code" href="a00030.html#aff76bdda6b1c357c47047bbc1a01c11d" title="convert event header between little-endian (Linux-x86) and big endian (MacOS-PPC)...">SwapBytesEventHeader</a>(); <span class="comment">///&lt; convert event header between little-endian (Linux-x86) and big endian (MacOS-PPC) </span>
<a name="l00065"></a>00065 <span class="comment"></span>  <span class="keywordtype">int</span>  <a class="code" href="a00030.html#a0eb2dd100dd1f4e269407b406bb072d7" title="convert event data between little-endian (Linux-x86) and big endian (MacOS-PPC)">SwapBytes</a>(<span class="keywordtype">bool</span>); <span class="comment">///&lt; convert event data between little-endian (Linux-x86) and big endian (MacOS-PPC) </span>
<a name="l00066"></a>00066 <span class="comment"></span>
<a name="l00067"></a>00067 <span class="keyword">protected</span>:
<a name="l00068"></a>00068 
<a name="l00069"></a>00069   <a class="code" href="a00029.html" title="Event header.">TMidas_EVENT_HEADER</a> <a class="code" href="a00030.html#add0a9ff221e56784ac6198925df1ee36" title="event header">fEventHeader</a>; <span class="comment">///&lt; event header</span>
<a name="l00070"></a>00070 <span class="comment"></span>  <span class="keywordtype">char</span>* <a class="code" href="a00030.html#a198e544a6f4d337af9890a08a021038a" title="event data buffer">fData</a>;     <span class="comment">///&lt; event data buffer</span>
<a name="l00071"></a>00071 <span class="comment"></span>  <span class="keywordtype">int</span>  <a class="code" href="a00030.html#a35823ec6a4a0fc82e81a72331cdd4ea5" title="number of banks in this event">fBanksN</a>;    <span class="comment">///&lt; number of banks in this event</span>
<a name="l00072"></a>00072 <span class="comment"></span>  <span class="keywordtype">char</span>* <a class="code" href="a00030.html#a8061c700b458b858d808281693cb53f2" title="list of bank names in this event">fBankList</a>; <span class="comment">///&lt; list of bank names in this event</span>
<a name="l00073"></a>00073 <span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="a00030.html#a9f3048ac4b25d91e4b6c8f4b95cd9df6" title="&amp;quot;true&amp;quot; if we own the data buffer">fAllocatedByUs</a>; <span class="comment">///&lt; &quot;true&quot; if we own the data buffer</span>
<a name="l00074"></a>00074 <span class="comment"></span>};
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="preprocessor">#endif // TMidasEvent.h</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 15 May 2013 for ROOT Analyzer by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
