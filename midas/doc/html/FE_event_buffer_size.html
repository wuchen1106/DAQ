<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Midas: Increase the Event Buffer Size(s)</title>
<link href="midox.css" rel="stylesheet" type="text/css">
<!--
<link href="doxygen.css" rel="stylesheet" type="text/css">
-->
<link href="tabs.css" rel="stylesheet" type="text/css">

<script type="text/javascript"  src="navigation.js">
</script>

</head>

<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Midas Documentation</a>&nbsp;&raquo&nbsp;<a class="el" href="FrontendOperation.html">SECTION 6: Frontend Operation</a>&nbsp;&raquo&nbsp;<a class="el" href="Frontend_code.html">Frontend code</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="FE_event_buffer_size">Increase the Event Buffer Size(s) </a></h1><p><br/>
  
<script type="text/javascript">
pages("FE_Slow_Control_system","FrontendOperation","FE_Appendices","FE_event_buffer_size", "end" ); // back index next {top bottom}
// section parameters: last section; top of this section; next section
sections("RunControl","FrontendOperation","DataAnalysis");
</script>
<p><br/>
 <a class="anchor" id="idx_buffer_size_increase"></a> <a class="anchor" id="customize_buffer_sizes"></a> By default the event buffer (used to contain the data from the event) is named <em>SYSTEM</em>. Its default size is 2MB. The memory usage can be optimized at the frontend level in case large data transfer is needed. This method works for all MIDAS buffers, except for the ODB buffer, where the size has to be specified at creation time (see <a class="el" href="RC_odbedit_examples.html#RC_odbedit_create_ODB">ODB Creation</a>). <br/>
 There is no need to increase the SYSMSG.SHM buffer as it is used only for messages. <br/>
 To increase the size of the event buffer(s):</p>
<ol type="1">
<li>Shutdown all MIDAS programs, and <a class="el" href="RC_odbedit_examples.html#RC_odbedit_save">save the ODB contents</a> if necessary.</li>
<li>Delete the old .SYSTEM.SHM files located in the directory specified by the <a class="el" href="Q_Linux.html#Q_Linux_Exptab">exptab file</a> for your experiment. (use <b>ipcrm</b> (linux) for shared memory segment removal).</li>
<li>Run odbedit (which <a class="el" href="RC_odbedit_examples.html#RC_odbedit_create_ODB">creates the ODB</a>). <div class="fragment"><pre class="fragment">$odbedit
[local:midas:Stopped]/&gt;cd /Experiment
[local:midas:Stopped]/&gt;ls <span class="stringliteral">&quot;Buffer Sizes&quot;</span>
</pre></div></li>
</ol>
<ul>
<li>If the Key "Buffer Sizes" does not exist, create this key, then create a DWORD key of the buffer name to be increased, and set it to the desired value, e.g. <div class="fragment"><pre class="fragment">[local:midas:S]/Experiment&gt;mkdir <span class="stringliteral">&quot;Buffer Sizes&quot;</span>
[local:midas:S]/Experiment&gt;cd <span class="stringliteral">&quot;Buffer Sizes&quot;</span>
[local:midas:S]/Buffer Sizes&gt;create <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a> SYSTEM
[local:midas:S]/Buffer Sizes&gt;<span class="keyword">set</span> SYSTEM 0x1000000
</pre></div></li>
<li>If the SYSTEM key exists already, just set it to the desired size.</li>
</ul>
<ol type="1">
<li><a class="el" href="RC_odbedit_examples.html#RC_odbedit_load">Reload the ODB contents</a> if necessary.</li>
</ol>
<p><br/>
</p>
<p><br/>
  
<script type="text/javascript">
pages("FE_Slow_Control_system","FrontendOperation","FE_Appendices","FE_event_buffer_size", "" ); // back index next {top bottom}
// section parameters: last section; top of this section; next section
sections("RunControl","FrontendOperation","DataAnalysis");
</script>
<p><a class="anchor" id="end"></a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<br>
<hr WIDTH="100%">
Midas DOC Version 2.3.0&nbsp;----&nbsp;PSI Stefan Ritt&nbsp;----
<br>
Contributions: Pierre-Andre Amaudruz - Sergio Ballestrero - Suzannah Daviel -
<a href=http://www.stack.nl/~dimitri/doxygen/features.html>Doxygen</a> - Peter Green -
Qing Gu - Greg Hackman - Gertjan Hofman - Paul Knowles - Exaos Lee - Rudi Meier - Glenn
Moloney - Dave Morris - John M O'Donnell - Konstantin Olchanski - Chris Pearson - Renee Poutissou
- Tamsen Schurman - Andreas Suter - Jan M.Wouters - Piotr Adam Zolnierczuk
<hr WIDTH="100%">

