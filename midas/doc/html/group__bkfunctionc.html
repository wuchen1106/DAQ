<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Midas: Midas Bank Functions (bk_xxx)</title>
<link href="midox.css" rel="stylesheet" type="text/css">
<!--
<link href="doxygen.css" rel="stylesheet" type="text/css">
-->
<link href="tabs.css" rel="stylesheet" type="text/css">

<script type="text/javascript"  src="navigation.js">
</script>

</head>

<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Midas Bank Functions (bk_xxx)<br/>
<small>
[<a class="el" href="group__midasincludecode.html">The midas.h &amp; midas.c</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#gac6fadde40824dbf7bd70abedd29be2bd">bk_init</a> (void *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#gae7cbf587db63fcdf66dd18b29f08b6d2">bk_init32</a> (void *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga8fc93de36e62c4328cb6581be7f42a0f">bk_size</a> (void *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga4bb781187e18834136ed8ac368d53413">bk_create</a> (void *event, const char *name, <a class="el" href="vt2_8h.html#a2b0e863dadf920709ec53d9088ee7c91">WORD</a> type, void *pdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga132dc71c8f74b478cdcc59bc1d9f6a26">bk_close</a> (void *event, void *pdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga4d8a0ef23239ae478544fa96a0e98a33">bk_list</a> (void *event, char *bklist)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#gafe085ddb11bdcff4ca461224254289ef">bk_locate</a> (void *event, const char *name, void *pdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga5ecb1d77784b02c3f79684ab816d0ea7">bk_find</a> (<a class="el" href="structBANK__HEADER.html">BANK_HEADER</a> *pbkh, const char *name, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *bklen, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *bktype, void **pdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#gab6012589013da85b128d8443501a4a44">bk_iterate</a> (void *event, <a class="el" href="structBANK.html">BANK</a> **pbk, void *pdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga44b7381af9b91fbdf2f6d59f55451ea1">bk_swap</a> (void *event, <a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a> force)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>dox dox dox </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga132dc71c8f74b478cdcc59bc1d9f6a26"></a><!-- doxytag: member="midas.c::bk_close" ref="ga132dc71c8f74b478cdcc59bc1d9f6a26" args="(void *event, void *pdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_close </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Close the Midas bank priviously created by <a class="el" href="group__bkfunctionc.html#ga4bb781187e18834136ed8ac368d53413">bk_create()</a>. The data pointer pdata must be obtained by <a class="el" href="group__bkfunctionc.html#ga4bb781187e18834136ed8ac368d53413">bk_create()</a> and used as an address to fill a bank. It is incremented with every value written to the bank and finally points to a location just after the last byte of the bank. It is then passed to <a class="el" href="group__bkfunctionc.html#ga132dc71c8f74b478cdcc59bc1d9f6a26">bk_close()</a> to finish the bank creation </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to current composed event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pdata</em>&nbsp;</td><td>pointer to the data </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of bytes contained in bank </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l13486">13486</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>Referenced by <a class="el" href="adccalib_8c_source.html#l00106">adc_calib()</a>, <a class="el" href="adcsum_8c_source.html#l00087">adc_summing()</a>, <a class="el" href="hv_8c_source.html#l00780">cd_hv_read()</a>, <a class="el" href="ebuser_8c_source.html#l00194">eb_user()</a>, <a class="el" href="fevmemodules_8c_source.html#l00841">read_scaler_event()</a>, <a class="el" href="fevme_8cxx_source.html#l00437">read_tdc()</a>, <a class="el" href="fevmemodules_8c_source.html#l00697">read_trigger_event()</a>, <a class="el" href="fevme_8cxx_source.html#l00399">read_v792()</a>, and <a class="el" href="scaler_8c_source.html#l00066">scaler_accum()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4bb781187e18834136ed8ac368d53413"></a><!-- doxytag: member="midas.c::bk_create" ref="ga4bb781187e18834136ed8ac368d53413" args="(void *event, const char *name, WORD type, void *pdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bk_create </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a2b0e863dadf920709ec53d9088ee7c91">WORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a Midas bank. The data pointer pdata must be used as an address to fill a bank. It is incremented with every value written to the bank and finally points to a location just after the last byte of the bank. It is then passed to the function <a class="el" href="group__bkfunctionc.html#ga132dc71c8f74b478cdcc59bc1d9f6a26">bk_close()</a> to finish the bank creation. </p>
<div class="fragment"><pre class="fragment"><a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a> *pdata;
<a class="code" href="group__bkfunctionc.html#gac6fadde40824dbf7bd70abedd29be2bd">bk_init</a>(pevent);
<a class="code" href="group__bkfunctionc.html#ga4bb781187e18834136ed8ac368d53413">bk_create</a>(pevent, <span class="stringliteral">&quot;ADC0&quot;</span>, <a class="code" href="group__mdefineh.html#gad950d5fde6dd3ea7eba59fb6760a38cb">TID_INT</a>, &amp;pdata);
*pdata++ = 123
*pdata++ = 456
<a class="code" href="group__bkfunctionc.html#ga132dc71c8f74b478cdcc59bc1d9f6a26">bk_close</a>(pevent, pdata);
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to the data area </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>of the bank, must be exactly 4 charaters </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>type of bank, one of the <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a> values defined in <a class="el" href="midas_8h.html">midas.h</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pdata</em>&nbsp;</td><td>pointer to the data area of the newly created bank </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l13310">13310</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>Referenced by <a class="el" href="adccalib_8c_source.html#l00106">adc_calib()</a>, <a class="el" href="adcsum_8c_source.html#l00087">adc_summing()</a>, <a class="el" href="hv_8c_source.html#l00780">cd_hv_read()</a>, <a class="el" href="ebuser_8c_source.html#l00194">eb_user()</a>, <a class="el" href="fevmemodules_8c_source.html#l00841">read_scaler_event()</a>, <a class="el" href="fevme_8cxx_source.html#l00437">read_tdc()</a>, <a class="el" href="fevmemodules_8c_source.html#l00697">read_trigger_event()</a>, <a class="el" href="fevme_8cxx_source.html#l00399">read_v792()</a>, and <a class="el" href="scaler_8c_source.html#l00066">scaler_accum()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5ecb1d77784b02c3f79684ab816d0ea7"></a><!-- doxytag: member="midas.c::bk_find" ref="ga5ecb1d77784b02c3f79684ab816d0ea7" args="(BANK_HEADER *pbkh, const char *name, DWORD *bklen, DWORD *bktype, void **pdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structBANK__HEADER.html">BANK_HEADER</a> *&nbsp;</td>
          <td class="paramname"> <em>pbkh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>bklen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>bktype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>pdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Finds a MIDAS bank of given name inside an event. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pbkh</em>&nbsp;</td><td>pointer to current composed event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>bank name to look for </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bklen</em>&nbsp;</td><td>number of elemtents in bank </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bktype</em>&nbsp;</td><td>bank type, one of TID_xxx </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pdata</em>&nbsp;</td><td>pointer to data area of bank, NULL if bank not found </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 if bank found, 0 otherwise </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l13630">13630</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

</div>
</div>
<a class="anchor" id="gac6fadde40824dbf7bd70abedd29be2bd"></a><!-- doxytag: member="midas.c::bk_init" ref="gac6fadde40824dbf7bd70abedd29be2bd" args="(void *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bk_init </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes an event for Midas banks structure. Before banks can be created in an event, <a class="el" href="group__bkfunctionc.html#gac6fadde40824dbf7bd70abedd29be2bd">bk_init()</a> has to be called first. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to the area of event </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l13228">13228</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>Referenced by <a class="el" href="hv_8c_source.html#l00780">cd_hv_read()</a>, <a class="el" href="ebuser_8c_source.html#l00194">eb_user()</a>, <a class="el" href="fevmemodules_8c_source.html#l00841">read_scaler_event()</a>, and <a class="el" href="frontend_8c_source.html#l00269">read_trigger_event()</a>.</p>

</div>
</div>
<a class="anchor" id="gae7cbf587db63fcdf66dd18b29f08b6d2"></a><!-- doxytag: member="midas.c::bk_init32" ref="gae7cbf587db63fcdf66dd18b29f08b6d2" args="(void *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bk_init32 </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Initializes an event for Midas banks structure for large bank size (&gt; 32KBytes) Before banks can be created in an event, <a class="el" href="group__bkfunctionc.html#gae7cbf587db63fcdf66dd18b29f08b6d2">bk_init32()</a> has to be called first. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to the area of event </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l13269">13269</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>Referenced by <a class="el" href="fevme_8cxx_source.html#l00550">read_event()</a>, and <a class="el" href="fevmemodules_8c_source.html#l00697">read_trigger_event()</a>.</p>

</div>
</div>
<a class="anchor" id="gab6012589013da85b128d8443501a4a44"></a><!-- doxytag: member="midas.c::bk_iterate" ref="gab6012589013da85b128d8443501a4a44" args="(void *event, BANK **pbk, void *pdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_iterate </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structBANK.html">BANK</a> **&nbsp;</td>
          <td class="paramname"> <em>pbk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Iterates through banks inside an event. The function can be used to enumerate all banks of an event. The returned pointer to the bank header has following structure: </p>
<div class="fragment"><pre class="fragment"><span class="keyword">typedef</span> <span class="keyword">struct </span>{
<span class="keywordtype">char</span>   name[4];
<a class="code" href="sis3803_8h.html#a2b0e863dadf920709ec53d9088ee7c91">WORD</a>   type;
<a class="code" href="sis3803_8h.html#a2b0e863dadf920709ec53d9088ee7c91">WORD</a>   data_size;
} <a class="code" href="structBANK.html">BANK</a>;
</pre></div><p> where type is a TID_xxx value and data_size the size of the bank in bytes. </p>
<div class="fragment"><pre class="fragment"><a class="code" href="structBANK.html">BANK</a> *pbk;
<a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>  size;
<span class="keywordtype">void</span> *pdata;
<span class="keywordtype">char</span> name[5];
pbk = NULL;
<span class="keywordflow">do</span>
{
 size = <a class="code" href="group__bkfunctionc.html#gab6012589013da85b128d8443501a4a44">bk_iterate</a>(event, &amp;pbk, &amp;pdata);
 <span class="keywordflow">if</span> (pbk == NULL)
  <span class="keywordflow">break</span>;
 *((<a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a> *)name) = *((<a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a> *)(pbk)-&gt;name);
 name[4] = 0;
 printf(<span class="stringliteral">&quot;bank %s found\n&quot;</span>, name);
} <span class="keywordflow">while</span>(TRUE);
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>Pointer to data area of event. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pbk</em>&nbsp;</td><td>pointer to the bank header, must be NULL for the first call to this function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pdata</em>&nbsp;</td><td>Pointer to the bank header, must be NULL for the first call to this function </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Size of bank in bytes </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l13711">13711</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>Referenced by <a class="el" href="midas_8c_source.html#l13536">bk_list()</a>, <a class="el" href="mdsupport_8c_source.html#l00856">md_bank_event_display()</a>, and <a class="el" href="mfe_8c_source.html#l01001">update_odb()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4d8a0ef23239ae478544fa96a0e98a33"></a><!-- doxytag: member="midas.c::bk_list" ref="ga4d8a0ef23239ae478544fa96a0e98a33" args="(void *event, char *bklist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_list </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>bklist</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Extract the MIDAS bank name listing of an event. The bklist should be dimensioned with STRING_BANKLIST_MAX which corresponds to a max of BANKLIST_MAX banks (<a class="el" href="midas_8h.html">midas.h</a>: 32 banks max). </p>
<div class="fragment"><pre class="fragment"><a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a> <a class="code" href="adccalib_8c.html#a21e1931a7c367947aeec0daa9548b6e7">adc_calib</a>(<a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a> *pheader, <span class="keywordtype">void</span> *pevent)
{
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>    n_adc, nbanks;
  <a class="code" href="sis3803_8h.html#a2b0e863dadf920709ec53d9088ee7c91">WORD</a>   *pdata;
  <span class="keywordtype">char</span>   banklist[<a class="code" href="group__midasincludecode.html#gafec0c8869c3f66ea7d186ec4b7682fc0">STRING_BANKLIST_MAX</a>];

  <span class="comment">// Display # of banks and list of banks in the event</span>
  nbanks = <a class="code" href="group__bkfunctionc.html#ga4d8a0ef23239ae478544fa96a0e98a33">bk_list</a>(pevent, banklist);
  printf(<span class="stringliteral">&quot;#banks:%d List:%s\n&quot;</span>, nbanks, banklist);

  <span class="comment">// look for ADC0 bank, return if not present</span>
  n_adc = <a class="code" href="group__bkfunctionc.html#gafe085ddb11bdcff4ca461224254289ef">bk_locate</a>(pevent, <span class="stringliteral">&quot;ADC0&quot;</span>, &amp;pdata);
  ...
}
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to current composed event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bklist</em>&nbsp;</td><td>returned ASCII string, has to be booked with STRING_BANKLIST_MAX. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of bank found in this event. </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l13536">13536</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>Referenced by <a class="el" href="mdsupport_8c_source.html#l00856">md_bank_event_display()</a>.</p>

</div>
</div>
<a class="anchor" id="gafe085ddb11bdcff4ca461224254289ef"></a><!-- doxytag: member="midas.c::bk_locate" ref="gafe085ddb11bdcff4ca461224254289ef" args="(void *event, const char *name, void *pdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_locate </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Locates a MIDAS bank of given name inside an event. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to current composed event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>bank name to look for </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pdata</em>&nbsp;</td><td>pointer to data area of bank, NULL if bank not found </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of values inside the bank </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l13580">13580</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>Referenced by <a class="el" href="adccalib_8c_source.html#l00106">adc_calib()</a>, <a class="el" href="adcsum_8c_source.html#l00087">adc_summing()</a>, <a class="el" href="mdsupport_8c_source.html#l00856">md_bank_event_display()</a>, and <a class="el" href="scaler_8c_source.html#l00066">scaler_accum()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8fc93de36e62c4328cb6581be7f42a0f"></a><!-- doxytag: member="midas.c::bk_size" ref="ga8fc93de36e62c4328cb6581be7f42a0f" args="(void *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_size </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the size of an event containing banks. The total size of an event is the value returned by <a class="el" href="group__bkfunctionc.html#ga8fc93de36e62c4328cb6581be7f42a0f">bk_size()</a> plus the size of the event header (sizeof(EVENT_HEADER)). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to the area of event </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of bytes contained in data area of event </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l13283">13283</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>Referenced by <a class="el" href="hv_8c_source.html#l00780">cd_hv_read()</a>, <a class="el" href="fevme_8cxx_source.html#l00550">read_event()</a>, <a class="el" href="frontend_8c_source.html#l00339">read_scaler_event()</a>, and <a class="el" href="fevmemodules_8c_source.html#l00697">read_trigger_event()</a>.</p>

</div>
</div>
<a class="anchor" id="ga44b7381af9b91fbdf2f6d59f55451ea1"></a><!-- doxytag: member="midas.c::bk_swap" ref="ga44b7381af9b91fbdf2f6d59f55451ea1" args="(void *event, BOOL force)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_swap </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>&nbsp;</td>
          <td class="paramname"> <em>force</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Swaps bytes from little endian to big endian or vice versa for a whole event.</p>
<p>An event contains a flag which is set by <a class="el" href="group__bkfunctionc.html#gac6fadde40824dbf7bd70abedd29be2bd">bk_init()</a> to identify the endian format of an event. If force is FALSE, this flag is evaluated and the event is only swapped if it is in the "wrong" format for this system. An event can be swapped to the "wrong" format on purpose for example by a front-end which wants to produce events in a "right" format for a back-end analyzer which has different byte ordering. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to data area of event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>force</em>&nbsp;</td><td>If TRUE, the event is always swapped, if FALSE, the event is only swapped if it is in the wrong format. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1==event has been swap, 0==event has not been swapped. </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l13786">13786</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>Referenced by <a class="el" href="mevb_8c_source.html#l00486">eb_mfragment_add()</a>, <a class="el" href="mdsupport_8c_source.html#l00735">md_event_swap()</a>, and <a class="el" href="mevb_8c_source.html#l00997">source_scan()</a>.</p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<br>
<hr WIDTH="100%">
Midas DOC Version 2.3.0&nbsp;----&nbsp;PSI Stefan Ritt&nbsp;----
<br>
Contributions: Pierre-Andre Amaudruz - Sergio Ballestrero - Suzannah Daviel -
<a href=http://www.stack.nl/~dimitri/doxygen/features.html>Doxygen</a> - Peter Green -
Qing Gu - Greg Hackman - Gertjan Hofman - Paul Knowles - Exaos Lee - Rudi Meier - Glenn
Moloney - Dave Morris - John M O'Donnell - Konstantin Olchanski - Chris Pearson - Renee Poutissou
- Tamsen Schurman - Andreas Suter - Jan M.Wouters - Piotr Adam Zolnierczuk
<hr WIDTH="100%">

