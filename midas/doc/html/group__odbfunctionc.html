<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Midas: Midas ODB Functions (db_xxx)</title>
<link href="midox.css" rel="stylesheet" type="text/css">
<!--
<link href="doxygen.css" rel="stylesheet" type="text/css">
-->
<link href="tabs.css" rel="stylesheet" type="text/css">

<script type="text/javascript"  src="navigation.js">
</script>

</head>

<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Midas ODB Functions (db_xxx)<br/>
<small>
[<a class="el" href="group__odbcode.html">The odb.c</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gaece9851974b00231428f82b341e2c523">db_open_database</a> (const char *xdatabase_name, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> database_size, HNDLE *<a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, const char *client_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gadbb92e13899bbffc584b676bb924586e">db_close_database</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga299048aeed427690630027aa5aebc451">db_lock_database</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga52885112dd8f2acc551ac0610d7f552d">db_unlock_database</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga959637b6837f613af5a8a3df52af6f3b">db_protect_database</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga4dcab15e47980882e35bddf3ceb9aee5">db_create_key</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, const char *key_name, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga3da25029b1835ef605483b91684704f6">db_create_link</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, const char *link_name, const char *destination)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga3015b0f8e9636ebfeeea74e1dbdfaf62">db_delete_key1</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> level, <a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a> follow_links)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga50caf089afbb03943e6e215661b5b73e">db_delete_key</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, <a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a> follow_links)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, const char *key_name, HNDLE *subhKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gaf0b052657ba1d4f4a8b6d47dbc70008c">db_set_value</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE hKeyRoot, const char *key_name, const void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> data_size, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> num_values, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga88a578560f272f0cc9a199eacb3e1048">db_set_value_index</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE hKeyRoot, const char *key_name, const void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> data_size, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> idx, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> type, <a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a> trunc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gaf3958854e073e1ddbb43324e07a6287f">db_get_value</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE hKeyRoot, const char *key_name, void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *buf_size, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> type, <a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a> create)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gac7c23e0ebd6b203c81ca491db5b4753e">db_enum_key</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> idx, HNDLE *subkey_handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga424ad3b166e3fba9bae29f7dfc74a369">db_get_key</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, <a class="el" href="structKEY.html">KEY</a> *key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga331624e7c034494217249e36b97c8f69">db_get_link</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, <a class="el" href="structKEY.html">KEY</a> *key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga78b9946f84f5f8059dd71cc6dbccd1a7">db_get_key_time</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *delta)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga34deb0b63c67d73975017e47270a5ca9">db_get_key_info</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, char *name, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> name_size, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *type, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *num_values, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *item_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga8d8bb0ee338e5fbc46fed2c29e697540">db_get_data</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *buf_size, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gaf07dd1abe9b9f63238c9b1d9a3bd5cc0">db_get_link_data</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *buf_size, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gab98f9bb7f141c72261bf56407370fab3">db_get_data_index</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *buf_size, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> idx, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gaa3f93c5321c56ad5a5200d17958e9bb3">db_set_data</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, const void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> buf_size, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> num_values, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gac4242bdfa7376f491b501e009aa1f840">db_set_link_data</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, const void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> buf_size, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> num_values, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga298462cf44f9ed6ea7c64ffdf23617d9">db_set_data_index</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, const void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> data_size, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> idx, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gac66c3264c78ef6cc1e429235efe92ed6">db_set_link_data_index</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, const void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> data_size, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> idx, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga437034642fc8851bfa67937635cb7d12">db_load</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE hKeyRoot, const char *filename, <a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a> bRemote)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga165f2428c082852ff2ac1e8c4c78d607">db_copy</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, char *buffer, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *buffer_size, char *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gac1bf8d648ef2ddb1ac6243e5e11dedf2">db_paste</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE hKeyRoot, const char *buffer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga7b0051acf49620e36823f55b907dda7a">db_paste_xml</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE hKeyRoot, const char *buffer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga9fcec4712c44e1ef199297aad9ea99c5">db_copy_xml</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, char *buffer, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *buffer_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga6f9a61b316a1c2a5c9c143fc84edf63b">db_save</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, const char *filename, <a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a> bRemote)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gac967051f0433c70482abca0450c038e6">db_save_xml</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, const char *filename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga07197b44867ca47300b1f69f2c2c3e86">db_save_struct</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, const char *file_name, const char *struct_name, <a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a> append)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga594e4b0d774999bdcc1161e8b6b84052">db_sprintf</a> (char *string, const void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> data_size, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> idx, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga2d16cbf1e235c26b1b1fa8e75a811d50">db_sprintff</a> (char *string, const char *format, const void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> data_size, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> idx, <a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga70b171dc66b0673fc9ed773fca31b7dc">db_get_record_size</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> align, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *buf_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga7a9c0dd3e4bec48a07be99d2fc0e08cf">db_get_record</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *buf_size, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> align)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga1e4bca66d45d069477c614bc2481d89f">db_set_record</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, void *data, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> buf_size, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> align)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga59b971e77416b2b463e2e63f1b05342b">db_create_record</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, const char *orig_key_name, const char *init_str)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gad504df013bd9f61366ed48d6666985a1">db_check_record</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, const char *keyname, const char *rec_str, <a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a> correct)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga852bc9fa8ee4d0884b328aeb0b0cfd63">db_open_record</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, void *ptr, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> rec_size, <a class="el" href="vt2_8h.html#a2b0e863dadf920709ec53d9088ee7c91">WORD</a> access_mode, void(*dispatcher)(<a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>, void *), void *info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gaa621351e007f68f6298b8edf5bd652c4">db_close_record</a> (HNDLE <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, HNDLE <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#ga8611a895b6ddf4cc6b25fed3c7473e3a">db_close_all_records</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gae5f470f0c97794d8da1017f609276bc4">db_update_record</a> (<a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mevb_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>, int s)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odbfunctionc.html#gae5ccb46009b64dbeff8dbc05be27664b">db_send_changed_records</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>dox </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gad504df013bd9f61366ed48d6666985a1"></a><!-- doxytag: member="odb.c::db_check_record" ref="gad504df013bd9f61366ed48d6666985a1" args="(HNDLE hDB, HNDLE hKey, const char *keyname, const char *rec_str, BOOL correct)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_check_record </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>keyname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>rec_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>&nbsp;</td>
          <td class="paramname"> <em>correct</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function ensures that a certain ODB subtree matches a given C structure, by comparing the init_str with the current ODB structure. If the record does not exist at all, it is created with the default values in init_str. If it does exist but does not match the variables in init_str, the function returns an error if correct=FALSE or calls <a class="el" href="group__odbfunctionc.html#ga59b971e77416b2b463e2e63f1b05342b">db_create_record()</a> if correct=TRUE. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>keyname</em>&nbsp;</td><td>Name of key to search, can contain directories. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rec_str</em>&nbsp;</td><td>ASCII representation of ODB record in the format </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>correct</em>&nbsp;</td><td>If TRUE, correct ODB record if necessary </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_NO_KEY, DB_STRUCT_MISMATCH </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l08190">8190</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="alarm_8c_source.html#l00527">al_check()</a>, <a class="el" href="alarm_8c_source.html#l00212">al_trigger_alarm()</a>, <a class="el" href="midas_8c_source.html#l02074">cm_connect_experiment1()</a>, and <a class="el" href="mevb_8c_source.html#l00114">register_equipment()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8611a895b6ddf4cc6b25fed3c7473e3a"></a><!-- doxytag: member="odb.c::db_close_all_records" ref="ga8611a895b6ddf4cc6b25fed3c7473e3a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_close_all_records </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Release local memory for open records. This routines is called by db_close_all_databases() and <a class="el" href="group__cmfunctionc.html#ga7d5a287821786e8dde3d2340826215b2">cm_disconnect_experiment()</a> </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l08661">8661</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="midas_8c_source.html#l02511">cm_disconnect_experiment()</a>.</p>

</div>
</div>
<a class="anchor" id="gadbb92e13899bbffc584b676bb924586e"></a><!-- doxytag: member="odb.c::db_close_database" ref="gadbb92e13899bbffc584b676bb924586e" args="(HNDLE hDB)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_close_database </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Close a database </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, RPC_NET_ERROR </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l01105">1105</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaa621351e007f68f6298b8edf5bd652c4"></a><!-- doxytag: member="odb.c::db_close_record" ref="gaa621351e007f68f6298b8edf5bd652c4" args="(HNDLE hDB, HNDLE hKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_close_record </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Close a record previously opend with db_open_record. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l08624">8624</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga165f2428c082852ff2ac1e8c4c78d607"></a><!-- doxytag: member="odb.c::db_copy" ref="ga165f2428c082852ff2ac1e8c4c78d607" args="(HNDLE hDB, HNDLE hKey, char *buffer, INT *buffer_size, char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_copy </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Copy an ODB subtree in ASCII format to a buffer</p>
<p>This function converts the binary ODB contents to an ASCII. The function <a class="el" href="group__odbfunctionc.html#gac1bf8d648ef2ddb1ac6243e5e11dedf2">db_paste()</a> can be used to convert the ASCII representation back to binary ODB contents. The functions <a class="el" href="group__odbfunctionc.html#ga437034642fc8851bfa67937635cb7d12">db_load()</a> and <a class="el" href="group__odbfunctionc.html#ga6f9a61b316a1c2a5c9c143fc84edf63b">db_save()</a> internally use <a class="el" href="group__odbfunctionc.html#ga165f2428c082852ff2ac1e8c4c78d607">db_copy()</a> and <a class="el" href="group__odbfunctionc.html#gac1bf8d648ef2ddb1ac6243e5e11dedf2">db_paste()</a>. This function converts the binary ODB contents to an ASCII representation of the form:</p>
<ul>
<li>For single value: <div class="fragment"><pre class="fragment">[ODB path]
 key name = type : value
</pre></div></li>
<li>For strings: <div class="fragment"><pre class="fragment">key name = STRING : [size] <span class="keywordtype">string</span> contents
</pre></div></li>
<li>For arrayes (type can be BYTE, SBYTE, CHAR, WORD, SHORT, DWORD, INT, BOOL, FLOAT, DOUBLE, STRING or LINK): <div class="fragment"><pre class="fragment">key name = type[size] :
 [0] value0
 [1] value1
 [2] value2
 ...
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>ASCII buffer which receives ODB contents. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer_size</em>&nbsp;</td><td>Size of buffer, returns remaining space in buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>Internal use only, must be empty (""). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_TRUNCATED, DB_NO_MEMORY </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="odb_8c_source.html#l05662">5662</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="odb_8c_source.html#l08021">db_create_record()</a>, and <a class="el" href="odb_8c_source.html#l06547">db_save()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9fcec4712c44e1ef199297aad9ea99c5"></a><!-- doxytag: member="odb.c::db_copy_xml" ref="ga9fcec4712c44e1ef199297aad9ea99c5" args="(HNDLE hDB, HNDLE hKey, char *buffer, INT *buffer_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_copy_xml </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Copy an ODB subtree in XML format to a buffer</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>ASCII buffer which receives ODB contents. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer_size</em>&nbsp;</td><td>Size of buffer, returns remaining space in buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_TRUNCATED, DB_NO_MEMORY </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l06373">6373</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga4dcab15e47980882e35bddf3ceb9aee5"></a><!-- doxytag: member="odb.c::db_create_key" ref="ga4dcab15e47980882e35bddf3ceb9aee5" args="(HNDLE hDB, HNDLE hKey, const char *key_name, DWORD type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_create_key </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>key_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a new key in a database </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Key handle to start with, 0 for root </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key_name</em>&nbsp;</td><td>Name of key in the form "/key/key/key" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of key, one of TID_xxx (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_INVALID_PARAM, DB_FULL, DB_KEY_EXIST, DB_NO_ACCESS </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l01590">1590</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="odb_8c_source.html#l08021">db_create_record()</a>, <a class="el" href="odb_8c_source.html#l03190">db_get_value()</a>, <a class="el" href="odb_8c_source.html#l05927">db_paste()</a>, <a class="el" href="odb_8c_source.html#l06204">db_paste_node()</a>, <a class="el" href="odb_8c_source.html#l03021">db_set_value()</a>, <a class="el" href="odb_8c_source.html#l03145">db_set_value_index()</a>, <a class="el" href="hv_8c_source.html#l00463">hv_init()</a>, and <a class="el" href="mevb_8c_source.html#l00114">register_equipment()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3da25029b1835ef605483b91684704f6"></a><!-- doxytag: member="odb.c::db_create_link" ref="ga3da25029b1835ef605483b91684704f6" args="(HNDLE hDB, HNDLE hKey, const char *link_name, const char *destination)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_create_link </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>link_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>destination</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a link to a key or set the destination of and existing link. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Key handle to start with, 0 for root </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>link_name</em>&nbsp;</td><td>Name of key in the form "/key/key/key" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>destination</em>&nbsp;</td><td>Destination of link in the form "/key/key/key" </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_FULL, DB_KEY_EXIST, DB_NO_ACCESS </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l01830">1830</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga59b971e77416b2b463e2e63f1b05342b"></a><!-- doxytag: member="odb.c::db_create_record" ref="ga59b971e77416b2b463e2e63f1b05342b" args="(HNDLE hDB, HNDLE hKey, const char *orig_key_name, const char *init_str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_create_record </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>orig_key_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>init_str</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Create a record. If a part of the record exists alreay, merge it with the init_str (use values from the init_str only when they are not in the existing record).</p>
<p>This functions creates a ODB sub-tree according to an ASCII representation of that tree. See <a class="el" href="group__odbfunctionc.html#ga165f2428c082852ff2ac1e8c4c78d607">db_copy()</a> for a description. It can be used to create a sub-tree which exactly matches a C structure. The sub-tree can then later mapped to the C structure ("hot-link") via the function <a class="el" href="group__odbfunctionc.html#ga852bc9fa8ee4d0884b328aeb0b0cfd63">db_open_record()</a>.</p>
<p>If a sub-tree exists already which exactly matches the ASCII representation, it is not modified. If part of the tree exists, it is merged with the ASCII representation where the ODB values have priority, only values not present in the ODB are created with the default values of the ASCII representation. It is therefore recommended that before creating an ODB hot-link the function <a class="el" href="group__odbfunctionc.html#ga59b971e77416b2b463e2e63f1b05342b">db_create_record()</a> is called to insure that the ODB tree and the C structure contain exactly the same values in the same order.</p>
<p>Following example creates a record under /Equipment/Trigger/Settings, opens a hot-link between that record and a local C structure trigger_settings and registers a callback function trigger_update() which gets called each time the record is changed. </p>
<div class="fragment"><pre class="fragment"><span class="keyword">struct </span>{
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a> level1;
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a> level2;
} <a class="code" href="analyzer_8c.html#a0bedba90e4b62eddbca641fac7402d4d">trigger_settings</a>;
<span class="keywordtype">char</span> *trigger_settings_str =
<span class="stringliteral">&quot;[Settings]\n\</span>
<span class="stringliteral">level1 = INT : 0\n\</span>
<span class="stringliteral">level2 = INT : 0&quot;</span>;
<span class="keywordtype">void</span> trigger_update(<a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a> <a class="code" href="mfe_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a> hkey, <span class="keywordtype">void</span> *info)
{
  printf(<span class="stringliteral">&quot;New levels: %d %d\n&quot;</span>,
    <a class="code" href="analyzer_8c.html#a0bedba90e4b62eddbca641fac7402d4d">trigger_settings</a>.level1,
    <a class="code" href="analyzer_8c.html#a0bedba90e4b62eddbca641fac7402d4d">trigger_settings</a>.level2);
}
<a class="code" href="mfe_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>()
{
  HNDLE <a class="code" href="mfe_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, hkey;
  <span class="keywordtype">char</span>[128] info;
  ...
  <a class="code" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database</a>(&amp;hDB, NULL);
  <a class="code" href="group__odbfunctionc.html#ga59b971e77416b2b463e2e63f1b05342b">db_create_record</a>(hDB, 0, <span class="stringliteral">&quot;/Equipment/Trigger&quot;</span>, trigger_settings_str);
  <a class="code" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key</a>(hDB, 0,<span class="stringliteral">&quot;/Equipment/Trigger/Settings&quot;</span>, &amp;hkey);
  <a class="code" href="group__odbfunctionc.html#ga852bc9fa8ee4d0884b328aeb0b0cfd63">db_open_record</a>(hDB, hkey, &amp;<a class="code" href="analyzer_8c.html#a0bedba90e4b62eddbca641fac7402d4d">trigger_settings</a>,
    <span class="keyword">sizeof</span>(<a class="code" href="analyzer_8c.html#a0bedba90e4b62eddbca641fac7402d4d">trigger_settings</a>), <a class="code" href="group__mdefineh.html#gac4d1baf108e9ce6414088db508d7c182">MODE_READ</a>, trigger_update, info);
  ...
}
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>orig_key_name</em>&nbsp;</td><td>Name of key to search, can contain directories. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>init_str</em>&nbsp;</td><td>Initialization string in the format of the db_copy/db_save functions. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_FULL, DB_NO_ACCESS, DB_OPEN_RECORD </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l08021">8021</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="alarm_8c_source.html#l00527">al_check()</a>, <a class="el" href="alarm_8c_source.html#l00212">al_trigger_alarm()</a>, <a class="el" href="analyzer_8c_source.html#l00137">analyzer_init()</a>, <a class="el" href="midas_8c_source.html#l01702">cm_set_client_info()</a>, <a class="el" href="odb_8c_source.html#l08190">db_check_record()</a>, <a class="el" href="fevmemodules_8c_source.html#l00233">frontend_init()</a>, <a class="el" href="mevb_8c_source.html#l01157">main()</a>, <a class="el" href="mfe_8c_source.html#l00544">register_equipment()</a>, and <a class="el" href="mevb_8c_source.html#l00614">tr_start()</a>.</p>

</div>
</div>
<a class="anchor" id="ga50caf089afbb03943e6e215661b5b73e"></a><!-- doxytag: member="odb.c::db_delete_key" ref="ga50caf089afbb03943e6e215661b5b73e" args="(HNDLE hDB, HNDLE hKey, BOOL follow_links)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_delete_key </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>&nbsp;</td>
          <td class="paramname"> <em>follow_links</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Delete a subtree in a database starting from a key (including this key). </p>
<div class="fragment"><pre class="fragment">...
    status = db_find_link(hDB, 0, str, &amp;hkey);
    <span class="keywordflow">if</span> (status != <a class="code" href="group__err23.html#ga4d6ab4d32144d851ddeb7931b81a63e3">DB_SUCCESS</a>)
    {
      <a class="code" href="group__msgfunctionc.html#gaac032ca2438c47466bfc9722de6746ea">cm_msg</a>(<a class="code" href="group__mdefineh.html#ga6e27d8876a43afce3ee4dd16527cbb9e">MINFO</a>,<span class="stringliteral">&quot;my_delete&quot;</span>,<span class="stringliteral">&quot; &quot;</span>Cannot find key %s<span class="stringliteral">&quot;, str);</span>
<span class="stringliteral">      return;</span>
<span class="stringliteral">    }</span>
<span class="stringliteral"></span>
<span class="stringliteral">    status = db_delete_key(hDB, hkey, FALSE);</span>
<span class="stringliteral">    if (status != DB_SUCCESS)</span>
<span class="stringliteral">    {</span>
<span class="stringliteral">      cm_msg(MERROR,&quot;</span>my_delete<span class="stringliteral">&quot;,&quot;</span> <span class="stringliteral">&quot;Cannot delete key %s&quot;</span>, str);
      <span class="keywordflow">return</span>;
    }
  ...
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>follow_links</em>&nbsp;</td><td>Follow links when TRUE. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_NO_ACCESS, DB_OPEN_RECORD </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l02032">2032</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="midas_8c_source.html#l03166">cm_deregister_transition()</a>, <a class="el" href="midas_8c_source.html#l01702">cm_set_client_info()</a>, and <a class="el" href="odb_8c_source.html#l08021">db_create_record()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3015b0f8e9636ebfeeea74e1dbdfaf62"></a><!-- doxytag: member="odb.c::db_delete_key1" ref="ga3015b0f8e9636ebfeeea74e1dbdfaf62" args="(HNDLE hDB, HNDLE hKey, INT level, BOOL follow_links)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_delete_key1 </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>&nbsp;</td>
          <td class="paramname"> <em>follow_links</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Delete a subtree, using level information (only called internally by <a class="el" href="group__odbfunctionc.html#ga50caf089afbb03943e6e215661b5b73e">db_delete_key()</a>) </p>
<p><b>For internal use only.</b></p>
<p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Key handle to start with, 0 for root </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>Recursion level, must be zero when </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>follow_links</em>&nbsp;</td><td>Follow links when TRUE called from a user routine </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_OPEN_RECORD </dd></dl>
</p>

<p>Definition at line <a class="el" href="odb_8c_source.html#l01858">1858</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="midas_8c_source.html#l01547">cm_delete_client_info()</a>, and <a class="el" href="odb_8c_source.html#l02032">db_delete_key()</a>.</p>

</div>
</div>
<a class="anchor" id="gac7c23e0ebd6b203c81ca491db5b4753e"></a><!-- doxytag: member="odb.c::db_enum_key" ref="gac7c23e0ebd6b203c81ca491db5b4753e" args="(HNDLE hDB, HNDLE hKey, INT idx, HNDLE *subkey_handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_enum_key </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE *&nbsp;</td>
          <td class="paramname"> <em>subkey_handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enumerate subkeys from a key, follow links.</p>
<p>hkey must correspond to a valid ODB directory. The index is usually incremented in a loop until the last key is reached. Information about the sub-keys can be obtained with <a class="el" href="group__odbfunctionc.html#ga424ad3b166e3fba9bae29f7dfc74a369">db_get_key()</a>. If a returned key is of type TID_KEY, it contains itself sub-keys. To scan a whole ODB sub-tree, the function db_scan_tree() can be used. </p>
<div class="fragment"><pre class="fragment"><a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>   i;
HNDLE hkey, hsubkey;
<a class="code" href="structKEY.html">KEY</a>   key;
  <a class="code" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key</a>(hdb, 0, <span class="stringliteral">&quot;/Runinfo&quot;</span>, &amp;hkey);
  <span class="keywordflow">for</span> (i=0 ; ; i++)
  {
   <a class="code" href="group__odbfunctionc.html#gac7c23e0ebd6b203c81ca491db5b4753e">db_enum_key</a>(hdb, hkey, i, &amp;hsubkey);
   <span class="keywordflow">if</span> (!<a class="code" href="mevb_8c.html#aac58a320ae0ebf75ec6d8a273184b463">hSubkey</a>)
    <span class="keywordflow">break</span>; <span class="comment">// end of list reached</span>
   <span class="comment">// print key name</span>
   <a class="code" href="group__odbfunctionc.html#ga424ad3b166e3fba9bae29f7dfc74a369">db_get_key</a>(hdb, hkey, &amp;key);
   printf(<span class="stringliteral">&quot;%s\n&quot;</span>, key.<a class="code" href="structKEY.html#aab4927ab8eb9921525d82761adb11f5c">name</a>);
  }
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>idx</em>&nbsp;</td><td>Subkey index, sould be initially 0, then incremented in each call until subhKey becomes zero and the function returns DB_NO_MORE_SUBKEYS </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>subkey_handle</em>&nbsp;</td><td>Handle of subkey which can be used in <a class="el" href="group__odbfunctionc.html#ga424ad3b166e3fba9bae29f7dfc74a369">db_get_key()</a> and <a class="el" href="group__odbfunctionc.html#ga8d8bb0ee338e5fbc46fed2c29e697540">db_get_data()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_NO_MORE_SUBKEYS </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l03342">3342</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="alarm_8c_source.html#l00527">al_check()</a>, <a class="el" href="midas_8c_source.html#l02431">cm_connect_client()</a>, <a class="el" href="midas_8c_source.html#l05290">cm_exist()</a>, <a class="el" href="midas_8c_source.html#l01702">cm_set_client_info()</a>, <a class="el" href="midas_8c_source.html#l05176">cm_shutdown()</a>, <a class="el" href="midas_8c_source.html#l03439">cm_transition1()</a>, <a class="el" href="mevb_8c_source.html#l00243">load_fragment()</a>, <a class="el" href="mfe_8c_source.html#l01599">logger_root()</a>, and <a class="el" href="mfe_8c_source.html#l01001">update_odb()</a>.</p>

</div>
</div>
<a class="anchor" id="ga321df44195a9cbc83dbf10e32e32fd5b"></a><!-- doxytag: member="odb.c::db_find_key" ref="ga321df44195a9cbc83dbf10e32e32fd5b" args="(HNDLE hDB, HNDLE hKey, const char *key_name, HNDLE *subhKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_find_key </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>key_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE *&nbsp;</td>
          <td class="paramname"> <em>subhKey</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns key handle for a key with a specific name.</p>
<p>Keys can be accessed by their name including the directory or by a handle. A key handle is an internal offset to the shared memory where the ODB lives and allows a much faster access to a key than via its name.</p>
<p>The function <a class="el" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key()</a> must be used to convert a key name to a handle. Most other database functions use this key handle in various operations. </p>
<div class="fragment"><pre class="fragment">HNDLE hkey, hsubkey;
<span class="comment">// use full name, start from root</span>
<a class="code" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key</a>(hDB, 0, <span class="stringliteral">&quot;/Runinfo/Run number&quot;</span>, &amp;hkey);
<span class="comment">// start from subdirectory</span>
<a class="code" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key</a>(hDB, 0, <span class="stringliteral">&quot;/Runinfo&quot;</span>, &amp;hkey);
<a class="code" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key</a>(hdb, hkey, <span class="stringliteral">&quot;Run number&quot;</span>, &amp;hsubkey);
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key_name</em>&nbsp;</td><td>Name of key to search, can contain directories. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>subhKey</em>&nbsp;</td><td>Returned handle of key, zero if key cannot be found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_NO_ACCESS, DB_NO_KEY </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l02065">2065</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="alarm_8c_source.html#l00527">al_check()</a>, <a class="el" href="alarm_8c_source.html#l00714">al_get_alarms()</a>, <a class="el" href="alarm_8c_source.html#l00439">al_reset_alarm()</a>, <a class="el" href="alarm_8c_source.html#l00212">al_trigger_alarm()</a>, <a class="el" href="analyzer_8c_source.html#l00137">analyzer_init()</a>, <a class="el" href="midas_8c_source.html#l02431">cm_connect_client()</a>, <a class="el" href="midas_8c_source.html#l03166">cm_deregister_transition()</a>, <a class="el" href="midas_8c_source.html#l05290">cm_exist()</a>, <a class="el" href="midas_8c_source.html#l01876">cm_get_client_info()</a>, <a class="el" href="midas_8c_source.html#l00377">cm_msg_log()</a>, <a class="el" href="midas_8c_source.html#l00469">cm_msg_log1()</a>, <a class="el" href="midas_8c_source.html#l01136">cm_msg_retrieve()</a>, <a class="el" href="midas_8c_source.html#l03289">cm_register_deferred_transition()</a>, <a class="el" href="midas_8c_source.html#l03101">cm_register_transition()</a>, <a class="el" href="midas_8c_source.html#l01702">cm_set_client_info()</a>, <a class="el" href="midas_8c_source.html#l05176">cm_shutdown()</a>, <a class="el" href="midas_8c_source.html#l03439">cm_transition1()</a>, <a class="el" href="odb_8c_source.html#l08190">db_check_record()</a>, <a class="el" href="odb_8c_source.html#l01830">db_create_link()</a>, <a class="el" href="odb_8c_source.html#l08021">db_create_record()</a>, <a class="el" href="odb_8c_source.html#l03342">db_enum_key()</a>, <a class="el" href="odb_8c_source.html#l04196">db_get_data()</a>, <a class="el" href="odb_8c_source.html#l03681">db_get_key()</a>, <a class="el" href="odb_8c_source.html#l03190">db_get_value()</a>, <a class="el" href="odb_8c_source.html#l05927">db_paste()</a>, <a class="el" href="odb_8c_source.html#l06334">db_paste_xml()</a>, <a class="el" href="odb_8c_source.html#l04670">db_set_data()</a>, <a class="el" href="odb_8c_source.html#l05033">db_set_data_index()</a>, <a class="el" href="odb_8c_source.html#l03021">db_set_value()</a>, <a class="el" href="odb_8c_source.html#l03145">db_set_value_index()</a>, <a class="el" href="fevmemodules_8c_source.html#l00233">frontend_init()</a>, <a class="el" href="hv_8c_source.html#l00463">hv_init()</a>, <a class="el" href="mevb_8c_source.html#l00243">load_fragment()</a>, <a class="el" href="mfe_8c_source.html#l01599">logger_root()</a>, <a class="el" href="mevb_8c_source.html#l01157">main()</a>, <a class="el" href="mevb_8c_source.html#l00114">register_equipment()</a>, <a class="el" href="mfe_8c_source.html#l00975">set_equipment_status()</a>, <a class="el" href="mevb_8c_source.html#l00614">tr_start()</a>, <a class="el" href="mfe_8c_source.html#l01001">update_odb()</a>, and <a class="el" href="hv_8c_source.html#l00441">validate_odb_array()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8d8bb0ee338e5fbc46fed2c29e697540"></a><!-- doxytag: member="odb.c::db_get_data" ref="ga8d8bb0ee338e5fbc46fed2c29e697540" args="(HNDLE hDB, HNDLE hKey, void *data, INT *buf_size, DWORD type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_get_data </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *&nbsp;</td>
          <td class="paramname"> <em>buf_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Get key data from a handle</p>
<p>The function returns single values or whole arrays which are contained in an ODB key. Since the data buffer is of type void, no type checking can be performed by the compiler. Therefore the type has to be explicitly supplied, which is checked against the type stored in the ODB. </p>
<div class="fragment"><pre class="fragment">  HNLDE hkey;
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>   <a class="code" href="mfe_8c.html#a16695ea2bfd19f294afe066d6007ab36">run_number</a>, size;
  <span class="comment">// get key handle for run number</span>
  <a class="code" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key</a>(hDB, 0, <span class="stringliteral">&quot;/Runinfo/Run number&quot;</span>, &amp;hkey);
  <span class="comment">// return run number</span>
  size = <span class="keyword">sizeof</span>(run_number);
  <a class="code" href="group__odbfunctionc.html#ga8d8bb0ee338e5fbc46fed2c29e697540">db_get_data</a>(hDB, hkey, &amp;run_number, &amp;size,<a class="code" href="group__mdefineh.html#gad950d5fde6dd3ea7eba59fb6760a38cb">TID_INT</a>);
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Pointer to the return data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf_size</em>&nbsp;</td><td>Size of data buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of key, one of TID_xxx (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_TRUNCATED, DB_TYPE_MISMATCH </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l04196">4196</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="midas_8c_source.html#l02431">cm_connect_client()</a>, <a class="el" href="midas_8c_source.html#l01876">cm_get_client_info()</a>, <a class="el" href="midas_8c_source.html#l01702">cm_set_client_info()</a>, <a class="el" href="odb_8c_source.html#l07516">db_get_record()</a>, and <a class="el" href="mevb_8c_source.html#l00614">tr_start()</a>.</p>

</div>
</div>
<a class="anchor" id="gab98f9bb7f141c72261bf56407370fab3"></a><!-- doxytag: member="odb.c::db_get_data_index" ref="gab98f9bb7f141c72261bf56407370fab3" args="(HNDLE hDB, HNDLE hKey, void *data, INT *buf_size, INT idx, DWORD type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_get_data_index </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *&nbsp;</td>
          <td class="paramname"> <em>buf_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox returns a single value of keys containing arrays of values.</p>
<p>The function returns a single value of keys containing arrays of values. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Size of data buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf_size</em>&nbsp;</td><td>Return size of the record. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>idx</em>&nbsp;</td><td>Index of array [0..n-1]. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of key, one of TID_xxx (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_TRUNCATED, DB_OUT_OF_RANGE </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l04547">4547</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="midas_8c_source.html#l03439">cm_transition1()</a>, <a class="el" href="odb_8c_source.html#l04196">db_get_data()</a>, and <a class="el" href="fevme_8cxx_source.html#l00170">odbReadUint32()</a>.</p>

</div>
</div>
<a class="anchor" id="ga424ad3b166e3fba9bae29f7dfc74a369"></a><!-- doxytag: member="odb.c::db_get_key" ref="ga424ad3b166e3fba9bae29f7dfc74a369" args="(HNDLE hDB, HNDLE hKey, KEY *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_get_key </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structKEY.html">KEY</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Get key structure from a handle.</p>
<p><a class="el" href="structKEY.html">KEY</a> structure has following format: </p>
<div class="fragment"><pre class="fragment"><span class="keyword">typedef</span> <span class="keyword">struct </span>{
  <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>         type;                 <span class="comment">// TID_xxx type</span>
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>           num_values;           <span class="comment">// number of values</span>
  <span class="keywordtype">char</span>          name[<a class="code" href="group__midasincludecode.html#gaf71324c57f05ff9e24bd384925dd6b17">NAME_LENGTH</a>];    <span class="comment">// name of variable</span>
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>           data;                 <span class="comment">// Address of variable (offset)</span>
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>           total_size;           <span class="comment">// Total size of data block</span>
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>           item_size;            <span class="comment">// Size of single data item</span>
  <a class="code" href="sis3803_8h.html#a2b0e863dadf920709ec53d9088ee7c91">WORD</a>          access_mode;          <span class="comment">// Access mode</span>
  <a class="code" href="sis3803_8h.html#a2b0e863dadf920709ec53d9088ee7c91">WORD</a>          notify_count;         <span class="comment">// Notify counter</span>
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>           next_key;             <span class="comment">// Address of next key</span>
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>           parent_keylist;       <span class="comment">// keylist to which this key belongs</span>
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>           last_written;         <span class="comment">// Time of last write action</span>
} <a class="code" href="structKEY.html">KEY</a>;
</pre></div><p> Most of these values are used for internal purposes, the values which are of public interest are type, num_values, and name. For keys which contain a single value, num_values equals to one and total_size equals to item_size. For keys which contain an array of strings (TID_STRING), item_size equals to the length of one string. </p>
<div class="fragment"><pre class="fragment"><a class="code" href="structKEY.html">KEY</a>   key;
HNDLE hkey;
<a class="code" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key</a>(hDB, 0, <span class="stringliteral">&quot;/Runinfo/Run number&quot;</span>, &amp;hkey);
<a class="code" href="group__odbfunctionc.html#ga424ad3b166e3fba9bae29f7dfc74a369">db_get_key</a>(hDB, hkey, &amp;key);
printf(<span class="stringliteral">&quot;The run number is of type %s\n&quot;</span>, rpc_tid_name(key.<a class="code" href="structKEY.html#a3360f9082d5083ea144f093d0cd774e3">type</a>));
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>Pointer to <a class="el" href="structKEY.html">KEY</a> stucture. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l03681">3681</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="alarm_8c_source.html#l00527">al_check()</a>, <a class="el" href="alarm_8c_source.html#l00439">al_reset_alarm()</a>, <a class="el" href="midas_8c_source.html#l01604">cm_check_client()</a>, <a class="el" href="midas_8c_source.html#l03101">cm_register_transition()</a>, <a class="el" href="midas_8c_source.html#l05176">cm_shutdown()</a>, <a class="el" href="midas_8c_source.html#l03439">cm_transition1()</a>, <a class="el" href="odb_8c_source.html#l08190">db_check_record()</a>, <a class="el" href="odb_8c_source.html#l04196">db_get_data()</a>, <a class="el" href="odb_8c_source.html#l07516">db_get_record()</a>, <a class="el" href="odb_8c_source.html#l07430">db_get_record_size()</a>, <a class="el" href="odb_8c_source.html#l08495">db_open_record()</a>, <a class="el" href="odb_8c_source.html#l05927">db_paste()</a>, <a class="el" href="odb_8c_source.html#l06801">db_save_struct()</a>, <a class="el" href="odb_8c_source.html#l07619">db_set_record()</a>, <a class="el" href="mevb_8c_source.html#l00243">load_fragment()</a>, <a class="el" href="mevb_8c_source.html#l00614">tr_start()</a>, and <a class="el" href="mfe_8c_source.html#l01001">update_odb()</a>.</p>

</div>
</div>
<a class="anchor" id="ga34deb0b63c67d73975017e47270a5ca9"></a><!-- doxytag: member="odb.c::db_get_key_info" ref="ga34deb0b63c67d73975017e47270a5ca9" args="(HNDLE hDB, HNDLE hKey, char *name, INT name_size, INT *type, INT *num_values, INT *item_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_get_key_info </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>name_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *&nbsp;</td>
          <td class="paramname"> <em>num_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *&nbsp;</td>
          <td class="paramname"> <em>item_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get key info (separate values instead of structure) </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle of key to operate on </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Key name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name_size</em>&nbsp;</td><td>Size of the give name (done with sizeof()) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Key type (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_values</em>&nbsp;</td><td>Number of values in key. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>item_size</em>&nbsp;</td><td>Size of individual key value (used for strings) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l03884">3884</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga78b9946f84f5f8059dd71cc6dbccd1a7"></a><!-- doxytag: member="odb.c::db_get_key_time" ref="ga78b9946f84f5f8059dd71cc6dbccd1a7" args="(HNDLE hDB, HNDLE hKey, DWORD *delta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_get_key_time </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>delta</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get time when key was last modified </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle of key to operate on </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>delta</em>&nbsp;</td><td>Seconds since last update </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l03826">3826</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga331624e7c034494217249e36b97c8f69"></a><!-- doxytag: member="odb.c::db_get_link" ref="ga331624e7c034494217249e36b97c8f69" args="(HNDLE hDB, HNDLE hKey, KEY *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_get_link </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structKEY.html">KEY</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Same as db_get_key, but it does not follow a link to an array index </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>Pointer to <a class="el" href="structKEY.html">KEY</a> stucture. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l03762">3762</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="odb_8c_source.html#l05662">db_copy()</a>, and <a class="el" href="odb_8c_source.html#l06646">db_save_xml_key()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf07dd1abe9b9f63238c9b1d9a3bd5cc0"></a><!-- doxytag: member="odb.c::db_get_link_data" ref="gaf07dd1abe9b9f63238c9b1d9a3bd5cc0" args="(HNDLE hDB, HNDLE hKey, void *data, INT *buf_size, DWORD type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_get_link_data </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *&nbsp;</td>
          <td class="paramname"> <em>buf_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Same as db_get_data, but do not follow a link to an array index</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Pointer to the return data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf_size</em>&nbsp;</td><td>Size of data buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of key, one of TID_xxx (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_TRUNCATED, DB_TYPE_MISMATCH </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l04322">4322</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="odb_8c_source.html#l05662">db_copy()</a>, and <a class="el" href="odb_8c_source.html#l06646">db_save_xml_key()</a>.</p>

</div>
</div>
<a class="anchor" id="gae1aa78c5834dd17ee282e9289c5c482a"></a><!-- doxytag: member="odb.c::db_get_lock_cnt" ref="gae1aa78c5834dd17ee282e9289c5c482a" args="(HNDLE hDB)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_get_lock_cnt </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="odb_8c_source.html#l01503">1503</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga7a9c0dd3e4bec48a07be99d2fc0e08cf"></a><!-- doxytag: member="odb.c::db_get_record" ref="ga7a9c0dd3e4bec48a07be99d2fc0e08cf" args="(HNDLE hDB, HNDLE hKey, void *data, INT *buf_size, INT align)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_get_record </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *&nbsp;</td>
          <td class="paramname"> <em>buf_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>align</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Copy a set of keys to local memory.</p>
<p>An ODB sub-tree can be mapped to a C structure automatically via a hot-link using the function <a class="el" href="group__odbfunctionc.html#ga852bc9fa8ee4d0884b328aeb0b0cfd63">db_open_record()</a> or manually with this function. Problems might occur if the ODB sub-tree contains values which don't match the C structure. Although the structure size is checked against the sub-tree size, no checking can be done if the type and order of the values in the structure are the same than those in the ODB sub-tree. Therefore it is recommended to use the function <a class="el" href="group__odbfunctionc.html#ga59b971e77416b2b463e2e63f1b05342b">db_create_record()</a> before <a class="el" href="group__odbfunctionc.html#ga7a9c0dd3e4bec48a07be99d2fc0e08cf">db_get_record()</a> is used which ensures that both are equivalent. </p>
<div class="fragment"><pre class="fragment"><span class="keyword">struct </span>{
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a> level1;
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a> level2;
} <a class="code" href="analyzer_8c.html#a0bedba90e4b62eddbca641fac7402d4d">trigger_settings</a>;
<span class="keywordtype">char</span> *trigger_settings_str =
<span class="stringliteral">&quot;[Settings]\n\</span>
<span class="stringliteral">level1 = INT : 0\n\</span>
<span class="stringliteral">level2 = INT : 0&quot;</span>;

<a class="code" href="mfe_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>()
{
  HNDLE hDB, hkey;
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>   size;
  ...
  <a class="code" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database</a>(&amp;hDB, NULL);
  <a class="code" href="group__odbfunctionc.html#ga59b971e77416b2b463e2e63f1b05342b">db_create_record</a>(hDB, 0, <span class="stringliteral">&quot;/Equipment/Trigger&quot;</span>, trigger_settings_str);
  <a class="code" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key</a>(hDB, 0, <span class="stringliteral">&quot;/Equipment/Trigger/Settings&quot;</span>, &amp;hkey);
  size = <span class="keyword">sizeof</span>(<a class="code" href="analyzer_8c.html#a0bedba90e4b62eddbca641fac7402d4d">trigger_settings</a>);
  <a class="code" href="group__odbfunctionc.html#ga7a9c0dd3e4bec48a07be99d2fc0e08cf">db_get_record</a>(hDB, hkey, &amp;<a class="code" href="analyzer_8c.html#a0bedba90e4b62eddbca641fac7402d4d">trigger_settings</a>, &amp;size, 0);
  ...
}
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Pointer to the retrieved data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf_size</em>&nbsp;</td><td>Size of data structure, must be obtained via sizeof(RECORD-NAME). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>align</em>&nbsp;</td><td>Byte alignment calculated by the stub and passed to the rpc side to align data according to local machine. Must be zero when called from user level. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_STRUCT_SIZE_MISMATCH </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l07516">7516</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="alarm_8c_source.html#l00527">al_check()</a>, <a class="el" href="alarm_8c_source.html#l00439">al_reset_alarm()</a>, <a class="el" href="alarm_8c_source.html#l00212">al_trigger_alarm()</a>, <a class="el" href="fevmemodules_8c_source.html#l00285">begin_of_run()</a>, <a class="el" href="midas_8c_source.html#l03439">cm_transition1()</a>, <a class="el" href="odb_8c_source.html#l08495">db_open_record()</a>, <a class="el" href="odb_8c_source.html#l08696">db_update_record()</a>, <a class="el" href="mevb_8c_source.html#l00114">register_equipment()</a>, and <a class="el" href="mevb_8c_source.html#l00614">tr_start()</a>.</p>

</div>
</div>
<a class="anchor" id="ga70b171dc66b0673fc9ed773fca31b7dc"></a><!-- doxytag: member="odb.c::db_get_record_size" ref="ga70b171dc66b0673fc9ed773fca31b7dc" args="(HNDLE hDB, HNDLE hKey, INT align, INT *buf_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_get_record_size </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>align</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *&nbsp;</td>
          <td class="paramname"> <em>buf_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Calculates the size of a record. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>align</em>&nbsp;</td><td>Byte alignment calculated by the stub and passed to the rpc side to align data according to local machine. Must be zero when called from user level </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf_size</em>&nbsp;</td><td>Size of record structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_TYPE_MISMATCH, DB_STRUCT_SIZE_MISMATCH, DB_NO_KEY </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l07430">7430</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="odb_8c_source.html#l07516">db_get_record()</a>, <a class="el" href="odb_8c_source.html#l08495">db_open_record()</a>, and <a class="el" href="odb_8c_source.html#l07619">db_set_record()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf3958854e073e1ddbb43324e07a6287f"></a><!-- doxytag: member="odb.c::db_get_value" ref="gaf3958854e073e1ddbb43324e07a6287f" args="(HNDLE hDB, HNDLE hKeyRoot, const char *key_name, void *data, INT *buf_size, DWORD type, BOOL create)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_get_value </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKeyRoot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>key_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *&nbsp;</td>
          <td class="paramname"> <em>buf_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>&nbsp;</td>
          <td class="paramname"> <em>create</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get value of a single key.</p>
<p>The function returns single values or whole arrays which are contained in an ODB key. Since the data buffer is of type void, no type checking can be performed by the compiler. Therefore the type has to be explicitly supplied, which is checked against the type stored in the ODB. key_name can contain the full path of a key (like: "/Equipment/Trigger/Settings/Level1") while hkey is zero which refers to the root, or hkey can refer to a sub-directory (like: /Equipment/Trigger) and key_name is interpreted relative to that directory like "Settings/Level1". </p>
<div class="fragment"><pre class="fragment"><a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a> level1, size;
  size = <span class="keyword">sizeof</span>(level1);
  <a class="code" href="group__odbfunctionc.html#gaf3958854e073e1ddbb43324e07a6287f">db_get_value</a>(hDB, 0, <span class="stringliteral">&quot;/Equipment/Trigger/Settings/Level1&quot;</span>,
                                   &amp;level1, &amp;size, <a class="code" href="group__mdefineh.html#gad950d5fde6dd3ea7eba59fb6760a38cb">TID_INT</a>, 0);
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKeyRoot</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key_name</em>&nbsp;</td><td>Name of key to search, can contain directories. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Address of data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf_size</em>&nbsp;</td><td>Maximum buffer size on input, number of written bytes on return. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of key, one of TID_xxx (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>create</em>&nbsp;</td><td>If TRUE, create key if not existing </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_NO_ACCESS, DB_TYPE_MISMATCH, DB_TRUNCATED, DB_NO_KEY </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l03190">3190</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="alarm_8c_source.html#l00527">al_check()</a>, <a class="el" href="alarm_8c_source.html#l00714">al_get_alarms()</a>, <a class="el" href="alarm_8c_source.html#l00212">al_trigger_alarm()</a>, <a class="el" href="analyzer_8c_source.html#l00206">ana_end_of_run()</a>, <a class="el" href="midas_8c_source.html#l04595">bm_open_buffer()</a>, <a class="el" href="midas_8c_source.html#l01604">cm_check_client()</a>, <a class="el" href="midas_8c_source.html#l02074">cm_connect_experiment1()</a>, <a class="el" href="midas_8c_source.html#l05290">cm_exist()</a>, <a class="el" href="midas_8c_source.html#l00377">cm_msg_log()</a>, <a class="el" href="midas_8c_source.html#l00469">cm_msg_log1()</a>, <a class="el" href="midas_8c_source.html#l01136">cm_msg_retrieve()</a>, <a class="el" href="midas_8c_source.html#l03289">cm_register_deferred_transition()</a>, <a class="el" href="midas_8c_source.html#l01702">cm_set_client_info()</a>, <a class="el" href="midas_8c_source.html#l05176">cm_shutdown()</a>, <a class="el" href="midas_8c_source.html#l03439">cm_transition1()</a>, <a class="el" href="elog_8c_source.html#l00081">el_submit()</a>, <a class="el" href="hv_8c_source.html#l00463">hv_init()</a>, <a class="el" href="mevb_8c_source.html#l00243">load_fragment()</a>, <a class="el" href="mfe_8c_source.html#l01599">logger_root()</a>, <a class="el" href="mevb_8c_source.html#l01157">main()</a>, <a class="el" href="mevb_8c_source.html#l00114">register_equipment()</a>, <a class="el" href="mfe_8c_source.html#l01853">scheduler()</a>, and <a class="el" href="mevb_8c_source.html#l00614">tr_start()</a>.</p>

</div>
</div>
<a class="anchor" id="ga437034642fc8851bfa67937635cb7d12"></a><!-- doxytag: member="odb.c::db_load" ref="ga437034642fc8851bfa67937635cb7d12" args="(HNDLE hDB, HNDLE hKeyRoot, const char *filename, BOOL bRemote)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_load </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKeyRoot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>&nbsp;</td>
          <td class="paramname"> <em>bRemote</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Load a branch of a database from an .ODB file.</p>
<p>This function is used by the ODBEdit command load. For a description of the ASCII format, see <a class="el" href="group__odbfunctionc.html#ga165f2428c082852ff2ac1e8c4c78d607">db_copy()</a>. Data can be loaded relative to the root of the ODB (hkey equal zero) or relative to a certain key. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKeyRoot</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>Filename of .ODB file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bRemote</em>&nbsp;</td><td>If TRUE, the file is loaded by the server process on the back-end, if FALSE, it is loaded from the current process </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_FILE_ERROR </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l05577">5577</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga299048aeed427690630027aa5aebc451"></a><!-- doxytag: member="odb.c::db_lock_database" ref="ga299048aeed427690630027aa5aebc451" args="(HNDLE hDB)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_lock_database </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Lock a database for exclusive access via system semaphore calls. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>Handle to the database to lock </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_TIMEOUT </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l01394">1394</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="midas_8c_source.html#l01604">cm_check_client()</a>, <a class="el" href="midas_8c_source.html#l05381">cm_cleanup()</a>, <a class="el" href="midas_8c_source.html#l01547">cm_delete_client_info()</a>, <a class="el" href="midas_8c_source.html#l05290">cm_exist()</a>, <a class="el" href="midas_8c_source.html#l02942">cm_get_watchdog_info()</a>, <a class="el" href="midas_8c_source.html#l01702">cm_set_client_info()</a>, <a class="el" href="midas_8c_source.html#l02809">cm_set_watchdog_params()</a>, <a class="el" href="odb_8c_source.html#l01105">db_close_database()</a>, <a class="el" href="odb_8c_source.html#l01590">db_create_key()</a>, <a class="el" href="odb_8c_source.html#l08021">db_create_record()</a>, <a class="el" href="odb_8c_source.html#l01858">db_delete_key1()</a>, <a class="el" href="odb_8c_source.html#l03342">db_enum_key()</a>, <a class="el" href="odb_8c_source.html#l02065">db_find_key()</a>, <a class="el" href="odb_8c_source.html#l04196">db_get_data()</a>, <a class="el" href="odb_8c_source.html#l04547">db_get_data_index()</a>, <a class="el" href="odb_8c_source.html#l03681">db_get_key()</a>, <a class="el" href="odb_8c_source.html#l03884">db_get_key_info()</a>, <a class="el" href="odb_8c_source.html#l03826">db_get_key_time()</a>, <a class="el" href="odb_8c_source.html#l03762">db_get_link()</a>, <a class="el" href="odb_8c_source.html#l04322">db_get_link_data()</a>, <a class="el" href="odb_8c_source.html#l07516">db_get_record()</a>, <a class="el" href="odb_8c_source.html#l07430">db_get_record_size()</a>, <a class="el" href="odb_8c_source.html#l03190">db_get_value()</a>, <a class="el" href="odb_8c_source.html#l00788">db_open_database()</a>, <a class="el" href="odb_8c_source.html#l04670">db_set_data()</a>, <a class="el" href="odb_8c_source.html#l05033">db_set_data_index()</a>, <a class="el" href="odb_8c_source.html#l04796">db_set_link_data()</a>, <a class="el" href="odb_8c_source.html#l05172">db_set_link_data_index()</a>, <a class="el" href="odb_8c_source.html#l07619">db_set_record()</a>, and <a class="el" href="odb_8c_source.html#l03021">db_set_value()</a>.</p>

</div>
</div>
<a class="anchor" id="gaece9851974b00231428f82b341e2c523"></a><!-- doxytag: member="odb.c::db_open_database" ref="gaece9851974b00231428f82b341e2c523" args="(const char *xdatabase_name, INT database_size, HNDLE *hDB, const char *client_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_open_database </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>xdatabase_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>database_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE *&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>client_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Open an online database </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>database_name</em>&nbsp;</td><td>Database name. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>database_size</em>&nbsp;</td><td>Initial size of database if not existing </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>client_name</em>&nbsp;</td><td>Name of this application </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_CREATED, DB_INVALID_NAME, DB_NO_MEMORY, DB_MEMSIZE_MISMATCH, DB_NO_SEMAPHORE, DB_INVALID_PARAM, RPC_NET_ERROR </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l00788">788</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="midas_8c_source.html#l02074">cm_connect_experiment1()</a>.</p>

</div>
</div>
<a class="anchor" id="ga852bc9fa8ee4d0884b328aeb0b0cfd63"></a><!-- doxytag: member="odb.c::db_open_record" ref="ga852bc9fa8ee4d0884b328aeb0b0cfd63" args="(HNDLE hDB, HNDLE hKey, void *ptr, INT rec_size, WORD access_mode, void(*dispatcher)(INT, INT, void *), void *info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_open_record </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>rec_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a2b0e863dadf920709ec53d9088ee7c91">WORD</a>&nbsp;</td>
          <td class="paramname"> <em>access_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>, <a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>, void *)&nbsp;</td>
          <td class="paramname"> <em>dispatcher</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>info</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Open a record. Create a local copy and maintain an automatic update.</p>
<p>This function opens a hot-link between an ODB sub-tree and a local structure. The sub-tree is copied to the structure automatically every time it is modified by someone else. Additionally, a callback function can be declared which is called after the structure has been updated. The callback function receives the database handle and the key handle as <a class="el" href="structparameters.html">parameters</a>.</p>
<p>Problems might occur if the ODB sub-tree contains values which don't match the C structure. Although the structure size is checked against the sub-tree size, no checking can be done if the type and order of the values in the structure are the same than those in the ODB sub-tree. Therefore it is recommended to use the function <a class="el" href="group__odbfunctionc.html#ga59b971e77416b2b463e2e63f1b05342b">db_create_record()</a> before <a class="el" href="group__odbfunctionc.html#ga852bc9fa8ee4d0884b328aeb0b0cfd63">db_open_record()</a> is used which ensures that both are equivalent.</p>
<p>The access mode might either be MODE_READ or MODE_WRITE. In read mode, the ODB sub-tree is automatically copied to the local structure when modified by other clients. In write mode, the local structure is copied to the ODB sub-tree if it has been modified locally. This update has to be manually scheduled by calling <a class="el" href="group__odbfunctionc.html#gae5ccb46009b64dbeff8dbc05be27664b">db_send_changed_records()</a> periodically in the main loop. The system keeps a copy of the local structure to determine if its contents has been changed.</p>
<p>If MODE_ALLOC is or'ed with the access mode, the memory for the structure is allocated internally. The structure pointer must contain a pointer to a pointer to the structure. The internal memory is released when <a class="el" href="group__odbfunctionc.html#gaa621351e007f68f6298b8edf5bd652c4">db_close_record()</a> is called.</p>
<ul>
<li>To open a record in write mode. <div class="fragment"><pre class="fragment"><span class="keyword">struct </span>{
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a> level1;
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a> level2;
} <a class="code" href="analyzer_8c.html#a0bedba90e4b62eddbca641fac7402d4d">trigger_settings</a>;
<span class="keywordtype">char</span> *trigger_settings_str =
<span class="stringliteral">&quot;[Settings]\n\</span>
<span class="stringliteral">level1 = INT : 0\n\</span>
<span class="stringliteral">level2 = INT : 0&quot;</span>;
<a class="code" href="mfe_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>()
{
  HNDLE hDB, hkey, i=0;
  ...
  <a class="code" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database</a>(&amp;hDB, NULL);
  <a class="code" href="group__odbfunctionc.html#ga59b971e77416b2b463e2e63f1b05342b">db_create_record</a>(hDB, 0, <span class="stringliteral">&quot;/Equipment/Trigger&quot;</span>, trigger_settings_str);
  <a class="code" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key</a>(hDB, 0,<span class="stringliteral">&quot;/Equipment/Trigger/Settings&quot;</span>, &amp;hkey);
  <a class="code" href="group__odbfunctionc.html#ga852bc9fa8ee4d0884b328aeb0b0cfd63">db_open_record</a>(hDB, hkey, &amp;<a class="code" href="analyzer_8c.html#a0bedba90e4b62eddbca641fac7402d4d">trigger_settings</a>, <span class="keyword">sizeof</span>(<a class="code" href="analyzer_8c.html#a0bedba90e4b62eddbca641fac7402d4d">trigger_settings</a>)
                  , <a class="code" href="group__mdefineh.html#gab8fac4c725bb7d4b05ae138c07ef54af">MODE_WRITE</a>, NULL);
  <span class="keywordflow">do</span>
  {
    <a class="code" href="analyzer_8c.html#a0bedba90e4b62eddbca641fac7402d4d">trigger_settings</a>.level1 = i++;
    <a class="code" href="group__odbfunctionc.html#gae5ccb46009b64dbeff8dbc05be27664b">db_send_changed_records</a>()
    status = <a class="code" href="group__cmfunctionc.html#ga115565c5a1d9591fcabf844c1dd624f8">cm_yield</a>(1000);
  } while (status != <a class="code" href="group__err25.html#ga0406ee07e8c5afbf8e46cb0eed698bcd">RPC_SHUTDOWN</a> &amp;&amp; status != <a class="code" href="group__err24.html#ga136923b4499af07f13a3cd631b88ec0e">SS_ABORT</a>);
  ...
}
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ptr</em>&nbsp;</td><td>If access_mode includes MODE_ALLOC: Address of pointer which points to the record data after the call if access_mode includes not MODE_ALLOC: Address of record if ptr==NULL, only the dispatcher is called. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rec_size</em>&nbsp;</td><td>Record size in bytes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>access_mode</em>&nbsp;</td><td>Mode for opening record, either MODE_READ or MODE_WRITE. May be or'ed with MODE_ALLOC to let db_open_record allocate the memory for the record. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>(*dispatcher)</em>&nbsp;</td><td>Function which gets called when record is updated.The argument list composed of: HNDLE hDB, HNDLE hKey, void *info </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>info</em>&nbsp;</td><td>Additional info passed to the dispatcher. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_NO_MEMORY, DB_NO_ACCESS, DB_STRUCT_SIZE_MISMATCH </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="odb_8c_source.html#l08495">8495</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="analyzer_8c_source.html#l00137">analyzer_init()</a>, <a class="el" href="midas_8c_source.html#l03289">cm_register_deferred_transition()</a>, <a class="el" href="fevmemodules_8c_source.html#l00233">frontend_init()</a>, <a class="el" href="hv_8c_source.html#l00463">hv_init()</a>, <a class="el" href="mevb_8c_source.html#l00114">register_equipment()</a>, and <a class="el" href="hv_8c_source.html#l00441">validate_odb_array()</a>.</p>

</div>
</div>
<a class="anchor" id="gac1bf8d648ef2ddb1ac6243e5e11dedf2"></a><!-- doxytag: member="odb.c::db_paste" ref="gac1bf8d648ef2ddb1ac6243e5e11dedf2" args="(HNDLE hDB, HNDLE hKeyRoot, const char *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_paste </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKeyRoot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>buffer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Copy an ODB subtree in ASCII format from a buffer </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKeyRoot</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>NULL-terminated buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_TRUNCATED, DB_NO_MEMORY </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l05927">5927</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="odb_8c_source.html#l08021">db_create_record()</a>, and <a class="el" href="odb_8c_source.html#l05577">db_load()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4c389e553182916bd3c311d1f07d6923"></a><!-- doxytag: member="odb.c::db_paste_node" ref="ga4c389e553182916bd3c311d1f07d6923" args="(HNDLE hDB, HNDLE hKeyRoot, PMXML_NODE node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int db_paste_node </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKeyRoot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PMXML_NODE&nbsp;</td>
          <td class="paramname"> <em>node</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="odb_8c_source.html#l06204">6204</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="odb_8c_source.html#l06334">db_paste_xml()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7b0051acf49620e36823f55b907dda7a"></a><!-- doxytag: member="odb.c::db_paste_xml" ref="ga7b0051acf49620e36823f55b907dda7a" args="(HNDLE hDB, HNDLE hKeyRoot, const char *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_paste_xml </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKeyRoot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>buffer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Paste an ODB subtree in XML format from a buffer </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKeyRoot</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>NULL-terminated buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_PARAM, DB_NO_MEMORY, DB_TYPE_MISMATCH </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l06334">6334</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="odb_8c_source.html#l05577">db_load()</a>.</p>

</div>
</div>
<a class="anchor" id="ga959637b6837f613af5a8a3df52af6f3b"></a><!-- doxytag: member="odb.c::db_protect_database" ref="ga959637b6837f613af5a8a3df52af6f3b" args="(HNDLE hDB)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_protect_database </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Protect a database for read/write access outside of the <b>db_xxx</b> functions </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l01529">1529</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga6f9a61b316a1c2a5c9c143fc84edf63b"></a><!-- doxytag: member="odb.c::db_save" ref="ga6f9a61b316a1c2a5c9c143fc84edf63b" args="(HNDLE hDB, HNDLE hKey, const char *filename, BOOL bRemote)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_save </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>&nbsp;</td>
          <td class="paramname"> <em>bRemote</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Save a branch of a database to an .ODB file</p>
<p>This function is used by the ODBEdit command save. For a description of the ASCII format, see <a class="el" href="group__odbfunctionc.html#ga165f2428c082852ff2ac1e8c4c78d607">db_copy()</a>. Data of the whole ODB can be saved (hkey equal zero) or only a sub-tree. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>Filename of .ODB file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bRemote</em>&nbsp;</td><td>Flag for saving database on remote server. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_FILE_ERROR </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l06547">6547</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga07197b44867ca47300b1f69f2c2c3e86"></a><!-- doxytag: member="odb.c::db_save_struct" ref="ga07197b44867ca47300b1f69f2c2c3e86" args="(HNDLE hDB, HNDLE hKey, const char *file_name, const char *struct_name, BOOL append)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_save_struct </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>struct_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>&nbsp;</td>
          <td class="paramname"> <em>append</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Save a branch of a database to a C structure .H file </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>file_name</em>&nbsp;</td><td>Filename of .ODB file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>struct_name</em>&nbsp;</td><td>Name of structure. If struct_name == NULL, the name of the key is used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>append</em>&nbsp;</td><td>If TRUE, append to end of existing file </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_FILE_ERROR </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l06801">6801</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="gac967051f0433c70482abca0450c038e6"></a><!-- doxytag: member="odb.c::db_save_xml" ref="gac967051f0433c70482abca0450c038e6" args="(HNDLE hDB, HNDLE hKey, const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_save_xml </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Save a branch of a database to an .xml file</p>
<p>This function is used by the ODBEdit command save to write the contents of the ODB into a XML file. Data of the whole ODB can be saved (hkey equal zero) or only a sub-tree. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>Filename of .XML file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_FILE_ERROR </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l06749">6749</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga8e06bc33dcda0d67e110070449e86745"></a><!-- doxytag: member="odb.c::db_save_xml_key" ref="ga8e06bc33dcda0d67e110070449e86745" args="(HNDLE hDB, HNDLE hKey, INT level, MXML_WRITER *writer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_save_xml_key </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MXML_WRITER *&nbsp;</td>
          <td class="paramname"> <em>writer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="odb_8c_source.html#l06646">6646</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="odb_8c_source.html#l06373">db_copy_xml()</a>, and <a class="el" href="odb_8c_source.html#l06749">db_save_xml()</a>.</p>

</div>
</div>
<a class="anchor" id="gae5ccb46009b64dbeff8dbc05be27664b"></a><!-- doxytag: member="odb.c::db_send_changed_records" ref="gae5ccb46009b64dbeff8dbc05be27664b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_send_changed_records </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Send all records to the ODB which were changed locally since the last call to this function.</p>
<p>This function is valid if used in conjunction with <a class="el" href="group__odbfunctionc.html#ga852bc9fa8ee4d0884b328aeb0b0cfd63">db_open_record()</a> under the condition the record is open as MODE_WRITE access code.</p>
<ul>
<li>Full example dbchange.c which can be compiled as follow <div class="fragment"><pre class="fragment">gcc -DOS_LINUX -I/midas/include -o dbchange dbchange.c
/midas/linux/lib/libmidas.a -lutil}

\begin{verbatim}
<span class="comment">//------- dbchange.c</span>
<span class="preprocessor">#include &quot;<a class="code" href="midas_8h.html">midas.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="msystem_8h.html">msystem.h</a>&quot;</span>
</pre></div></li>
</ul>
<div class="fragment"><pre class="fragment"><span class="comment">//-------- BOF dbchange.c</span>
<span class="keyword">typedef</span> <span class="keyword">struct </span>{
    <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>    my_number;
    <span class="keywordtype">float</span>   my_rate;
} MY_STATISTICS;

MY_STATISTICS myrec;

<span class="preprocessor">#define MY_STATISTICS(_name) char *_name[] = {\</span>
<span class="preprocessor">&quot;My Number = INT : 0&quot;,\</span>
<span class="preprocessor">&quot;My Rate = FLOAT : 0&quot;,\</span>
<span class="preprocessor">&quot;&quot;,\</span>
<span class="preprocessor">NULL }</span>
<span class="preprocessor"></span>
HNDLE hDB, <a class="code" href="mevb_8c.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>;

<span class="comment">// Main</span>
<span class="keywordtype">int</span> <a class="code" href="mfe_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> argc,<span class="keywordtype">char</span> **argv)
{
  <span class="keywordtype">char</span>      <a class="code" href="mfe_8c.html#af65cc3664520b7cd0817adc7106f9624">host_name</a>[<a class="code" href="group__midasincludecode.html#ga2010c9ed4ef21c3171de778157b9c494">HOST_NAME_LENGTH</a>];
  <span class="keywordtype">char</span>      <a class="code" href="mevb_8c.html#a72ed5035970a7c95a9a3e9faeb64cc1c">expt_name</a>[<a class="code" href="group__midasincludecode.html#ga2010c9ed4ef21c3171de778157b9c494">HOST_NAME_LENGTH</a>];
  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>       lastnumber, status, msg;
  <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>      <a class="code" href="mfe_8c.html#a81f0a890e023743f1b88d0cb7d4f74db">debug</a>=FALSE;
  <span class="keywordtype">char</span>      i, ch;
  <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>     update_time, mainlast_time;
  MY_STATISTICS (my_stat);

  <span class="comment">// set default</span>
  host_name[0] = 0;
  expt_name[0] = 0;

  <span class="comment">// get default</span>
  <a class="code" href="group__cmfunctionc.html#gaa483e7c17ff962fd6cdfa581f4989f54">cm_get_environment</a>(host_name, <span class="keyword">sizeof</span>(host_name), expt_name, <span class="keyword">sizeof</span>(expt_name));

  <span class="comment">// get parameters</span>
  <span class="keywordflow">for</span> (i=1 ; i&lt;argc ; i++)
  {
    <span class="keywordflow">if</span> (argv[i][0] == <span class="charliteral">&apos;-&apos;</span> &amp;&amp; argv[i][1] == <span class="charliteral">&apos;d&apos;</span>)
      debug = TRUE;
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[i][0] == <span class="charliteral">&apos;-&apos;</span>)
    {
      <span class="keywordflow">if</span> (i+1 &gt;= argc || argv[i+1][0] == <span class="charliteral">&apos;-&apos;</span>)
        <span class="keywordflow">goto</span> usage;
      <span class="keywordflow">if</span> (strncmp(argv[i],<span class="stringliteral">&quot;-e&quot;</span>,2) == 0)
        strcpy(expt_name, argv[++i]);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(argv[i],<span class="stringliteral">&quot;-h&quot;</span>,2)==0)
        strcpy(host_name, argv[++i]);
    }
    <span class="keywordflow">else</span>
    {
   usage:
      printf(<span class="stringliteral">&quot;usage: dbchange [-h &lt;Hostname&gt;] [-e &lt;Experiment&gt;]\n&quot;</span>);
      <span class="keywordflow">return</span> 0;
    }
  }

  <span class="comment">// connect to experiment</span>
  status = <a class="code" href="group__cmfunctionc.html#ga1e96495bb5b89e4ea770a1ea7bc7787b">cm_connect_experiment</a>(host_name, expt_name, <span class="stringliteral">&quot;dbchange&quot;</span>, 0);
  <span class="keywordflow">if</span> (status != <a class="code" href="group__err21.html#ga0180947941230d805f5dbb6f1801c17c">CM_SUCCESS</a>)
    <span class="keywordflow">return</span> 1;

  <span class="comment">// Connect to DB</span>
  <a class="code" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database</a>(&amp;hDB, &amp;hKey);

  <span class="comment">// Create a default structure in ODB</span>
  <a class="code" href="group__odbfunctionc.html#ga59b971e77416b2b463e2e63f1b05342b">db_create_record</a>(hDB, 0, <span class="stringliteral">&quot;My statistics&quot;</span>, strcomb(my_stat));

  <span class="comment">// Retrieve key for that strucutre in ODB</span>
  <span class="keywordflow">if</span> (<a class="code" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key</a>(hDB, 0, <span class="stringliteral">&quot;My statistics&quot;</span>, &amp;hKey) != <a class="code" href="group__err23.html#ga4d6ab4d32144d851ddeb7931b81a63e3">DB_SUCCESS</a>)
  {
    <a class="code" href="group__msgfunctionc.html#gaac032ca2438c47466bfc9722de6746ea">cm_msg</a>(<a class="code" href="group__mdefineh.html#gac2d967025ca0f84f611d568f4ede934a">MERROR</a>, <span class="stringliteral">&quot;mychange&quot;</span>, <span class="stringliteral">&quot;cannot find My statistics&quot;</span>);
    <span class="keywordflow">goto</span> error;
  }

  <span class="comment">// Hot link this structure in Write mode</span>
  status = <a class="code" href="group__odbfunctionc.html#ga852bc9fa8ee4d0884b328aeb0b0cfd63">db_open_record</a>(hDB, hKey, &amp;myrec
                          , <span class="keyword">sizeof</span>(MY_STATISTICS), <a class="code" href="group__mdefineh.html#gab8fac4c725bb7d4b05ae138c07ef54af">MODE_WRITE</a>, NULL, NULL);
  <span class="keywordflow">if</span> (status != <a class="code" href="group__err23.html#ga4d6ab4d32144d851ddeb7931b81a63e3">DB_SUCCESS</a>)
  {
    <a class="code" href="group__msgfunctionc.html#gaac032ca2438c47466bfc9722de6746ea">cm_msg</a>(<a class="code" href="group__mdefineh.html#gac2d967025ca0f84f611d568f4ede934a">MERROR</a>, <span class="stringliteral">&quot;mychange&quot;</span>, <span class="stringliteral">&quot;cannot open My statistics record&quot;</span>);
    <span class="keywordflow">goto</span> error;
  }

  <span class="comment">// initialize ss_getchar()</span>
  ss_getchar(0);

  <span class="comment">// Main loop</span>
  <span class="keywordflow">do</span>
  {
    <span class="comment">// Update local structure</span>
    <span class="keywordflow">if</span> ((<a class="code" href="group__msfunctionc.html#ga999b383482224a5a6c4f5974d2625717">ss_millitime</a>() - update_time) &gt; 100)
    {
      myrec.my_number += 1;
      <span class="keywordflow">if</span> (myrec.my_number - lastnumber) {
        myrec.my_rate = 1000.f * (float) (myrec.my_number - lastnumber)
          / (float) (<a class="code" href="group__msfunctionc.html#ga999b383482224a5a6c4f5974d2625717">ss_millitime</a>() - update_time);
      }
      update_time = <a class="code" href="group__msfunctionc.html#ga999b383482224a5a6c4f5974d2625717">ss_millitime</a>();
      lastnumber = myrec.my_number;
    }

    <span class="comment">// Publish local structure to ODB (db_send_changed_record)</span>
    <span class="keywordflow">if</span> ((<a class="code" href="group__msfunctionc.html#ga999b383482224a5a6c4f5974d2625717">ss_millitime</a>() - mainlast_time) &gt; 5000)
    {
      <a class="code" href="group__odbfunctionc.html#gae5ccb46009b64dbeff8dbc05be27664b">db_send_changed_records</a>();                   <span class="comment">// &lt;------- Call</span>
      mainlast_time = <a class="code" href="group__msfunctionc.html#ga999b383482224a5a6c4f5974d2625717">ss_millitime</a>();
    }

    <span class="comment">// Check for keyboard interaction</span>
    ch = 0;
    <span class="keywordflow">while</span> (ss_kbhit())
    {
      ch = ss_getchar(0);
      <span class="keywordflow">if</span> (ch == -1)
        ch = getchar();
      <span class="keywordflow">if</span> ((<span class="keywordtype">char</span>) ch == <span class="charliteral">&apos;!&apos;</span>)
        <span class="keywordflow">break</span>;
    }
    msg = <a class="code" href="group__cmfunctionc.html#ga115565c5a1d9591fcabf844c1dd624f8">cm_yield</a>(20);
  } <span class="keywordflow">while</span> (msg != <a class="code" href="group__err25.html#ga0406ee07e8c5afbf8e46cb0eed698bcd">RPC_SHUTDOWN</a> &amp;&amp; msg != SS_ABORT &amp;&amp; ch != <span class="charliteral">&apos;!&apos;</span>);

 error:
  <a class="code" href="group__cmfunctionc.html#ga7d5a287821786e8dde3d2340826215b2">cm_disconnect_experiment</a>();
  <span class="keywordflow">return</span> 1;
}
<span class="comment">//-------- EOF dbchange.c</span>
</pre></div> <dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l08902">8902</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="mevb_8c_source.html#l00325">scan_fragment()</a>, <a class="el" href="mfe_8c_source.html#l01853">scheduler()</a>, <a class="el" href="mfe_8c_source.html#l00145">tr_start()</a>, and <a class="el" href="mfe_8c_source.html#l00187">tr_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa3f93c5321c56ad5a5200d17958e9bb3"></a><!-- doxytag: member="odb.c::db_set_data" ref="gaa3f93c5321c56ad5a5200d17958e9bb3" args="(HNDLE hDB, HNDLE hKey, const void *data, INT buf_size, INT num_values, DWORD type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_set_data </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>buf_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>num_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set key data from a handle. Adjust number of values if previous data has different size. </p>
<div class="fragment"><pre class="fragment">HNLDE hkey;
 <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>   run_number;
 <span class="comment">// get key handle for run number</span>
 <a class="code" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key</a>(hDB, 0, <span class="stringliteral">&quot;/Runinfo/Run number&quot;</span>, &amp;hkey);
 <span class="comment">// set run number</span>
 <a class="code" href="group__odbfunctionc.html#gaa3f93c5321c56ad5a5200d17958e9bb3">db_set_data</a>(hDB, hkey, &amp;run_number, <span class="keyword">sizeof</span>(run_number),<a class="code" href="group__mdefineh.html#gad950d5fde6dd3ea7eba59fb6760a38cb">TID_INT</a>);
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Buffer from which data gets copied to. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf_size</em>&nbsp;</td><td>Size of data buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_values</em>&nbsp;</td><td>Number of data values (for arrays). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of key, one of TID_xxx (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_TRUNCATED </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l04670">4670</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="odb_8c_source.html#l06204">db_paste_node()</a>, <a class="el" href="odb_8c_source.html#l07619">db_set_record()</a>, <a class="el" href="hv_8c_source.html#l00463">hv_init()</a>, <a class="el" href="hv_8c_source.html#l00124">hv_read()</a>, and <a class="el" href="mfe_8c_source.html#l01001">update_odb()</a>.</p>

</div>
</div>
<a class="anchor" id="ga298462cf44f9ed6ea7c64ffdf23617d9"></a><!-- doxytag: member="odb.c::db_set_data_index" ref="ga298462cf44f9ed6ea7c64ffdf23617d9" args="(HNDLE hDB, HNDLE hKey, const void *data, INT data_size, INT idx, DWORD type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_set_data_index </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Set key data for a key which contains an array of values.</p>
<p>This function sets individual values of a key containing an array. If the index is larger than the array size, the array is extended and the intermediate values are set to zero. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Pointer to single value of data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data_size</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>idx</em>&nbsp;</td><td>Size of single data element. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of key, one of TID_xxx (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_NO_ACCESS, DB_TYPE_MISMATCH </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l05033">5033</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="midas_8c_source.html#l03101">cm_register_transition()</a>, <a class="el" href="odb_8c_source.html#l06204">db_paste_node()</a>, <a class="el" href="odb_8c_source.html#l04670">db_set_data()</a>, and <a class="el" href="odb_8c_source.html#l03145">db_set_value_index()</a>.</p>

</div>
</div>
<a class="anchor" id="gac4242bdfa7376f491b501e009aa1f840"></a><!-- doxytag: member="odb.c::db_set_link_data" ref="gac4242bdfa7376f491b501e009aa1f840" args="(HNDLE hDB, HNDLE hKey, const void *data, INT buf_size, INT num_values, DWORD type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_set_link_data </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>buf_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>num_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Same as db_set_data, but it does not follow a link to an array index </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Buffer from which data gets copied to. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf_size</em>&nbsp;</td><td>Size of data buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_values</em>&nbsp;</td><td>Number of data values (for arrays). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of key, one of TID_xxx (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_TRUNCATED </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l04796">4796</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="odb_8c_source.html#l05927">db_paste()</a>.</p>

</div>
</div>
<a class="anchor" id="gac66c3264c78ef6cc1e429235efe92ed6"></a><!-- doxytag: member="odb.c::db_set_link_data_index" ref="gac66c3264c78ef6cc1e429235efe92ed6" args="(HNDLE hDB, HNDLE hKey, const void *data, INT data_size, INT idx, DWORD type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_set_link_data_index </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Same as db_set_data_index, but does not follow links.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Pointer to single value of data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data_size</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>idx</em>&nbsp;</td><td>Size of single data element. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of key, one of TID_xxx (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_NO_ACCESS, DB_TYPE_MISMATCH </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l05172">5172</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga1e4bca66d45d069477c614bc2481d89f"></a><!-- doxytag: member="odb.c::db_set_record" ref="ga1e4bca66d45d069477c614bc2481d89f" args="(HNDLE hDB, HNDLE hKey, void *data, INT buf_size, INT align)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_set_record </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>buf_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>align</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Copy a set of keys from local memory to the database.</p>
<p>An ODB sub-tree can be mapped to a C structure automatically via a hot-link using the function <a class="el" href="group__odbfunctionc.html#ga852bc9fa8ee4d0884b328aeb0b0cfd63">db_open_record()</a> or manually with this function. Problems might occur if the ODB sub-tree contains values which don't match the C structure. Although the structure size is checked against the sub-tree size, no checking can be done if the type and order of the values in the structure are the same than those in the ODB sub-tree. Therefore it is recommended to use the function <a class="el" href="group__odbfunctionc.html#ga59b971e77416b2b463e2e63f1b05342b">db_create_record()</a> before using this function. </p>
<div class="fragment"><pre class="fragment">...
  memset(&amp;lazyst,0,size);
  <span class="keywordflow">if</span> (<a class="code" href="group__odbfunctionc.html#ga321df44195a9cbc83dbf10e32e32fd5b">db_find_key</a>(hDB, pLch-&gt;hKey, <span class="stringliteral">&quot;Statistics&quot;</span>,&amp;hKeyst) == <a class="code" href="group__err23.html#ga4d6ab4d32144d851ddeb7931b81a63e3">DB_SUCCESS</a>)
    status = <a class="code" href="group__odbfunctionc.html#ga1e4bca66d45d069477c614bc2481d89f">db_set_record</a>(hDB, hKeyst, &amp;lazyst, size, 0);
  <span class="keywordflow">else</span>
    <a class="code" href="group__msgfunctionc.html#gaac032ca2438c47466bfc9722de6746ea">cm_msg</a>(<a class="code" href="group__mdefineh.html#gac2d967025ca0f84f611d568f4ede934a">MERROR</a>,<span class="stringliteral">&quot;task&quot;</span>,<span class="stringliteral">&quot;record %s/statistics not found&quot;</span>, pLch-&gt;name)
...
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Pointer where data is stored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf_size</em>&nbsp;</td><td>Size of data structure, must be obtained via sizeof(RECORD-NAME). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>align</em>&nbsp;</td><td>Byte alignment calculated by the stub and passed to the rpc side to align data according to local machine. Must be zero when called from user level. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_TYPE_MISMATCH, DB_STRUCT_SIZE_MISMATCH </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l07619">7619</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="alarm_8c_source.html#l00527">al_check()</a>, <a class="el" href="alarm_8c_source.html#l00439">al_reset_alarm()</a>, <a class="el" href="alarm_8c_source.html#l00212">al_trigger_alarm()</a>, <a class="el" href="odb_8c_source.html#l08495">db_open_record()</a>, <a class="el" href="odb_8c_source.html#l08902">db_send_changed_records()</a>, <a class="el" href="hv_8c_source.html#l00463">hv_init()</a>, <a class="el" href="mevb_8c_source.html#l00114">register_equipment()</a>, and <a class="el" href="mfe_8c_source.html#l01001">update_odb()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf0b052657ba1d4f4a8b6d47dbc70008c"></a><!-- doxytag: member="odb.c::db_set_value" ref="gaf0b052657ba1d4f4a8b6d47dbc70008c" args="(HNDLE hDB, HNDLE hKeyRoot, const char *key_name, const void *data, INT data_size, INT num_values, DWORD type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_set_value </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKeyRoot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>key_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>num_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Set value of a single key.</p>
<p>The function sets a single value or a whole array to a ODB key. Since the data buffer is of type void, no type checking can be performed by the compiler. Therefore the type has to be explicitly supplied, which is checked against the type stored in the ODB. key_name can contain the full path of a key (like: "/Equipment/Trigger/Settings/Level1") while hkey is zero which refers to the root, or hkey can refer to a sub-directory (like /Equipment/Trigger) and key_name is interpreted relative to that directory like "Settings/Level1". </p>
<div class="fragment"><pre class="fragment"><a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a> level1;
  <a class="code" href="group__odbfunctionc.html#gaf0b052657ba1d4f4a8b6d47dbc70008c">db_set_value</a>(hDB, 0, <span class="stringliteral">&quot;/Equipment/Trigger/Settings/Level1&quot;</span>,
                          &amp;level1, <span class="keyword">sizeof</span>(level1), 1, <a class="code" href="group__mdefineh.html#gad950d5fde6dd3ea7eba59fb6760a38cb">TID_INT</a>);
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKeyRoot</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key_name</em>&nbsp;</td><td>Name of key to search, can contain directories. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Address of data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data_size</em>&nbsp;</td><td>Size of data (in bytes). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_values</em>&nbsp;</td><td>Number of data elements. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of key, one of TID_xxx (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE, DB_NO_ACCESS, DB_TYPE_MISMATCH </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l03021">3021</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="alarm_8c_source.html#l00212">al_trigger_alarm()</a>, <a class="el" href="midas_8c_source.html#l02074">cm_connect_experiment1()</a>, <a class="el" href="midas_8c_source.html#l01547">cm_delete_client_info()</a>, <a class="el" href="midas_8c_source.html#l03289">cm_register_deferred_transition()</a>, <a class="el" href="midas_8c_source.html#l03101">cm_register_transition()</a>, <a class="el" href="midas_8c_source.html#l01702">cm_set_client_info()</a>, <a class="el" href="midas_8c_source.html#l03225">cm_set_transition_sequence()</a>, <a class="el" href="midas_8c_source.html#l02809">cm_set_watchdog_params()</a>, <a class="el" href="midas_8c_source.html#l03439">cm_transition1()</a>, <a class="el" href="odb_8c_source.html#l01830">db_create_link()</a>, <a class="el" href="odb_8c_source.html#l03190">db_get_value()</a>, <a class="el" href="fevmemodules_8c_source.html#l00621">frontend_loop()</a>, <a class="el" href="mfe_8c_source.html#l00544">register_equipment()</a>, <a class="el" href="mfe_8c_source.html#l00975">set_equipment_status()</a>, <a class="el" href="mevb_8c_source.html#l00614">tr_start()</a>, and <a class="el" href="mfe_8c_source.html#l01001">update_odb()</a>.</p>

</div>
</div>
<a class="anchor" id="ga88a578560f272f0cc9a199eacb3e1048"></a><!-- doxytag: member="odb.c::db_set_value_index" ref="ga88a578560f272f0cc9a199eacb3e1048" args="(HNDLE hDB, HNDLE hKeyRoot, const char *key_name, const void *data, INT data_size, INT idx, DWORD type, BOOL trunc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_set_value_index </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hKeyRoot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>key_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>&nbsp;</td>
          <td class="paramname"> <em>trunc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set single value of an array.</p>
<p>The function sets a single value of an ODB key which is an array. key_name can contain the full path of a key (like: "/Equipment/Trigger/Settings/Level1") while hkey is zero which refers to the root, or hkey can refer to a sub-directory (like /Equipment/Trigger) and key_name is interpreted relative to that directory like "Settings/Level1". </p>
<div class="fragment"><pre class="fragment"><a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a> level1;
  <a class="code" href="group__odbfunctionc.html#ga88a578560f272f0cc9a199eacb3e1048">db_set_value_index</a>(hDB, 0, <span class="stringliteral">&quot;/Equipment/Trigger/Settings/Level1&quot;</span>,
                          &amp;level1, <span class="keyword">sizeof</span>(level1), 15, <a class="code" href="group__mdefineh.html#gad950d5fde6dd3ea7eba59fb6760a38cb">TID_INT</a>, FALSE);
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKeyRoot</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key_name</em>&nbsp;</td><td>Name of key to search, can contain directories. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Address of data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data_size</em>&nbsp;</td><td>Size of data (in bytes). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>Array index of value. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of key, one of TID_xxx (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>truncate</em>&nbsp;</td><td>Truncate array to current index if TRUE </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>&lt;same as db_set_data_index&gt; </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l03145">3145</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga594e4b0d774999bdcc1161e8b6b84052"></a><!-- doxytag: member="odb.c::db_sprintf" ref="ga594e4b0d774999bdcc1161e8b6b84052" args="(char *string, const void *data, INT data_size, INT idx, DWORD type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_sprintf </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Convert a database value to a string according to its type.</p>
<p>This function is a convenient way to convert a binary ODB value into a string depending on its type if is not known at compile time. If it is known, the normal sprintf() function can be used. </p>
<div class="fragment"><pre class="fragment">...
  <span class="keywordflow">for</span> (j=0 ; j&lt;key.<a class="code" href="structKEY.html#a2604fa0fc38ce19b011785f806185a02">num_values</a> ; j++)
  {
    <a class="code" href="group__odbfunctionc.html#ga594e4b0d774999bdcc1161e8b6b84052">db_sprintf</a>(pbuf, pdata, key.<a class="code" href="structKEY.html#acd1951fdb8bf0dec79ef833f6dec9276">item_size</a>, j, key.<a class="code" href="structKEY.html#a3360f9082d5083ea144f093d0cd774e3">type</a>);
    strcat(pbuf, <span class="stringliteral">&quot;\n&quot;</span>);
  }
  ...
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>output ASCII string of data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Value data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data_size</em>&nbsp;</td><td>Size of single data element. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>idx</em>&nbsp;</td><td>Index for array data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of key, one of TID_xxx (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l06975">6975</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="odb_8c_source.html#l05662">db_copy()</a>, <a class="el" href="odb_8c_source.html#l06646">db_save_xml_key()</a>, and <a class="el" href="history_8c_source.html#l01747">hs_dump()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2d16cbf1e235c26b1b1fa8e75a811d50"></a><!-- doxytag: member="odb.c::db_sprintff" ref="ga2d16cbf1e235c26b1b1fa8e75a811d50" args="(char *string, const char *format, const void *data, INT data_size, INT idx, DWORD type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_sprintff </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vt2_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Same as db_sprintf, but with additional format parameter</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>output ASCII string of data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>format</em>&nbsp;</td><td>Format specifier passed to sprintf() </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Value data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data_size</em>&nbsp;</td><td>Size of single data element. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>idx</em>&nbsp;</td><td>Index for array data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of key, one of TID_xxx (see <a class="el" href="F_Midas_Code_and_Libraries.html#Midas_Data_Types">Midas_Data_Types</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l07045">7045</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga52885112dd8f2acc551ac0610d7f552d"></a><!-- doxytag: member="odb.c::db_unlock_database" ref="ga52885112dd8f2acc551ac0610d7f552d" args="(HNDLE hDB)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_unlock_database </td>
          <td>(</td>
          <td class="paramtype">HNDLE&nbsp;</td>
          <td class="paramname"> <em>hDB</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Unlock a database via system semaphore calls. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>Handle to the database to unlock </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l01461">1461</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="midas_8c_source.html#l01604">cm_check_client()</a>, <a class="el" href="midas_8c_source.html#l05381">cm_cleanup()</a>, <a class="el" href="midas_8c_source.html#l01547">cm_delete_client_info()</a>, <a class="el" href="midas_8c_source.html#l05290">cm_exist()</a>, <a class="el" href="midas_8c_source.html#l02942">cm_get_watchdog_info()</a>, <a class="el" href="midas_8c_source.html#l01702">cm_set_client_info()</a>, <a class="el" href="midas_8c_source.html#l02809">cm_set_watchdog_params()</a>, <a class="el" href="odb_8c_source.html#l01105">db_close_database()</a>, <a class="el" href="odb_8c_source.html#l01590">db_create_key()</a>, <a class="el" href="odb_8c_source.html#l08021">db_create_record()</a>, <a class="el" href="odb_8c_source.html#l01858">db_delete_key1()</a>, <a class="el" href="odb_8c_source.html#l03342">db_enum_key()</a>, <a class="el" href="odb_8c_source.html#l02065">db_find_key()</a>, <a class="el" href="odb_8c_source.html#l04196">db_get_data()</a>, <a class="el" href="odb_8c_source.html#l04547">db_get_data_index()</a>, <a class="el" href="odb_8c_source.html#l03681">db_get_key()</a>, <a class="el" href="odb_8c_source.html#l03884">db_get_key_info()</a>, <a class="el" href="odb_8c_source.html#l03826">db_get_key_time()</a>, <a class="el" href="odb_8c_source.html#l03762">db_get_link()</a>, <a class="el" href="odb_8c_source.html#l04322">db_get_link_data()</a>, <a class="el" href="odb_8c_source.html#l07516">db_get_record()</a>, <a class="el" href="odb_8c_source.html#l07430">db_get_record_size()</a>, <a class="el" href="odb_8c_source.html#l03190">db_get_value()</a>, <a class="el" href="odb_8c_source.html#l00788">db_open_database()</a>, <a class="el" href="odb_8c_source.html#l04670">db_set_data()</a>, <a class="el" href="odb_8c_source.html#l05033">db_set_data_index()</a>, <a class="el" href="odb_8c_source.html#l04796">db_set_link_data()</a>, <a class="el" href="odb_8c_source.html#l05172">db_set_link_data_index()</a>, <a class="el" href="odb_8c_source.html#l07619">db_set_record()</a>, and <a class="el" href="odb_8c_source.html#l03021">db_set_value()</a>.</p>

</div>
</div>
<a class="anchor" id="gae5f470f0c97794d8da1017f609276bc4"></a><!-- doxytag: member="odb.c::db_update_record" ref="gae5f470f0c97794d8da1017f609276bc4" args="(INT hDB, INT hKey, int s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> db_update_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>hDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vppg_8h.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If called locally, update a record (hDB/hKey) and copy its new contents to the local copy of it.</p>
<p>If called from a server, send a network notification to the client. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hDB</em>&nbsp;</td><td>ODB handle obtained via <a class="el" href="group__cmfunctionc.html#ga16b33b70783a3f5ba98b4094149d12b7">cm_get_experiment_database()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hKey</em>&nbsp;</td><td>Handle for key where search starts, zero for root. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>optional server socket </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DB_SUCCESS, DB_INVALID_HANDLE </dd></dl>

<p>Definition at line <a class="el" href="odb_8c_source.html#l08696">8696</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga060d9c5ccec906f52a34dc39de6e2069"></a><!-- doxytag: member="odb.c::equal_ustring" ref="ga060d9c5ccec906f52a34dc39de6e2069" args="(const char *str1, const char *str2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a> equal_ustring </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>str1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>str2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="odb_8c_source.html#l01560">1560</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="alarm_8c_source.html#l00527">al_check()</a>, <a class="el" href="midas_8c_source.html#l04595">bm_open_buffer()</a>, <a class="el" href="midas_8c_source.html#l02431">cm_connect_client()</a>, <a class="el" href="midas_8c_source.html#l02074">cm_connect_experiment1()</a>, <a class="el" href="midas_8c_source.html#l05290">cm_exist()</a>, <a class="el" href="midas_8c_source.html#l02942">cm_get_watchdog_info()</a>, <a class="el" href="midas_8c_source.html#l02278">cm_list_experiments()</a>, <a class="el" href="midas_8c_source.html#l01702">cm_set_client_info()</a>, <a class="el" href="midas_8c_source.html#l05176">cm_shutdown()</a>, <a class="el" href="odb_8c_source.html#l08190">db_check_record()</a>, <a class="el" href="odb_8c_source.html#l01590">db_create_key()</a>, <a class="el" href="odb_8c_source.html#l02065">db_find_key()</a>, <a class="el" href="odb_8c_source.html#l00788">db_open_database()</a>, <a class="el" href="odb_8c_source.html#l05927">db_paste()</a>, <a class="el" href="odb_8c_source.html#l06204">db_paste_node()</a>, <a class="el" href="hv_8c_source.html#l00463">hv_init()</a>, <a class="el" href="mfe_8c_source.html#l00765">initialize_equipment()</a>, <a class="el" href="mfe_8c_source.html#l01599">logger_root()</a>, <a class="el" href="mevb_8c_source.html#l00114">register_equipment()</a>, and <a class="el" href="mfe_8c_source.html#l00975">set_equipment_status()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1b194f05d4aee641e206b4636c9a3318"></a><!-- doxytag: member="odb.c::extract_key" ref="ga1b194f05d4aee641e206b4636c9a3318" args="(const char *key_list, char *key_name, int key_name_length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* extract_key </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>key_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>key_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>key_name_length</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="odb_8c_source.html#l01546">1546</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

<p>Referenced by <a class="el" href="odb_8c_source.html#l01590">db_create_key()</a>, and <a class="el" href="odb_8c_source.html#l02065">db_find_key()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5dbe3c70388c7d2a347375ce7809e0d8"></a><!-- doxytag: member="odb.c::xml_encode" ref="ga5dbe3c70388c7d2a347375ce7809e0d8" args="(char *src, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xml_encode </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="odb_8c_source.html#l06603">6603</a> of file <a class="el" href="odb_8c_source.html">odb.c</a>.</p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<br>
<hr WIDTH="100%">
Midas DOC Version 2.3.0&nbsp;----&nbsp;PSI Stefan Ritt&nbsp;----
<br>
Contributions: Pierre-Andre Amaudruz - Sergio Ballestrero - Suzannah Daviel -
<a href=http://www.stack.nl/~dimitri/doxygen/features.html>Doxygen</a> - Peter Green -
Qing Gu - Greg Hackman - Gertjan Hofman - Paul Knowles - Exaos Lee - Rudi Meier - Glenn
Moloney - Dave Morris - John M O'Donnell - Konstantin Olchanski - Chris Pearson - Renee Poutissou
- Tamsen Schurman - Andreas Suter - Jan M.Wouters - Piotr Adam Zolnierczuk
<hr WIDTH="100%">

