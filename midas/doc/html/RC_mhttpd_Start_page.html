<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Midas: Start page</title>
<link href="midox.css" rel="stylesheet" type="text/css">
<!--
<link href="doxygen.css" rel="stylesheet" type="text/css">
-->
<link href="tabs.css" rel="stylesheet" type="text/css">

<script type="text/javascript"  src="navigation.js">
</script>

</head>

<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Midas Documentation</a>&nbsp;&raquo&nbsp;<a class="el" href="RunControl.html">SECTION 5: Run Control</a>&nbsp;&raquo&nbsp;<a class="el" href="RC_run_control.html">Run Control Programs</a>&nbsp;&raquo&nbsp;<a class="el" href="RC_mhttpd.html">mhttpd: the MIDAS Web-based Run Control utility</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="RC_mhttpd_Start_page">Start page </a></h1><p><a class="anchor" id="idx_mhttpd_page_start"></a> <br/>
</p>
 
<script type="text/javascript">
pages( "RC_mhttpd_defining_script_buttons",  "RunControl","RC_mhttpd_ODB_page", "RC_mhttpd_Start_page",   "end" ); // back index next {top bottom}
sections("Features", "RunControl","FrontendOperation"); // last section; top of this section; next section
</script>
<p><br/>
</p>
<p>To start a run, the <b>Start</b> button (<a class="el" href="RC_mhttpd_status_page_features.html#RC_mhttpd_status_menu_buttons">if present</a>) is pressed, and the user will be prompted for any defined experiment-specific <a class="el" href="structparameters.html">parameters</a> (i.e. <a class="el" href="RC_customize_ODB.html#RC_Edit_On_Start">Edit on start</a> <a class="el" href="structparameters.html">parameters</a>) before starting the run. The minimum set of <a class="el" href="structparameters.html">parameters</a> is the <b> run number </b>, it will be incremented by one relative to the last value from the status page. The user may edit the run number except <a class="el" href="RC_mhttpd_Start_page.html#RC_Prevent_Edit_RN">where noted</a> before continuing.</p>
<p><br/>
<br/>
<br/>
 </p>
<center> <span class="image"> Start run request page. In this case the user defined no run <a class="el" href="structparameters.html">parameters</a>.</span> <br/>
<br/>
<br/>
 </p>
<div align="center">
<img src="eos_rn.png" alt="eos_rn.png"/>
</div>
 </center><p> <br/>
<br/>
<br/>
</p>
<p>Once the <b>Start</b> <b>button</b> is pressed on the Start request page, the system will attempt to start the run.</p>
<p><span class="new"> Since <a class="el" href="NDF.html#ndf_jun_2009">Jun 2009</a> , the mhttpd function for starting and stopping runs now spawns an external helper program to handle the transition sequencing. This helps with the old problem of looking at a blank screen for a long time if some frontends take a long time to process run transitions. mhttpd now returns immediately with a message <b>Run start/stop requested</b> until it detects that the helper program is started and sets a message <b>runinfo/transition in progress</b> (until/unless the run state has changed). Some aspects of this feature are present since rev 4473. </span></p>
<p><br/>
<hr/>
<br/>
</p>
<h2><a class="anchor" id="RC_mhttpd_Edit_On_Start">
Run Start with defined /Experiment/Edit on Start tree</a></h2>
<p>If the user has defined <a class="el" href="RC_customize_ODB.html#RC_Edit_On_Start">Edit on Start parameters</a>, when a run is started <span class="note">all the <a class="el" href="structparameters.html">parameters</a> in the ODB tree <b> /Experiment/Edit on Start </b> will be displayed </span> for possible modification.</p>
<ul>
<li>Pressing the <b>Ok</b> button will proceed to start of the run.</li>
<li>Pressing the <b>Cancel</b> button will abort the start procedure, and return to the status page.</li>
</ul>
<p><br/>
<br/>
<br/>
 </p>
<center> <span class="image">Start run request page. In this case the user has multiple <a class="el" href="RC_customize_ODB.html#RC_Edit_On_Start">Edit-on-start parameters</a> defined.</span> <br/>
<br/>
<br/>
 </p>
<div align="center">
<img src="mhstart.gif" alt="mhstart.gif"/>
</div>
 </center><p> <br/>
<br/>
<br/>
</p>
<p>The title of each field is the ODB key name itself. If the keyname is not self-explanatory, more explanation can be supplied by creating <a class="el" href="RC_mhttpd_Start_page.html#RC_Edit_PC">Edit-on-start Parameter Comments</a> .</p>
<p><br/>
<hr/>
<br/>
</p>
<h3><a class="anchor" id="RC_EOS_web_features">
Features available for mhttpd only</a></h3>
<p>Several extra <b>Edit on start</b> features are available when using mhttpd to start the run, which are ignored by odbedit. These are described below:</p>
<ul>
<li><a class="el" href="RC_mhttpd_Start_page.html#RC_Edit_PC">Edit-on-start Parameter Comments</a></li>
<li><a class="el" href="RC_mhttpd_status_page_features.html#RC_Edit_RP">Comment and Run Description</a></li>
<li><a class="el" href="RC_mhttpd_Start_page.html#RC_Prevent_Edit_RN">Prevent the run number being edited at Run Start</a></li>
</ul>
<p><br/>
<hr/>
<br/>
</p>
<h3><a class="anchor" id="RC_Edit_PC">
Edit-on-start Parameter Comments</a></h3>
<p>An optional subdirectory <b>Parameter Comments</b> can be created under <a class="el" href="RC_customize_ODB.html#RC_ODB_Experiment_Tree">The ODB /Experiment tree</a> to display some extra text on the Start page under an <b>Edit on start</b> parameter. Usually the parameter names are self-explanatory, but the parameter name may not contain enough information. In this case, a <b>parameter comment</b> can be created by the user.</p>
<p>This "parameter comment" option is visible <b>ONLY</b> under the MIDAS web page (<b>mhttpd</b> ), the <b> odbedit start </b> command will not display this extra information.</p>
<p>The name of the parameter in the <b>Parameter Comments</b> subdirectory must match that of the <b>Edit on Start</b> parameter. Comments may contain html tags if desired. <br/>
 </p>
<dl class="note"><dt><b>Note:</b></dt><dd>If the parameter in Edit-on-start is a link which is named differently from the actual parameter, then the parameter name in <b>Parameter Comments</b> must match the name of the actual parameter, rather than the link-name.</dd></dl>
<p>This is illustrated below where the <b>Edit on Start</b> parameter is a link named <b>"number of channels"</b>, which links to the actual parameter <b> /sis/nchannels </b>. </p>
<div class="fragment"><pre class="fragment">number of channels              LINK    1     15    22m  0   RWD  /sis/nchannels
</pre></div><p> The parameter name in <b>Parameter Comments </b> for this parameter is nchannels STRING 1 64 14m 0 RWD <em>maximum 1024</em> and NOT "number of channels".</p>
<div class="fragment"><pre class="fragment">[local:midas:S]/Experiment&gt;ls -lr
Key name                        Type   #Val  Size  Last Opn Mode Value
---------------------------------------------------------------------------
Experiment                      DIR
    Name                        STRING  1     32    17s  0   RWD  midas
    Edit on Start               DIR
        Write data              <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     16m  0   RWD  y
        enable                  <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     16m  0   RWD  n
        nchannels               <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     16m  0   RWD  0
        dwelling time (ns)      <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     16m  0   RWD  0


    Parameter Comments          DIR
        Write Data              STRING  1     64    44m  0   RWD  Enable logging
        enable                  STRING  1     64    7m   0   RWD  Scaler for expt B1 only
        nchannels               STRING  1     64    14m  0   RWD  &lt;i&gt;maximum 1024&lt;/i&gt;
        dwelling time (ns)      STRING  1     64    8m   0   RWD  &lt;b&gt;Check hardware now&lt;/b&gt;

[local:midas:S]Edit on Start&gt;ls -l

Key name                        Type   <span class="preprocessor">#Val  Size  Last Opn Mode Value</span>
<span class="preprocessor"></span>---------------------------------------------------------------------------
Write Data                      LINK    1     19    50m  0   RWD  /logger/Write data
enable                          LINK    1     12    22m  0   RWD  /sis/enable
number of channels              LINK    1     15    22m  0   RWD  /sis/nchannels
dwelling time (ns)              LINK    1     24    12m  0   RWD  /sis/dwelling time (ns)
</pre></div><p>This results in a start run page as shown below.</p>
<p><a class="anchor" id="RC_param_comment_example"></a></p>
<p><br/>
<br/>
<br/>
 </p>
<center> <span class="image"> Start run request page. Extra comment on the run condition is displayed below each entry. <br/>
<br/>
<br/>
 </p>
<div align="center">
<img src="mhstart2.gif" alt="mhstart2.gif"/>
</div>
<p> </span></center><p> <br/>
<br/>
<br/>
</p>
<hr/>
<br/>
</p>
<h3><a class="anchor" id="RC_Prevent_Edit_RN">
Prevent the run number being edited at Run Start</a></h3>
<p><a class="anchor" id="RC_Edit_RN"></a></p>
<p>By default, the user has the option to edit the run number at begin of run. To prevent this, the user may add an optional key <b>Edit run number</b> to the <span class="odb">Edit on Start</span> subdirectory in the <a class="el" href="RC_customize_ODB.html#RC_ODB_Experiment_Tree">The ODB /Experiment tree</a>. If this key is set to "N", the user will not be able to edit the run number on the mhttpd start page at the begin of run.</p>
<p>This feature is required where the run number is strictly controlled with a custom run number checking system that assigns the run number automatically based on the type of run.</p>
<p>By creating the key <span class="odb">/Experiment/Edit on Start/Edit run number</span> as a boolean variable, the ability of editing the run number is enabled or disabled, e.g. </p>
<div class="fragment"><pre class="fragment">[local:Default:S]Edit on start&gt;create <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a> <span class="stringliteral">&quot;Edit run number&quot;</span>
</pre></div><p>By default, if this key is NOT present the run number IS editable.</p>
<p><br/>
 </p>
<center> <span class="image">Start run request page showing the run number write-protected. <a class="el" href="RC_mhttpd_Start_page.html#RC_Edit_PC">Edit-on-start Parameter Comments</a> are also defined. <br/>
<br/>
<br/>
 </p>
<div align="center">
<img src="bnmr_start_fixedrn.gif" alt="bnmr_start_fixedrn.gif"/>
</div>
<p> </span></center><p> <br/>
<br/>
<br/>
 <br/>
</p>
<dl class="note"><dt><b>Note:</b></dt><dd>This feature is ignored by <span class="utility">odbedit</span>; regardless of whether the key <span class="odb">Edit run number</span> is present, the run number may be edited when starting a run using <span class="utility">odbedit</span>.</dd></dl>
<p><br/>
<br/>
<br/>
</p>
 
<script type="text/javascript">
pages("RC_mhttpd_defining_script_buttons", "RunControl","RC_mhttpd_ODB_page","RC_mhttpd_Start_page","" ); // back index next {top bottom}
sections("Features", "RunControl","FrontendOperation"); // last section; top of this section; next section
</script>
<p><br/>
</p>
<p><a class="anchor" id="end"></a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<br>
<hr WIDTH="100%">
Midas DOC Version 2.3.0&nbsp;----&nbsp;PSI Stefan Ritt&nbsp;----
<br>
Contributions: Pierre-Andre Amaudruz - Sergio Ballestrero - Suzannah Daviel -
<a href=http://www.stack.nl/~dimitri/doxygen/features.html>Doxygen</a> - Peter Green -
Qing Gu - Greg Hackman - Gertjan Hofman - Paul Knowles - Exaos Lee - Rudi Meier - Glenn
Moloney - Dave Morris - John M O'Donnell - Konstantin Olchanski - Chris Pearson - Renee Poutissou
- Tamsen Schurman - Andreas Suter - Jan M.Wouters - Piotr Adam Zolnierczuk
<hr WIDTH="100%">

