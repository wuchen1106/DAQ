<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Midas: Logging in MIDAS</title>
<link href="midox.css" rel="stylesheet" type="text/css">
<!--
<link href="doxygen.css" rel="stylesheet" type="text/css">
-->
<link href="tabs.css" rel="stylesheet" type="text/css">

<script type="text/javascript"  src="navigation.js">
</script>

</head>

<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Midas Documentation</a>&nbsp;&raquo&nbsp;<a class="el" href="Features.html">SECTION 4: Features</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="F_Logging">Logging in MIDAS </a></h1><p><a class="anchor" id="idx_Logging"></a>  
<script type="text/javascript">
pages( "F_Midas_Code_and_Libraries",  "Features", "F_Logging_Data", "F_Logging","end"); // back index next {top bottom}
// sections params:   last section; top of this section; next section
sections("Quickstart", "Features", "RunControl");
</script>
<p><br/>
 </p>
<h2><a class="anchor" id="F_Midas_Logger">
Introduction</a></h2>
<p>A MIDAS utility <a class="el" href="F_Logging.html#F_mlogger_utility">mlogger - MIDAS Logger</a> is supplied in the MIDAS package. This utility can perform several functions (selected by the user via the <a class="el" href="F_Logging_Data.html#F_Logger_tree">/Logger ODB tree</a> ) including:</p>
<ul>
<li>
logging <b>System messages</b> to a <a class="el" href="F_Logging_Data.html#F_Logger_Message_File">Message file</a> or as <a class="el" href="F_Logging_Data.html#F_Logger_CS_Log_Messages">message events</a> </li>
<li>
logging <b>Experimental data </b> to storage device(s) such as disk or tape <ul>
<li>
<a class="el" href="F_Logging_Data.html#F_Logger_multiple_logging_channels">Multiple Logging Channels</a> can be defined </li>
<li>
several different <a class="el" href="F_Logging_Data.html#F_Logger_CS_Filename">storage devices, formats and compression levels</a> can be selected </li>
<li>
data can be logged to different <a class="el" href="F_Logging_Data.html#F_Logger_CS_Subdir_Format">subdirectories</a> on disk </li>
<li>
data can be logged to a remote computer, using the <a class="el" href="F_Logging_Data.html#F_Logger_CS_Filename">FTP mode</a> </li>
<li>
events can be selected for logging by <a class="el" href="F_Logging_Data.html#F_Logger_CS_Event_ID">Event ID</a> or <a class="el" href="F_Logging_Data.html#F_Logger_CS_Trigger_Mask">Trigger mask</a> </li>
<li>
<a class="el" href="F_Logging_Data.html#F_Logger_Event_Filtering">Event Filtering</a> can be implemented </li>
<li>
runs can be automatically stopped and <a class="el" href="F_Logging_Data.html#F_Logger_Auto_Restart">restarted</a> after a certain <a class="el" href="FE_ODB_equipment_tree.html#FE_ODB_equipment_common">number of events</a>, or a <a class="el" href="F_Logging_Data.html#F_Logger_Run_Duration">certain time</a> </li>
<li>
the complete ODB contents can be saved <ul>
<li>
<a class="el" href="F_Logging_Data.html#F_Logger_ODB_Dump">into a file</a> at the beginning and/or end of run </li>
<li>
and/or into the <a class="el" href="F_Logging_Data.html#F_Logger_CS_ODB_Dump">data stream</a> </li>
</ul>
</li>
</ul>
</li>
<li>
logging information to a <a class="el" href="F_mySQL.html#F_Logger_mySQL">mySQL</a> database </li>
<li>
writing information to an <a class="el" href="F_Elog.html">electronic logbook</a> </li>
<li>
collecting and logging <a class="el" href="F_History_logging.html">history events</a> </li>
</ul>
<p><span style="color: green; font-size: 100%;"> When the MIDAS logger (<a class="el" href="F_Logging.html#F_mlogger_utility">mlogger</a>) is started for the first time, it creates the <a class="el" href="F_Logging_Data.html#F_Logger_tree">/Logger ODB tree</a> (including a single logger channel - channel 0), and fills it with default settings. </span> The <span class="odb">/Logger</span> tree contains all the relevant information for <span class="utility">mlogger</span> to run properly. The user has no code to write in order for the system to operate correctly. However, the user will want to <a class="el" href="F_Logging_Data.html">customize the logger</a> for his/her own experiment, by setting the keys in the <span class="odb">/Logger</span> tree to suitable values.</p>
<p><br/>
 In addition to the <span class="odb">/Logger</span> tree, <span class="utility">mlogger</span> also creates the <span class="odb">/History</span> and <span class="odb">/Elog</span> ODB trees, used in the optional <a class="el" href="F_History_logging.html">History</a> and <a class="el" href="F_Elog.html">Electronic Logbook</a> features. If MIDAS is compiled with mySQL support, a <span class="odb">mySQL</span> subtree will also be created in the <b>/Logger</b> tree (see <a class="el" href="F_mySQL.html">Logging information to a mySQL database</a>). All these features are described in the following pages.</p>
<p><span style="color: green; font-size: 100%;"> The data channels as well as the history logging are rescanned automatically at each <a class="el" href="RC_Run_States_and_Transitions.html">start</a> transition. </span> In other words, <a class="el" href="F_Logging_Data.html#F_Logger_Channels">additional logging channels</a> can be defined while running, but the effect will take place only at the following start transition. <br/>
 <a class="anchor" id="idx_FTP_channel_mlogger"></a> The <a class="el" href="F_Logging.html#F_mlogger_utility">mlogger utility</a> runs on the backend computer, receiving events from the <a class="el" href="F_MainElements.html#F_Buffer_Manager_overview">buffer manager</a>. It supports three type of storage devices so far, i.e.</p>
<ul>
<li><em>Disk</em>,</li>
<li><em>Tape</em> </li>
<li><em>FTP</em> channel to a remote computer.</li>
</ul>
<p>Data can currently be written in five different <a class="el" href="F_Logging_Data.html#F_Logger_CS_Format">formats</a> :</p>
<ul>
<li>MIDAS binary,</li>
<li>ASCII,</li>
<li>ROOT</li>
<li>DUMP</li>
</ul>
<p>The user may of course write their own custom data logger to save the data in any format they choose. <br/>
 <br/>
<hr/>
<br/>
 <a class="anchor" id="idx_Logging_utility-see-mlogger"></a> <a class="anchor" id="idx_mlogger-utility"></a></p>
<h2><a class="anchor" id="F_mlogger_utility">
mlogger     - MIDAS Logger</a></h2>
<p>The MIDAS Logger, <span class="utility">mlogger</span>, is the main application that collects data from one or more frontends under certain conditions and stores them onto a physical device such as <em>disk</em> or <em>tape</em>. It also acts as a <b> history event </b> collector and can also store data in a <b>mySQL</b> database. <br/>
 The features and customization of the logger utility are fully described in the section <a class="el" href="F_Logging.html">Logging in MIDAS</a> .</p>
<ul>
<li><b> Arguments </b><ul>
<li>[-h ] : help</li>
<li>[-e exptname ] : experiment name (see <a class="el" href="RC_odbedit_utility.html">odbedit - ODB Editor and run control utility</a>)</li>
<li>[-D ] : start program as a daemon (UNIX only).</li>
<li>[-s] : Save mode (debugging: protect ODB).</li>
<li>[-v] : Verbose (not to be used in conjunction with -D).</li>
</ul>
</li>
</ul>
<ul>
<li><b> Usage </b> <div class="fragment"><pre class="fragment"> &gt;mlogger -D 
</pre></div></li>
</ul>
<p><b> Notes </b> </p>
<ul>
<li>
The <span class="utility">mlogger</span> application requires an existing <a class="el" href="FE_ODB_equipment_tree.html">/Equipment tree</a> in the ODB </li>
<li>
Once the <span class="utility">mlogger</span> is running, you should be able to monitor its state with <a class="el" href="RC_Monitor.html#RC_mstat_utility">mstat</a> or with <a class="el" href="RC_mhttpd_utility.html">mhttpd</a> . </li>
</ul>
<p><br/>
</p>
<p><br/>
<hr/>
<br/>
</p>
<ul>
<li><a class="el" href="F_Logging_Data.html">Customizing the MIDAS data logging</a></li>
<li><a class="el" href="F_Messaging.html">Messaging</a></li>
<li><a class="el" href="F_mySQL.html">Logging information to a mySQL database</a></li>
<li><a class="el" href="F_History_logging.html">History Logging</a><ul>
<li><a class="el" href="F_History_logging.html#F_History_sql_internal">MIDAS SQL History system</a> <span class="new">New (since <a class="el" href="NDF.html#ndf_jan_2009">Jan 2009</a> )</span></li>
</ul>
</li>
<li><a class="el" href="F_Elog.html">Electronic logbook (Elog)</a></li>
<li><a class="el" href="F_LogUtil.html">Logging Utilities</a> <br/>
<br/>
</li>
</ul>
 
<script type="text/javascript">
pages( "F_Midas_Code_and_Libraries",  "Features", "F_Logging_Data", "F_Logging"); // back index next {top bottom}
// sections params:   last section; top of this section; next section
sections("Quickstart", "Features", "RunControl");
</script>
<p><br/>
<br/>
</p>
<p><a class="anchor" id="end"></a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<br>
<hr WIDTH="100%">
Midas DOC Version 2.3.0&nbsp;----&nbsp;PSI Stefan Ritt&nbsp;----
<br>
Contributions: Pierre-Andre Amaudruz - Sergio Ballestrero - Suzannah Daviel -
<a href=http://www.stack.nl/~dimitri/doxygen/features.html>Doxygen</a> - Peter Green -
Qing Gu - Greg Hackman - Gertjan Hofman - Paul Knowles - Exaos Lee - Rudi Meier - Glenn
Moloney - Dave Morris - John M O'Donnell - Konstantin Olchanski - Chris Pearson - Renee Poutissou
- Tamsen Schurman - Andreas Suter - Jan M.Wouters - Piotr Adam Zolnierczuk
<hr WIDTH="100%">

