<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Midas: The mhttpd daemon</title>
<link href="midox.css" rel="stylesheet" type="text/css">
<!--
<link href="doxygen.css" rel="stylesheet" type="text/css">
-->
<link href="tabs.css" rel="stylesheet" type="text/css">

<script type="text/javascript"  src="navigation.js">
</script>

</head>

<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Midas Documentation</a>&nbsp;&raquo&nbsp;<a class="el" href="RunControl.html">SECTION 5: Run Control</a>&nbsp;&raquo&nbsp;<a class="el" href="RC_run_control.html">Run Control Programs</a>&nbsp;&raquo&nbsp;<a class="el" href="RC_mhttpd.html">mhttpd: the MIDAS Web-based Run Control utility</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="RC_mhttpd_utility">The mhttpd daemon </a></h1><p><a class="anchor" id="idx_mhttpd-utility"></a></p>
<p><br/>
  
<script type="text/javascript">
pages( "RC_mhttpd",  "RunControl", "RC_mhttpd", "RC_mhttpd_utility",  "end" ); // back index next {top bottom}
sections("Features", "RunControl","FrontendOperation"); // last section; top of this section; next section
</script>
<h2><a class="anchor" id="RC_mhttpd_Usage">
Start the mhttpd daemon</a></h2>
<p>The <span class="utility">mhttpd</span> utility requires the TCP/IP port number as an argument in order to listen to the web-based request.</p>
<ul>
<li><b> Arguments </b></li>
</ul>
<ul>
<li>[-h] : connect to midas server (mserver) on given host</li>
<li>[-e] : experiment to connect to</li>
<li>[-p port ] : port number e.g. 8081 (no default)</li>
<li>[-v] : display verbose HTTP communication</li>
<li>[-D] : starts program as a <b>daemon</b> </li>
<li>[-E] : only display ELog system</li>
<li>[-H] : only display history plots</li>
<li>[-a] : only allow access for specific host(s). Several [-a Hostname] statements might be given</li>
<li>[-help] : display usage information</li>
</ul>
<ul>
<li><b> Usage </b> <br/>
 mhttpd [-h Hostname] [-e Experiment] [-p port] [-v] [-D] [-c] [-a Hostname] <br/>
e.g. <br/>
 <b>mhttpd -p 8081 -D </b></li>
</ul>
<dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>Several copies of <span class="utility">mhttpd</span> can run on a single host, as long as they are <b>started on different ports</b>.</li>
<li>If <b>more than one experiment</b> runs on the same host, a server for each experiment must be started on a <b>different</b> port, e.g.<ul>
<li>mhttpd -e midas -p 8081 -D</li>
<li>mhttpd -e midgas -p 8082 -D</li>
</ul>
</li>
</ul>
</dd></dl>
<p><br/>
<hr/>
<br/>
</p>
<p><a class="anchor" id="idx_mhttpd-utility_connect"></a> </p>
<h3><a class="anchor" id="RC_mhttpd_connect">
Connect to the mhttpd webserver</a></h3>
<p>To connect to a <span class="utility">mhttpd</span> webserver running on port <em>&lt;nnnn&gt;</em> on host <em>&lt;hostname&gt;</em> and experiment <em>&lt;exptname&gt;</em>, <b>enter the URL in your web browser location box</b> in the form</p>
<div class="fragment"><pre class="fragment"> http:<span class="comment">//&lt;hostname&gt;:&lt;nnnn&gt;/?exp=&lt;exptname&gt;</span>
</pre></div><p> e.g. </p>
<div class="fragment"><pre class="fragment"> http:<span class="comment">//midtis09:8081/?exp=midas</span>
</pre></div><p> <br/>
</p>
<p><a class="anchor" id="RC_mhttpd_msp_default"></a></p>
<p>Once the <a class="el" href="RC_mhttpd_utility.html#RC_mhttpd_connect">connection</a> to a given experiment is established, the <b>Main Status Page</b> of the MIDAS webserver is displayed in the web browser window. <br/>
 An error page will appear instead if the <a class="el" href="RC_mhttpd_utility.html">mhttpd daemon</a> has NOT been started on the specified port (or has not been started at all). <br/>
</p>
<p><a class="anchor" id="RC_mhttpd_minimal_status_page"></a> </p>
<center> <span class="image">mhttpd main status page (no clients are running) <br/>
<br/>
<br/>
 </p>
<div align="center">
<img src="status_nothing.png" alt="status_nothing.png"/>
</div>
<p> </span> </center><p> <br/>
</p>
<p>Once clients are started (e.g. frontend, logger etc.) the main status page will look more like <a class="el" href="RC_mhttpd_Main_Status_page.html#RC_mhttpd_msp_customized">this</a>.</p>
<p>the image above shows a pre- <a class="el" href="NDF.html#ndf_dec_2009">Dec 2009</a> version of mhttpd (see <a class="el" href="RC_mhttpd_status_page_redesign.html">Redesign of mhttpd Main Status Page</a>).</p>
<p><br/>
 <hr/>
 <br/>
</p>
<p><a class="anchor" id="idx_mhttpd_proxy-access"></a> <a class="anchor" id="idx_access-control_mhttpd-proxy"></a> <a class="anchor" id="idx_Apache"></a> </p>
<h2><a class="anchor" id="RC_mhttpd_proxy">
Proxy Access to mhttpd</a></h2>
<p>A major change was made to <span class="utility">mhttpd</span> in <a class="el" href="NDF.html#ndf_feb_2008">Feb 2008</a> , changing all internal URLs to relative paths. This allows <b>proxy access</b> to <span class="utility">mhttpd</span> via an <a href="http://apache.org/">Apache</a> server for example, which might be needed to securely access an experiment from outside the lab through a firewall. Apache can also be configured to allow a secure SSL connection to the proxy.</p>
<p>In order to add SSL encryption to <span class="utility">mhttpd</span>, the following settings can be placed into an <b>Apache configuration</b> : <br/>
 Assuming</p>
<ul>
<li>the experiment runs on machine <em>online1.your.domain</em>, and</li>
<li>apache is running on a publically available machine <em>www.your.domain</em> <br/>
</li>
</ul>
<div class="fragment"><pre class="fragment">Redirect permanent /online1 http:<span class="comment">//www.your.domain/online1</span>
ProxyPass /online1/  http:<span class="comment">//online1.your.domain/</span>

&lt;Location <span class="stringliteral">&quot;/online1&quot;</span>&gt;
  AuthType Basic
  AuthName ...
  AuthUserFile ...
  Require user ...
&lt;/Location&gt;
</pre></div><p>If the URL </p>
<div class="fragment"><pre class="fragment">http:<span class="comment">//www.your.domain/online1</span>
</pre></div><p> is accessed, it will be redirected (after optional authentication) to </p>
<div class="fragment"><pre class="fragment">http:<span class="comment">//online1.your.domain/</span>
</pre></div><p> <br/>
 If you click on the <span class="utility">mhttpd</span> <a class="el" href="RC_mhttpd_History_page.html">History page</a> for example, <span class="utility">mhttpd</span> would normally redirect this to </p>
<div class="fragment"><pre class="fragment">http:<span class="comment">//online1.your.domain/HS/</span>
</pre></div><p> but this is not correct since you want to go through the proxy <em>www.your.domain</em>. The new relative redirection inside <span class="utility">mhttpd</span> now redirects the history page correctly to </p>
<div class="fragment"><pre class="fragment">http:<span class="comment">//www.your.domain/online1/HS/</span>
</pre></div><p><a class="anchor" id="end"></a> <br/>
  
<script type="text/javascript">
pages( "RC_mhttpd",  "RunControl", "RC_mhttpd", "RC_mhttpd_utility",  "" ); // back index next {top bottom}
sections("Features", "RunControl","FrontendOperation"); // last section; top of this section; next section
</script>
 </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<br>
<hr WIDTH="100%">
Midas DOC Version 2.3.0&nbsp;----&nbsp;PSI Stefan Ritt&nbsp;----
<br>
Contributions: Pierre-Andre Amaudruz - Sergio Ballestrero - Suzannah Daviel -
<a href=http://www.stack.nl/~dimitri/doxygen/features.html>Doxygen</a> - Peter Green -
Qing Gu - Greg Hackman - Gertjan Hofman - Paul Knowles - Exaos Lee - Rudi Meier - Glenn
Moloney - Dave Morris - John M O'Donnell - Konstantin Olchanski - Chris Pearson - Renee Poutissou
- Tamsen Schurman - Andreas Suter - Jan M.Wouters - Piotr Adam Zolnierczuk
<hr WIDTH="100%">

