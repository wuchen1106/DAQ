<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Midas: Customizing the MIDAS data logging</title>
<link href="midox.css" rel="stylesheet" type="text/css">
<!--
<link href="doxygen.css" rel="stylesheet" type="text/css">
-->
<link href="tabs.css" rel="stylesheet" type="text/css">

<script type="text/javascript"  src="navigation.js">
</script>

</head>

<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Midas Documentation</a>&nbsp;&raquo&nbsp;<a class="el" href="Features.html">SECTION 4: Features</a>&nbsp;&raquo&nbsp;<a class="el" href="F_Logging.html">Logging in MIDAS</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="F_Logging_Data">Customizing the MIDAS data logging </a></h1><p><a class="anchor" id="idx_Logging_Data"></a>  
<script type="text/javascript">
pages( "F_Logging",  "Features", "F_Messaging", "F_Logging_Data","end"); // back index next {top bottom}
// sections params:   last section; top of this section; next section
sections("Quickstart", "Features", "RunControl");
</script>
<p><br/>
</p>
<p>When <span class="utility">mlogger</span> is started for the first time, it will create default <span class="odb">/Logger</span> and <span class="odb">/History</span> trees. The following information will be displayed (providing <span class="utility">mlogger</span> has NOT been started as a daemon) : </p>
<div class="fragment"><pre class="fragment">$ mlogger
Log     directory is /home/midas/online/
Data    directory is same as Log unless specified in channels/
History directory is same as Log
ELog    directory is same as Log

MIDAS logger started. Stop with <span class="stringliteral">&quot;!&quot;</span>
</pre></div><p>Most of the keys in the <span class="odb">/Logger</span> ODB tree are used to customize logging of the data. There are also keys to customize the Messaging system. The <span class="odb">/Logger</span> tree also may contain optional keys relevent to storing the History and Elog files (i.e. the <a class="el" href="F_History_logging.html#F_Logger_History_Dir">History</a> and <a class="el" href="F_Elog.html#F_Logger_Elog_Dir">Elog</a> Keys). The optional subtree <span class="odb">/Logger/SQL</span> is described in the section <a class="el" href="F_mySQL.html">mySQL database</a>. The <a class="el" href="F_History_logging.html#F_ODB_History_tree">ODB /History tree</a> is described in the section <a class="el" href="F_History_logging.html">History Logging</a> . and the <a class="el" href="F_Elog.html#F_ODB_Elog_Tree">The ODB /Elog Tree</a> in the <a class="el" href="F_Elog.html">Elog</a> section.</p>
<p><a class="anchor" id="idx_ODB_tree_Logger"></a> </p>
<h2><a class="anchor" id="F_Logger_tree">
/Logger ODB tree</a></h2>
<p>The following example shows a /logger tree as created by <a class="el" href="F_Logging.html#F_mlogger_utility">mlogger</a>. See also <a class="el" href="F_Logging_Data.html#F_Logger_tree_keys">Explanation of the keys in the ODB /Logger tree</a> .</p>
<div class="fragment"><pre class="fragment">Key name                        Type    #Val  Size  Last Opn Mode Value
---------------------------------------------------------------------------
Logger                          DIR
    Data dir                    STRING  1     256   4h   0   RWD  /home/midas/online
    Message file                STRING  1     256   22h  0   RWD  midas.log
    Write data                  <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     2h   0   RWD  y
    ODB Dump                    <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     22h  0   RWD  n
    ODB Dump File               STRING  1     256   22h  0   RWD  run%05d.odb
    Auto restart                <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     22h  0   RWD  n
    Auto restart delay          <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     94h  0   RWD  0
    Tape message                <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     15h  0   RWD  y
    ODBC_Debug                  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
    ODBC_DSN                    STRING  1     256   &gt;99d 0   RWD
    Channels                    DIR
        0 
            Settings            DIR
                Active          <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     1h   0   RWD  y
                Type            STRING  1     8     1h   0   RWD  Disk
                Filename        STRING  1     256   1h   0   RWD  run%05d.mid
                Format          STRING  1     8     1h   0   RWD  MIDAS
                Compression     <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     94h  0   RWD  0
                ODB Dump        <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     1h   0   RWD  y
                Log messages    <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     1h   0   RWD  0
                Buffer          STRING  1     32    1h   0   RWD  SYSTEM
                Event ID        <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     1h   0   RWD  -1
                Trigger Mask    <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     1h   0   RWD  -1
                Event limit     <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     1h   0   RWD  0
                Byte limit      DOUBLE  1     8     1h   0   RWD  0
                Subrun Byte limiDOUBLE  1     8     &gt;99d 0   RWD  0
                Tape capacity   DOUBLE  1     8     1h   0   RWD  0
                Subdir format   STRING  1     32    7h   0   RWD
                Current filenameSTRING  1     256   7h   0   RWD
                  
            Statistics          DIR
                Events written  DOUBLE  1     8     1h   0   RWD  0
                Bytes written   DOUBLE  1     8     1h   0   RWD  0
                Bytes written toDOUBLE  1     8     1h   0   RWD  0
                Files written   <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     1h   0   RWD  0
</pre></div><p> <br/>
 <hr/>
 <br/>
 </p>
<h2><a class="anchor" id="F_Logger_tree_keys">
Explanation of the keys in the ODB /Logger tree</a></h2>
<p>An example of a default <span class="odb">/Logger</span> tree is shown <a class="el" href="F_Logging_Data.html#F_Logger_tree">above</a>. This table also includes the optional keys that the user may create. The following table is an index to the explanation of each key in the <span class="odb">/Logger</span> tree. <br/>
 </p>
<table style="text-align: left; width: 50%;" border="0" cellpadding="0" cellspacing="0">
<caption align="bottom">Above: The ODB /Logger tree. Click on a key for details. </caption>
<tr>
<td style="vertical-align: top;"><p><b>/Logger</b>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_Data_Dir">Data dir</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_Message_File">Message file</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_Auto_Restart">Auto restart</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_Auto_Restart_Delay">Auto restart delay</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_Run_Duration">Run Duration</a> (optional)  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_Write_Data">Write data</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_ODB_Dump">ODB Dump</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_ODB_Dump_File">OBD Dump File</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_Tape_Message">Tape Message</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_Channels">Channels</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_History_logging.html#F_Logger_History_Dir">History Dir</a> <a class="el" href="F_Logging_Data.html#F_Logger_Optional_Keys">(Optional)</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Elog.html#F_Logger_Elog_Dir">Elog Dir</a> <a class="el" href="F_Logging_Data.html#F_Logger_Optional_Keys">(Optional)</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_mySQL.html#F_Logger_mySQL">SQL</a> <a class="el" href="F_Logging_Data.html#F_Logger_Optional_Keys">(Optional)</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
<p></p>
</td></tr>
</table>
<p><br/>
 <hr/>
 <br/>
</p>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
<caption align="bottom">Above: meaning of keys in the /Logger ODB tree </caption>
<tr>
<td colspan="3" style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>Keys in the ODB tree <span class="odb">/Logger</span>   </p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>ODB Key  </p>
</td><td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>Type  </p>
</td><td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>Explanation  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="idx_midas_message-file_location"></a> <a class="anchor" id="F_Logger_Data_Dir"></a> Data dir  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Specifies in which directory files produced by <a class="el" href="F_Logging.html#F_mlogger_utility">mlogger</a> should be written. Once the Logger is running, <b>"Data Dir"</b> will be pointing to the location of</p>
<ul>
<li>the data file(s) (unless overruled by <a class="el" href="F_Logging_Data.html#F_Logger_CS_Filename">Filename</a>).</li>
<li>the message log file (unless overruled by <a class="el" href="F_Logging_Data.html#F_Logger_Message_File">Message file</a>) ,</li>
<li>the ODB dump files (unless overruled by <a class="el" href="F_Logging_Data.html#F_Logger_ODB_Dump_File">ODB Dump file</a> ),</li>
</ul>
<p>and the optional</p>
<ul>
<li>elog files (unless overruled by <a class="el" href="F_Elog.html#F_Logger_Elog_Dir">Elog Dir</a>)</li>
<li>history files (unless overruled by <a class="el" href="F_History_logging.html#F_Logger_History_Dir">History Dir</a>). <a class="anchor" id="F_Logger_Dir_Separator"></a>  When <a class="el" href="F_Logging_Data.html#F_Logger_multiple_logging_channels">Multiple Logging Channels</a> are enabled,<ul>
<li>by default the data path for <b>all</b> the channels is set to the same location, given by <a class="el" href="F_Logging_Data.html#F_Logger_Data_Dir">Data Dir</a>.</li>
<li>If different directories have to be assigned to individual logging channels, the ODB key <a class="el" href="F_Logging_Data.html#F_Logger_CS_Filename">/Logger/channels/&lt;channel-number&gt;/Settings/Filename</a> can contain the full path of the location of the <b></b>.mid, .ybs, .asc file.</li>
<li>If this key contains the full directory path (i.e. contains the OS specific <b>DIR_SEPARATOR</b> (e.g. "/" for Linux or "\" for Windows), then the <b>global</b> <a class="el" href="F_Logging_Data.html#F_Logger_Data_Dir">Data Dir</a> will be <b>overwritten with the setting for that particular channel</b>. For example, if<ul>
<li>Key <a class="el" href="F_Logging_Data.html#F_Logger_CS_Filename">Filename</a> contains <em>"run%05.mid"</em>. <a class="el" href="F_Logging_Data.html#F_Logger_Data_Dir">Data Dir</a> will <b>not</b> be overwritten</li>
<li>Key <a class="el" href="F_Logging_Data.html#F_Logger_CS_Filename">Filename</a> contains <em>"/data1/ch1log/run%05.mid"</em>. <a class="el" href="F_Logging_Data.html#F_Logger_Data_Dir">Data Dir</a> <b>will</b> be overwritten   </li>
</ul>
</li>
</ul>
</li>
</ul>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="idx_midas_message-file_name"></a> <a class="anchor" id="F_Logger_Message_File"></a> Message file  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Specifies the <b>filename</b> of the <a class="el" href="F_Messaging.html#F_Log_File">message log</a>, which is a simple ASCII file containing all the messages from the MIDAS message system. The default filename is <b> "midas.log" </b>. This file can can be viewed at any time to see a record of what happened in an experiment, since each entry is time-stamped (see <a class="el" href="F_Messaging.html#F_Log_File">example</a>).  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_Auto_Restart"></a> Auto restart  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>When this flag is set to "y" (i.e. TRUE), a new run is automatically restarted when the previous run has been stopped by the logger due to an event or byte limit. Default value is "n". The run start can be prevented by the user manually e.g. from <a class="el" href="RC_odbedit_utility.html">odbedit</a>.  this key may be accessed from the mhttpd main status page <a class="el" href="RC_mhttpd_status_page_features.html#RC_mhttpd_status_Run_info">Run status information</a> as <b>"restart"</b>.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_Auto_Restart_Delay"></a> Auto restart delay  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>INT  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Providing <a class="el" href="F_Logging_Data.html#F_Logger_Auto_Restart">Auto restart</a> is set TRUE, the automatic start of the next run will be delayed by this number of milliseconds.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_Run_Duration"></a> Run duration  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>INT  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><span class="new">Optional value new since</span> <a class="el" href="NDF.html#ndf_sep_2009">Sep 2009</a> This key allows for runs with a certain duration. To use this option, the user creates and sets this variable to a non-zero <b>integer</b> value (in seconds). After a run has lasted for this duration, it will be stopped automatically by the logger. To automatically produce <b>sequences of runs all with the same duration</b>, also set the <a class="el" href="F_Logging_Data.html#F_Logger_Auto_Restart">Auto restart</a> flag to "y" .  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_Write_Data"></a> Write data  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Global flag which enables or disables data logging for all channels. Default value is "y" (data logging enabled). It can be set to "n" (FALSE) temporarily to make a short test run without data logging. The key <span class="odb">Write data</span> is a predefined logger key for enabling data logging.  The <a class="el" href="F_Logging_Data.html#F_Logger_CS_Active">Active</a> key (in the <a class="el" href="F_Logging_Data.html#F_Logger_Settings">/Logger/Channels/&lt;channel-number&gt;</a> tree) must <b>also</b> be set to "y" for the data from that channel to be logged.</p>
<p></p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_ODB_Dump"></a> ODB Dump <a class="anchor" id="idx_ODB_Dump_to-ascii-file"></a> <a class="anchor" id="idx_ODB_Dump_to-xml-file"></a>  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If this flag is set to "y", a dump of the complete ODB will be written to the file specified by <a class="el" href="F_Logging_Data.html#F_Logger_ODB_Dump_File">ODB Dump file</a> at the end of each run. Default value is "n". </p>
<ul>
<li>The ODB contents is <b>always</b> saved into a file "last.xml" at the beginning of each run regardless of the setting of this key.</li>
<li>The ODB contents can also be saved into the data stream as an event (see <a class="el" href="F_Logging_Data.html#F_Logger_CS_ODB_Dump">ODB Dump per logging channel</a>).  </li>
</ul>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_ODB_Dump_File"></a> ODB Dump File  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Specifies the filename in which the dump of the complete ODB will be written at the end of each run if the <a class="el" href="F_Logging_Data.html#F_Logger_ODB_Dump">ODB Dump</a> flag is set to "y". The default value is <em>"run%05d.odb"</em>. If this filename has the extension ".xml" or ".XML" the file will be written in XML format, otherwise in ASCII format. For a description of the format see <a class="el" href="group__odbfunctionc.html#ga9fcec4712c44e1ef199297aad9ea99c5">db_copy_xml()</a> or <a class="el" href="group__odbfunctionc.html#ga165f2428c082852ff2ac1e8c4c78d607">db_copy()</a> respectively. <br/>
 If this filename contains a "%", the "%" will be replaced by the current run number (cf. format string of printf() C function). The format specifier "%05d" from the example would be evaluated to a five digit run number with leading zeros e.g. run00002.odb. The ODB dump file can be used for off-line analysis to check run <a class="el" href="structparameters.html">parameters</a> etc. (see also <a class="el" href="F_Logging_Data.html#F_Logger_CS_ODB_Dump">ODB Dump per logging channel</a>).</p>
<ul>
<li><b>Note:</b> The location of the ODB dump files can also be specified in this field. If the <a class="el" href="F_Logging_Data.html#F_Logger_ODB_Dump_File">ODB Dump File</a> string contains a <a class="el" href="F_Logging_Data.html#F_Logger_Dir_Separator">DIR_SEPARATOR</a> as in the following example, it is considered as an absolute path. If no <b>DIR_SEPARATOR</b> is present, the dump file will be written to the location given by <a class="el" href="F_Logging_Data.html#F_Logger_Data_Dir">Data dir</a>.</li>
</ul>
<div class="fragment"><pre class="fragment">  [local:Default:S]/Logger&gt;ls
  Data dir                        /scr0/spring2009
  Message file                    midas.log 
  Auto restart                     n
  Write data                      y
  ODB Dump                        n
  ODB Dump File                   run%05d.odb
  Tape message                    y 
 Channels
  [local:Default:S]/Logger&gt;<span class="keyword">set</span> OD
  [local:Default:S]/Logger&gt;<span class="keyword">set</span> OD
  ODB Dump
  ODB Dump File
  [local:Default:S]/Logger&gt;<span class="keyword">set</span> <span class="stringliteral">&quot;ODB Dump File&quot;</span> <span class="stringliteral">&quot;/mypath/run%06d.odb&quot;</span>
  [local:Default:S]/Logger&gt;ls
  Data dir                        /scr0/spring2009
  Message file                    midas.log
  Auto restart                    n
  Write data                      y
  ODB Dump                        n
  ODB Dump File                   /scr0/dump/run%06d.odb
  Tape message                    y
 Channels
</pre></div>  <p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_Tape_Message"></a> Tape message  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If set to "y", MIDAS messages during mounting tapes and writing of EOF marks are generated. This can be useful for slow tapes to inform all users in a counting house about the tape status. Default value is "y".   </p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_ODBC_Debug"></a> ODBC_Debug  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>INT  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Optional key created if ODBC is installed (see <a class="el" href="BuildingOptions.html#BO_building_option">Building Options</a>). Used by the <a class="el" href="F_History_logging.html#F_History_sql_internal">MIDAS SQL History system</a> . Set to 1 to see all SQL commands. Default value is 0.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_ODBC_DSN"></a> ODBC_DSN  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Optional key created if ODBC is installed (see <a class="el" href="BuildingOptions.html#BO_building_option">Building Options</a>). Default value is blank. See <a class="el" href="F_History_logging.html#F_History_sql_internal">MIDAS SQL History system</a> for details.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_Channels"></a> Channels <a class="anchor" id="idx_Logging_Channels_multiple"></a>  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DIR  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>This is a subdirectory under the <a class="el" href="F_Logging_Data.html#F_Logger_tree">/Logger ODB tree</a> which contains settings for individual channels. By default, only channel "0" is created. See <a class="el" href="F_Logging_Data.html#F_Logger_multiple_logging_channels">Multiple Logging Channels</a> .  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>History dir  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>This optional key is used to reassign the location of history files. See <a class="el" href="F_History_logging.html#F_Logger_History_Files_Location">Location of History Files</a> .  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Elog dir  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>This optional key is used to reassign the location of elog files. See <a class="el" href="F_Elog.html#F_Logger_Elog_Files_Location">Location of Elog Files</a> .  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="el" href="F_mySQL.html#F_Logger_mySQL">SQL</a>  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DIR  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Optional directory for SQL. See <a class="el" href="F_mySQL.html#F_Logger_mySQL">mySQL</a> .   </p>
</td></tr>
</table>
<h2><a class="anchor" id="F_Logger_multiple_logging_channels">
Multiple Logging Channels</a></h2>
<p>By default, only <b>one</b> logging channel is created (Logging Channel 0). To create <b>multiple</b> logging channels, an existing Channel subtree can be copied, e.g. to create a second logging channel (Channel 1) using <a class="el" href="RC_odbedit_utility.html">odbedit</a> :</p>
<div class="fragment"><pre class="fragment">  [local]cd /Logger
  [loca]]Logger&gt;cd channels
  [local]Channels&gt;ls 
  0
  [local]Channels&gt;copy 0 1
  [local]Channels&gt;ls 
  0
  1
</pre></div><ul>
<li>If more than one logging channel is defined, there will be a <b>Settings tree for each channel</b> (0,1...). Thus the <a class="el" href="structparameters.html">parameters</a> for <b>each</b> logging channel can be set <b>individually</b>.</li>
<li>To send different events to different logging channels, they may be selected by <a class="el" href="F_Logging_Data.html#F_Logger_CS_Event_ID">Event ID</a> or <a class="el" href="F_Logging_Data.html#F_Logger_CS_Trigger_Mask">Trigger Mask</a>. See also <a class="el" href="F_Logging_Data.html#F_Logger_Event_Filtering">Event Filtering</a> .</li>
</ul>
<h2><a class="anchor" id="F_Logger_Settings">
Explanation of keys in the ODB /Logger/Channels tree</a></h2>
<p>The keys in the ODB <span class="odb">/Logger/Channels/&lt;channel-number&gt;/Settings </span> tree are shown below. By default, <em> &lt;channel-number&gt; </em> has the value 0 (for Logging Channel 0). <br/>
 If <a class="el" href="F_Logging_Data.html#F_Logger_multiple_logging_channels">Multiple Logging Channels</a> are defined, there will be a Settings tree for each defined Logging Channel. The tree <span class="odb">/Logger/Channels/0/Settings</span> is shown below.</p>
<p><br/>
</p>
<table style="text-align: left; width: 50%;" border="0" cellpadding="0" cellspacing="0">
<caption align="bottom">Above: The ODB /Logger/Channels/0/Settings tree. Click on a key for details. </caption>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_Channels">Channels</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_Settings">0</a>  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_Settings">Settings</a> </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Active">Active</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Type">Type</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Filename">Filename</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Format">Format</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Compression">Compression</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_ODB_Dump">ODB Dump</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Log_Messages">Log messages</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Buffer">Buffer</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_Event_Filtering">Event Filtering</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Event_ID">Event ID</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Trigger_Mask">Trigger mask</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Event_Limit">Event limit</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Byte_Limit">Byte limit</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Subrun_Byte_Limit">Subrun Byte limit</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Tape_Capacity">Tape capacity</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Subdir_Format">Subdir format</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CS_Current_Filename">Current Filename</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CStat_Statistics">Statistics</a> </p>
</td><td style="vertical-align: top;"><p><br/>
   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CStat_Events_Written">Events written</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CStat_Bytes_Written">Bytes written</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CStat_Bytes_Written_Uncompressed">Bytes written uncompressed</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CStat_Bytes_Written_Total">Bytes written total</a>   </p>
</td></tr>
<tr>
<td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><a class="el" href="F_Logging_Data.html#F_Logger_CStat_Files_Written">Files written</a>   </p>
</td></tr>
</table>
<p><br/>
 <hr/>
 <br/>
 <a class="anchor" id="F_logger_channels_settings"></a> <a class="anchor" id="idx_FTP_mlogger"></a> </p>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
<caption align="bottom">Above: meaning of keys in the /Logger/Channels/<em>&lt;channel-number&gt;</em>/Settings ODB tree </caption>
<tr>
<td colspan="3" style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>Keys in the ODB tree <span class="odb">/Logger/Channels/0/Settings</span>   </p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>ODB Key  </p>
</td><td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>Type  </p>
</td><td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>Explanation </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Active"></a> Active  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If set to "y" logging channel is <b>active</b>. Data is only logged for channels that are active. See also <a class="el" href="F_Logging_Data.html#F_Logger_Write_Data">Write Data</a> key. Set to "n" to disable data logging from this channel. Default value is "y".  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Type"></a> Type  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Specify the type of media on which the logging should take place. It can be <b>"Disk"</b>, <b>"Tape"</b> or <b>"FTP"</b> (see <a class="el" href="F_Logging_Data.html#F_Logger_CS_Filename">Filename</a>). Default value is "Disk".  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Filename"></a> Filename <a class="anchor" id="idx_FTP_server"></a>  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><ul>
<li>for <b> disk logging </b>, specifies the name of a file to contain the data. Default value is <em>"run%05d.mid"</em> where <em>"%05d"</em> is replaced by the current run number in the same way as described for the <a class="el" href="F_Logging_Data.html#F_Logger_ODB_Dump_File">ODB Dump file</a> key. This key may contain a directory string in addition to a filename, so that different logging channels may have their data logged into specific directories. If the key does NOT also contain a directory string, the directory given in the key <a class="el" href="F_Logging_Data.html#F_Logger_Data_Dir">Data dir</a> will be used. The filename must match the <a class="el" href="F_Logging_Data.html#F_Logger_CS_Format">Format</a> Key specified below.</li>
</ul>
<ul>
<li>for <b> tape logging </b>, the filename specifies a tape device i.e.<ul>
<li>/dev/nrmt0 or /dev/nst0 under UNIX or</li>
<li>\\.\tape0 under Windows NT.</li>
</ul>
</li>
<li>In <b> FTP mode </b>, the data is written directly to a remote computer via FTP. <b>"Filename"</b> specifies the access information for the FTP server. It has the following format:</li>
</ul>
<div class="fragment"><pre class="fragment">  &lt;host name&gt;, &lt;port number&gt;, &lt;user name&gt;, &lt;password&gt;, &lt;directory&gt;, &lt;file name&gt;
</pre></div><p> for example </p>
<div class="fragment"><pre class="fragment">  myhost.my.domain,21,john,password,/usr/users/data,run%05d.mid
</pre></div><p> The normal FTP port number is 21, or 1021 for a Unitree Archive like the one used at the Paul Scherrer Institute. By using the FTP mode, a back-end computer can write directly to the archive.</p>
<p></p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Format"></a> <a class="anchor" id="idx_Logging_Data_Format"></a> Format  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Specifies the format to be used for writing the data to the logging channel. It can take one of four values: <b>MIDAS, ROOT, ASCII and DUMP</b>. <br/>
</p>
<p>For <b>disk</b> <b>logging</b>, the extension for the <a class="el" href="F_Logging_Data.html#F_Logger_CS_Filename">Filename</a> Key above must match one of the following:</p>
<ul>
<li><b> .mid </b> for <b>MIDAS</b> (or <b>.mid.gz</b> - see <a class="el" href="F_Logging_Data.html#F_Logger_CS_Compression">Compression</a>)</li>
<li><b> .root </b> for <b>ROOT</b> </li>
<li><b> .asc </b> for <b>ASCII</b> </li>
<li><b> .txt </b> for <b>DUMP</b> </li>
</ul>
<p>For <b>ROOT</b> <b>format</b> the data logger will automatically convert the format specified in the frontend <a class="el" href="FE_table.html#FE_tbl_Format">equipment list</a> to ROOT format (see <a class="el" href="FE_table.html#FE_tbl_Format">format</a> for details). The <b> ASCII format </b> converts events into readable text format which can be easily analyzed by programs that have problems reading binary data. While the ASCII format tries to minimize the file size by printing one event per line, the <b>DUMP</b> <b>format</b> gives a very detailed ASCII representation of the event including bank information, serial numbers etc., so it should be used mainly for diagnostics. </p>
<p></p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Compression"></a> Compression <a class="anchor" id="idx_Logging_Data_Format_compression"></a>  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>INT  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If the Compression Level is set to 0, compression is turned off. If set &gt; 0, the data files are compressed before being written. In this case,</p>
<ul>
<li>the file extension ".gz" must be appended to the <a class="el" href="F_Logging_Data.html#F_Logger_CS_Filename">Filename</a> Key (see also <a class="el" href="F_Logging_Data.html#F_Logger_CS_Format">Format</a> Key)</li>
<li>and ZLIB support must be compiled into the MIDAS package (see <a class="el" href="BuildingOptions.html#BO_NEED_ZLIB">NEED_ZLIB</a> ).</li>
</ul>
<p>This feature applies only to files saved onto <b>disk</b> in MIDAS format. ROOT format is already compressed.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_ODB_Dump"></a> ODB Dump <a class="anchor" id="idx_ODB_Dump_to-logging-channel"></a>  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If this flag is set, a complete dump of the ODB is performed <b>to this logging channel</b> before and after every run. The ODB content is dumped in one long ASCII string reflecting the status at begin-of-run event and at end-of-run event. These special events have an ID of EVENTID_BOR and EVENTID_EOR and a serial number equal to the current run number, and are not visible using the <a class="el" href="RC_Monitor.html#RC_mdump_utility">mdump</a> utility. An analyzer in the off-line analysis stage can use these special events to restore the ODB to its online state.  The dump of the ODB into the event stream for this logger channel is independent of the <a class="el" href="F_Logging_Data.html#F_Logger_ODB_Dump">/Logger/ODB Dump</a> parameter, which is used to dump the ODB to an ASCII or XML file on disk.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Log_Messages"></a> Log messages  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DWORD  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>This is a bit-field for logging system messages as message events along with the event data from the experiment. <br/>
 If a bit in this field is set, the respective system message is written to the logging channel as a message event with an ID of EVENTID_MESSAGE (0x8002). The bits are 1 for error, 2 for info, 4 for debug, 8 for user, 16 for log, 32 for talk, 64 for call messages and 255 to log all messages. For an explanation of these messages refer to <a class="el" href="F_MainElements.html#F_Buffer_Manager_overview">Buffer Manager</a> , <a class="el" href="F_Logging_Data.html#F_Logger_CS_Event_ID">Event ID</a> and the <a class="el" href="F_Logging_Data.html#F_Logger_CS_Trigger_Mask">Trigger Mask</a>.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Buffer"></a> Buffer  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>This specifies the buffer where the logger will find the event. It is usually set to "SYSTEM" and is specified in the <a class="el" href="FE_table.html#FE_tbl_Buffer">equipment list</a> for this event.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_Event_Filtering"></a> Event Filtering <a class="anchor" id="idx_Event_Filter"></a>  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>By specifying a buffer other than the "SYSTEM" buffer, <b>event filters</b> can be implemented. For example, an analyzer can request all events from the "SYSTEM" buffer, but only write acceptable events to a new buffer called "FILTERED". When the logger is set to now request only events from the new buffer instead of the "SYSTEM" buffer, only filtered events are logged. <br/>
 Event selection for logging channels can also be done by specifying the <a class="el" href="F_Logging_Data.html#F_Logger_CS_Event_ID">Event ID</a> and/or the <a class="el" href="F_Logging_Data.html#F_Logger_CS_Trigger_Mask">Trigger mask</a>.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Event_ID"></a> Event ID <a class="anchor" id="idx_Event_log-by-ID"></a>  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>INT  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>This is the ID of the event(s) to be logged. It is specified in the <a class="el" href="FE_table.html#FE_tbl_EventID">equipment list</a> for this event. To log events with <b>any</b> ID, the Event ID is set to -1 (EVENTID_ALL). The Event ID parameter and/or the <a class="el" href="F_Logging_Data.html#F_Logger_CS_Trigger_Mask">Trigger Mask</a> may be used to select events to be sent to different logging channels, or as an <a class="el" href="F_Logging_Data.html#F_Logger_Event_Filtering">Event Filtering</a> system.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Trigger_Mask"></a> Trigger Mask  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>INT  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Specifies which events to log. See <a class="el" href="FE_table.html">Explanation of Equipment list parameters</a> to see how events may be selected by their <a class="el" href="FE_table.html#FE_tbl_TrigMask">trigger mask</a>. <br/>
 For a logging channel to receive all events, -1 is used for both the <a class="el" href="F_Logging_Data.html#F_Logger_CS_Event_ID">Event ID</a> and the Trigger Mask. <br/>
 This parameter and/or the <a class="el" href="F_Logging_Data.html#F_Logger_CS_Event_ID">Event ID</a> may be used to select events to be sent to particular logging channels, or for <a class="el" href="F_Logging_Data.html#F_Logger_Event_Filtering">Event Filtering</a>.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Event_Limit"></a> Event Limit <a class="anchor" id="idx_Event_Limit"></a>  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DWORD  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>This field can be used to stop a run when set to a non-zero value. The statistics value <a class="el" href="F_Logging_Data.html#F_Logger_CStat_Events_Written">Events Written</a> is checked against th limit <b>Event limit</b> . When this condition is reached, the run is stopped automatically by the logger. The next run can then be started automatically if desired (see <a class="el" href="F_Logging_Data.html#F_Logger_Auto_Restart">Auto restart</a> ).  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Byte_Limit"></a> Byte limit <a class="anchor" id="idx_Byte_Limit"></a>  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DOUBLE  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>This field can be used to stop a run when set to a non-zero value. The statistics value <a class="el" href="F_Logging_Data.html#F_Logger_CStat_Bytes_Written">Bytes written</a> is checked against the limit <b>Byte limit</b> . When this conditions is reached, the run is stopped automatically by the logger. The next run can then be started automatically if desired (see <a class="el" href="F_Logging_Data.html#F_Logger_Auto_Restart">Auto restart</a> ).  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Subrun_Byte_Limit"></a> Subrun Byte limit <a class="anchor" id="idx_Byte_Limit_Subrun"></a>  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DOUBLE  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>More information needed about defining subruns</dd></dl>
<p>This field can be used to stop a subrun when set to a non-zero value. When this conditions is reached, the run is stopped automatically by the logger. The next run can then be started automatically if desired (see <a class="el" href="F_Logging_Data.html#F_Logger_Auto_Restart">Auto restart</a> ).  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Tape_Capacity"></a> Tape capacity  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DOUBLE  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>This field can be used to stop a run when set to a non-zero value. The statistics value <a class="el" href="F_Logging_Data.html#F_Logger_CStat_Bytes_Written_Total">Bytes written total</a> in the is checked against the limit <b>Tape capacity</b>. When this conditions is reached, the run is stopped automatically by the logger.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Subdir_Format"></a> Subdir format  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>This field optionally specifies a subdirectory, which is appended to the directory string in the key <a class="el" href="F_Logging_Data.html#F_Logger_CS_Filename">Filename</a>.</p>
<p>It is used to place the data log file into a date-stamped subdirectory. This is useful where a large numbers of datafiles are produced, or experiments are active for a long time period, and it is desirable to store the data in sub-directories according to their date. This can be done automatically using the <b>Subdir format</b> field.</p>
<p>If the <b>Subdir format</b> field is not empty, the data log file will be placed in a subdirectory. The name of this subdirectory is composed by the given <b>Subdir format</b> string. Its format follows the definition of the system call strftime() . (See man strftime). Ordinary characters placed in the format string are copied to the output character array "s" without conversion. Conversion specifiers are introduced by a '%' character, and are replaced in "s" as follows for the most common ones:</p>
<ul>
<li>%Y : Year (ex: 2002)</li>
<li>%y : Year (range:00..99)</li>
<li>%m : Month (range: 01..12)</li>
<li>%d : Day (range: 00..31)</li>
</ul>
<p>The other characters are: %a, %A, %b, %B, %c, %C, %d, %D, %e, %E, %G, %g, %h, %H, %I, %j, %k, %l, %m, %M, %n, %O, %p, %P, %r, %R, %s, %S, %t, %T, %u, %U, %V, %w, %W, %x, %X, %y, %Y, %z, %Z, %+. (See man strftime for explanation).  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CS_Current_Filename"></a> Current filename  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>will reflect the full path of the current saved data file.     </p>
</td></tr>
</table>
<h2><a class="anchor" id="F_Logger_CStat_Statistics">
/Logger/Channels/0/Statistics tree</a></h2>
<p>The keys in the <span class="odb">/Logger/Channels/0/Statistics </span> tree are shown below. If more than one logging channel is defined, there will be a <b> <span class="odb">Statistics</span> tree for each defined channel</b> (see <a class="el" href="F_Logging_Data.html#F_Logger_Channels">multiple channels</a>).</p>
<p>Periodic updates of the statistics branch is performed automatically.</p>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
<caption align="bottom">Above: meaning of keys in the /Logger/Channels/0/Statistics ODB tree </caption>
<tr>
<td colspan="3" style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>Keys in the ODB tree <span class="odb">/Logger/Channels/0/Statistics</span>   </p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>ODB Key  </p>
</td><td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>Type  </p>
</td><td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>Explanation </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CStat_Events_Written"></a> events written  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DOUBLE  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Number of events written. Cleared at begin of run. <b>Events written</b> statistics are used to determine when to stop a run automatically by checking against <a class="el" href="F_Logging_Data.html#F_Logger_CS_Event_Limit">Event Limit</a>.</p>
<p></p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CStat_Bytes_Written"></a> Bytes written  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DOUBLE  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Number of bytes written. Cleared at begin of run. <b>Bytes written</b> statistics are used to determine when to stop a run automatically by checking against <a class="el" href="F_Logging_Data.html#F_Logger_CS_Byte_Limit">Byte Limit</a>.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CStat_Bytes_Written_Uncompressed"></a> Bytes written uncompressed  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DOUBLE  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If <a class="el" href="F_Logging_Data.html#F_Logger_CS_Compression">Compression level</a> is 0 (i.e. not compressed), the values of <b>Bytes written uncompressed</b> and <b>Bytes written</b> will be identical.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CStat_Bytes_Written_Total"></a> Bytes written total  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DOUBLE  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Total number of bytes written. Cleared only when a tape is rewound with the <a class="el" href="RC_odbedit.html">ODBEdit</a> command <b>rewind</b>. The <b>Bytes written total</b> entry can therefore be used as an indicator of when a tape is full by checking against the limit <a class="el" href="F_Logging_Data.html#F_Logger_CS_Tape_Capacity">Tape capacity</a>.</p>
<p></p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="F_Logger_CStat_Files_Written"></a> files written  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>INT  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Number of files written. Cleared only when a tape is rewound with the <a class="el" href="RC_odbedit.html">ODBEdit</a> command <b>rewind</b>. <b>Files written</b> value can be used off-line to determine how many files on a tape have to be skipped in order to reach a specific run.   </p>
</td></tr>
</table>
<p><br/>
 <hr/>
 <br/>
</p>
<h2><a class="anchor" id="F_Logger_Optional_Keys">
Optional SQL subtree in the ODB /Logger tree</a></h2>
<p>The "SQL" optional subdirectory may be created in the <a class="el" href="F_Logging_Data.html#F_Logger_tree">/Logger ODB tree</a> . See <a class="el" href="F_mySQL.html">Logging information to a mySQL database</a> for details.</p>
 
<script type="text/javascript">
pages( "F_Logging",  "Features", "F_Messaging", "F_Logging_Data",""); // back index next {top bottom}
// sections params:   last section; top of this section; next section
sections("Quickstart", "Features", "RunControl");
</script>
<p><a class="anchor" id="end"></a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<br>
<hr WIDTH="100%">
Midas DOC Version 2.3.0&nbsp;----&nbsp;PSI Stefan Ritt&nbsp;----
<br>
Contributions: Pierre-Andre Amaudruz - Sergio Ballestrero - Suzannah Daviel -
<a href=http://www.stack.nl/~dimitri/doxygen/features.html>Doxygen</a> - Peter Green -
Qing Gu - Greg Hackman - Gertjan Hofman - Paul Knowles - Exaos Lee - Rudi Meier - Glenn
Moloney - Dave Morris - John M O'Donnell - Konstantin Olchanski - Chris Pearson - Renee Poutissou
- Tamsen Schurman - Andreas Suter - Jan M.Wouters - Piotr Adam Zolnierczuk
<hr WIDTH="100%">

