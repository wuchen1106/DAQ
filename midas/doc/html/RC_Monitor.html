<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Midas: Monitoring the Experiment</title>
<link href="midox.css" rel="stylesheet" type="text/css">
<!--
<link href="doxygen.css" rel="stylesheet" type="text/css">
-->
<link href="tabs.css" rel="stylesheet" type="text/css">

<script type="text/javascript"  src="navigation.js">
</script>

</head>

<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Midas Documentation</a>&nbsp;&raquo&nbsp;<a class="el" href="RunControl.html">SECTION 5: Run Control</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="RC_Monitor">Monitoring the Experiment </a></h1><p><br/>
  
<script type="text/javascript">
pages( "RC_mhttpd_custom_status" ,"RunControl", "RC_customize_ODB","RC_Monitor","end" ); // back index next {top bottom}
sections("Features", "RunControl","FrontendOperation"); // last section; top of this section; next section
</script>
 <br/>
</p>
<p>The most powerful tool for <b>monitoring</b> a MIDAS experiment is of course <a class="el" href="RC_mhttpd.html">mhttpd</a>, used for both Run Control and Monitoring. However, it does not (yet) cover every feature needed, and the MIDAS system also provides several other utilities for monitoring aspects of the data acquistion system. These include <a class="el" href="RC_Monitor.html#RC_mstat_utility">mstat</a> to display the run statistics, and <a class="el" href="RC_Monitor.html#RC_mdump_utility">mdump</a>, to dump the raw data, which is particularly useful for debugging. These utilities do provide information without having to use a browser.</p>
<ul>
<li><a class="el" href="RC_mhttpd.html">Monitoring and Run Control using the MIDAS Web Server</a></li>
<li><a class="el" href="RC_Monitor.html#RC_mstat_utility">mstat - monitor application display</a></li>
<li><a class="el" href="RC_Monitor.html#RC_mdump_utility">mdump - displays event bank contents (online or offline)</a></li>
<li><a class="el" href="RC_Monitor.html#RC_rmidas_utility">rmidas - ROOT Midas application for histograms/run control</a></li>
<li><a class="el" href="RC_Monitor.html#RC_hvedit_utility">hvedit - High Voltage editor and GUI</a> <br/>
</li>
</ul>
<p><br/>
<hr/>
<br/>
 <a class="anchor" id="idx_mstat-utility"></a> </p>
<h2><a class="anchor" id="RC_mstat_utility">
mstat - monitor application display</a></h2>
<p><b>mstat</b> is a simple ASCII status display. It presents in a compact form the most valuable information of the current condition of the MIDAS Acquisition system. The display is composed at the most of 5 sections depending on the current status of the experiment. The section displayed in order from top to bottom refer to:</p>
<ul>
<li>Run information.</li>
<li>Equipment listing and statistics if any <a class="el" href="FrontendOperation.html#FE_frontend_utility">frontend</a> is active.</li>
<li>Logger information and statistics if <a class="el" href="F_Logging.html#F_mlogger_utility">mlogger</a> is active.</li>
<li>Lazylogger status if <a class="el" href="F_LogUtil.html#F_lazylogger_utility">lazylogger</a> is active.</li>
<li>Client listing. lock</li>
<li><b> Arguments </b><ul>
<li>[-h ] : help</li>
<li>[-h hostname ] : host name (see <a class="el" href="RC_odbedit_utility.html">odbedit - ODB Editor and run control utility</a>)</li>
<li>[-e exptname ] : experiment name (see <a class="el" href="RC_odbedit_utility.html">odbedit - ODB Editor and run control utility</a>)</li>
<li>[-l ] : loop. Forces mstat to remain in a display loop. Enter "!" to terminate the command.</li>
<li>[-w time ] : refresh rate in second. Specifies the delay in second before refreshing the screen with up to date information. Default: 5 seconds. Has to be used in conjunction with -l switch. Enter "R" to refresh screen on next update.</li>
</ul>
</li>
</ul>
<ul>
<li><b> Usage </b> <div class="fragment"><pre class="fragment"> &gt;mstat -l
*-v1.8.0- MIDAS status page -------------------------Mon Apr  3 11:52:52 2000-* 
Experiment:chaos       Run#:8699    State:Running          Run time :00:11:34   
Start time:Mon Apr  3 11:41:18 2000                                             
                                                                                
FE Equip.   Node              Event Taken    Event Rate[/s] Data Rate[Kb/s]     
B12Y        pcch02            67             0.0            0.0                 
CUM_Scaler  vwchaos           23             0.2            0.2                 
CHV         pcch02            68             0.0            0.0                 
KOS_Scalers vwchaos           330            0.4            0.6                 
KOS_Trigger vwchaos           434226         652.4          408.3               
KOS_File    vwchaos           0              0.0            0.0                 
Target      pcch02            66             0.0            0.0 
                                                                                
Logger Data dir: /scr0/spring2000            Message File: midas.log            
Chan.   Active Type      Filename            Events Taken   KBytes Taken        
  0     Yes    Disk      run08699.ybs        434206          4.24e+06           
                                                                                
Lazy Label     Progress  File name           #files         Total               
cni-53         100[%]    run08696.ybs        15             44.3[%]             
                                                                                
Clients:  MStatus/koslx0         Logger/koslx0          Lazy_Tape/koslx0        
          CHV/pcch02             MChart1/umelba         ODBEdit/koslx0          
          CHAOS/vwchaos          ecl/koslx0             Speaker/koslx0          
          MChart/umelba          targetFE/pcch02        HV_MONITOR/umelba       
          SUSI/koslx0            History/kosal2         MStatus1/dasdevpc  
     
*------------------------------------------------------------------------------*
</pre></div></li>
</ul>
<hr/>
<p><a class="anchor" id="idx_mdump-utility"></a> </p>
<h2><a class="anchor" id="RC_mdump_utility">
mdump       - displays event bank contents (online or offline)</a></h2>
<p>This application allows the experimenter to "peep" into the data flow in order to display a snap-shot of the event. Its use is particularly powerful during experimental setup. <br/>
In addition <span class="utility">mdump</span> has the capability to operate on data save-set files stored on disk or tape. The main <b>mdump</b> restriction is the fact that it works only for events formatted in <a class="el" href="FE_bank_construction.html">banks</a> (i.e. MIDAS banks).</p>
<p><span class="utility">mdump</span> can be built with <b>zlib.a</b> in order to gain direct access to the data within a file with extension <b>mid.gz</b> or <b>ybs.gz</b>. See <a class="el" href="BuildingOptions.html#BO_NEED_ZLIB">NEED_ZLIB</a> Building Option.</p>
<ul>
<li><b> Arguments </b> for Online use<ul>
<li>[-h ] : help for online use.</li>
<li>[-h hostname ] : Host name.</li>
<li>[-e exptname ] : Experiment name.</li>
<li>[-b bank name] : Display event containg only specified bank name.</li>
<li>[-c compose] : Retrieve and compose file with either Add run# or Not (def:N).</li>
<li>[-f format] : Data representation (x/d/ascii) def:hex.</li>
<li>[-g type ] : Sampling mode either Some or All (def:S). &gt;&gt;&gt; in case of -c it is recommented to used -g all.</li>
<li>[-i id ] : Event Id.</li>
<li>[-j ] : Display bank header only.</li>
<li>[-k id ] : Event mask.</li>
<li>[-l number ] : Number of consecutive event to display (def:1).</li>
<li>[-m mode] : Display mode either Bank or Raw (def:B)</li>
</ul>
</li>
</ul>
<ul>
<li>[-s ] : Data transfer rate diagnositic.</li>
<li>[-w time] : Insert wait in [sec] between each display.</li>
<li>[-x filename ] : Input channel. data file name of data device. (def:online)</li>
<li>[-y ] : Display consistency check only.</li>
<li>[-z buffer name] : Midas buffer name to attach to (def:SYSTEM)</li>
</ul>
<ul>
<li>Additional <b> Arguments </b> for Offline<ul>
<li>[-x -h ] : help for offline use.</li>
<li>[-t type ] : Bank format (MIDAS).</li>
<li>[-w what] : Header, Record, Length, Event, Jbank_list (def:E)</li>
</ul>
</li>
</ul>
<ul>
<li><b> Usage </b> mdump can operate on either data stream (online) or on save-set data files. Specific help is available for each mode. <div class="fragment"><pre class="fragment"> &gt; mdump -h
 &gt; mdump -x -h
</pre></div></li>
</ul>
<p><br/>
<hr/>
<br/>
 </p>
<h3><a class="anchor" id="RC_mdump_ex1">
Example 1 mdump in offline mode</a></h3>
<p>The example below shows mdump operating on a file of saved data in <a class="el" href="FE_Data_format.html#FE_Midas_format">MIDAS format</a> : </p>
<div class="fragment"><pre class="fragment">Tue&gt; mdump -x run37496.mid | more
------------------------ Event# 0 --------------------------------
------------------------ Event# 1 --------------------------------
Evid:0001- Mask:0100- Serial:1- Time:0x393c299a- Dsize:72/0x48

<span class="preprocessor">#banks:2 - Bank list:-SCLRRATE-</span>
<span class="preprocessor"></span>
Bank:SCLR Length: 24(I*1)/6(I*4)/6(Type) Type:Integer*4
   1-&gt; 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 

Bank:RATE Length: 24(I*1)/6(I*4)/6(Type) Type:Real*4 (FMT machine dependent)
   1-&gt; 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 
------------------------ Event# 2 --------------------------------
Evid:0001- Mask:0004- Serial:1- Time:0x393c299a- Dsize:56/0x38
#banks:2 - Bank list:-MMESMMOD-

Bank:MMES Length: 24(I*1)/6(I*4)/6(Type) Type:Real*4 (FMT machine dependent)
   1-&gt; 0x3de35788 0x3d0b0e29 0x00000000 0x00000000 0x3f800000 0x00000000 

Bank:MMOD Length: 4(I*1)/1(I*4)/1(Type) Type:Integer*4


   1-&gt; 0x00000001 
------------------------ Event# 3 --------------------------------
Evid:0001- Mask:0008- Serial:1- Time:0x393c299a- Dsize:48/0x30
<span class="preprocessor">#banks:1 - Bank list:-BMES-</span>
<span class="preprocessor"></span>
Bank:BMES Length: 28(I*1)/7(I*4)/7(Type) Type:Real*4 (FMT machine dependent)
   1-&gt; 0x443d7333 0x444cf333 0x44454000 0x4448e000 0x43bca667 0x43ce0000 0x43f98000 
------------------------ Event# 4 --------------------------------
Evid:0001- Mask:0010- Serial:1- Time:0x393c299a- Dsize:168/0xa8
<span class="preprocessor">#banks:1 - Bank list:-CMES-</span>
<span class="preprocessor"></span>
Bank:CMES Length: 148(I*1)/37(I*4)/37(Type) Type:Real*4 (FMT machine dependent)
   1-&gt; 0x3f2f9fe2 0x3ff77fd6 0x3f173fe6 0x3daeffe2 0x410f83e8 0x40ac07e3 0x3f6ebfd8 0x3c47ffde 
   9-&gt; 0x3e60ffda 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x3f800000 
  17-&gt; 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 

  25-&gt; 0x3f800000 0x3f800000 0x3f800000 0x00000000 0x3f800000 0x00000000 0x3f800000 0x3f800000 
  33-&gt; 0x3f800000 0x3f800000 0x3f800000 0x3f800000 0x00000000 
------------------------ Event# 5 --------------------------------
Evid:0001- Mask:0020- Serial:1- Time:0x393c299a- Dsize:32/0x20
<span class="preprocessor">#banks:1 - Bank list:-METR-</span>
<span class="preprocessor"></span>
Bank:METR Length: 12(I*1)/3(I*4)/3(Type) Type:Real*4 (FMT machine dependent)
   1-&gt; 0x00000000 0x39005d87 0x00000000 
...
</pre></div><p><br/>
<hr/>
<br/>
 </p>
<h3><a class="anchor" id="RC_mdump_ex2">
Example 2 : mdump in online mode</a></h3>
<p>The examples below shows mdump operating in online mode (data is in <a class="el" href="FE_Data_format.html#FE_Midas_format">MIDAS format</a>).</p>
<ul>
<li><b> Example 1 : dump the bankheaders</b> <div class="fragment"><pre class="fragment">&gt; mdump -j
[pol@isdaq01 pol]$ mdump -j
-4506 -- Enter &lt;!&gt; to Exit ------- Midas Dump ---
------------------------ Event# 1 ------------------------
Evid:0002- Mask:0001- Serial:2- Time:0x4c9a4c2b- Dsize:832/0x340
<span class="preprocessor">#banks:2 Bank list:-HI00HI01-</span>
</pre></div></li>
</ul>
<ul>
<li><b> Example 2 : dump the bank CYCI in decimal format </b> <div class="fragment"><pre class="fragment">[pol@isdaq01 pol]$ mdump -b CYCI -l 2 -f d
-4506 -- Enter &lt;!&gt; to Exit ------- Midas Dump ---
------------------------ Event# 1 ------------------------
Bank -CYCI- not found (2) in <span class="preprocessor">#banks:2 Bank list:-HI00HI01-</span>
<span class="preprocessor"></span>------------------------ Event# 2 ------------------------
<span class="preprocessor">#banks:2 Bank list:-CYCIHSCL-</span>
<span class="preprocessor"></span>Bank:CYCI Length: 36(I*1)/9(I*4)/9(Type) Type:Unsigned Integer*4
   1-&gt;       16       16        1        0        4        0        0        0
   9-&gt;        0
</pre></div></li>
</ul>
<p><br/>
<hr/>
<br/>
</p>
<h2><a class="anchor" id="RC_rmidas_utility">
rmidas       - ROOT Midas application for histograms/run control</a></h2>
<p><a class="anchor" id="idx_rmidas-utility"></a> Root/Midas remote GUI application for root histograms and possible run control under the ROOT. environment.</p>
<p><span class="new"> Users of this utility may also be interested in a <a class="el" href="RC_ROOT_analyzer_page.html">Custom Page showing ROOT analyzer output</a> written for <a class="el" href="RC_mhttpd.html">mhttpd</a>, (Dec 2009) </span></p>
<ul>
<li><b> Arguments </b><ul>
<li>[-h ] : help</li>
<li>[-h hostname ] : host name</li>
<li>[-e exptname ] : experiment name</li>
</ul>
</li>
<li><b> Usage </b> to be written.</li>
<li><b> Example </b> <div class="fragment"><pre class="fragment"> &gt;rmidas midasserver.domain
</pre></div></li>
</ul>
<center> rmidas display sample. Using the example/experiment/ demo setup. </p>
<div align="center">
<img src="rmidas.jpg" alt="rmidas.jpg"/>
</div>
 </center><hr/>
<h2><a class="anchor" id="RC_hvedit_utility">
hvedit       - High Voltage editor and GUI</a></h2>
<p><a class="anchor" id="idx_hvedit-utility"></a> High Voltage editor, graphical interface to the Slow Control System. Originally for Windows machines, but recently ported on Linux under Qt by Andreas Suter.</p>
<ul>
<li><b> Arguments </b><ul>
<li>[-h ] : help</li>
<li>[-h hostname ] : host name</li>
<li>[-e exptname ] : experiment name</li>
<li>[-D ] : start program as a daemon</li>
</ul>
</li>
<li><b> Usage </b>: To control the high voltage system, the program HVEdit can be used under Windows 95/NT. It can be used to set channels, save and load values from disk and print them. The program can be started several times even on different computers. Since they are all linked to the same ODB arrays, the demand and measured values are consistent among them at any time. HVEdit is started from the command line:</li>
<li><b> Example </b> <div class="fragment"><pre class="fragment"> &gt;hvedit
</pre></div></li>
</ul>
<p><br/>
  
<script type="text/javascript">
pages( "RC_mhttpd_custom_status" ,"RunControl", "RC_customize_ODB","RC_Monitor","" ); // back index next {top bottom}
sections("Features", "RunControl","FrontendOperation"); // last section; top of this section; next section
</script>
 <br/>
</p>
<p><a class="anchor" id="end"></a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<br>
<hr WIDTH="100%">
Midas DOC Version 2.3.0&nbsp;----&nbsp;PSI Stefan Ritt&nbsp;----
<br>
Contributions: Pierre-Andre Amaudruz - Sergio Ballestrero - Suzannah Daviel -
<a href=http://www.stack.nl/~dimitri/doxygen/features.html>Doxygen</a> - Peter Green -
Qing Gu - Greg Hackman - Gertjan Hofman - Paul Knowles - Exaos Lee - Rudi Meier - Glenn
Moloney - Dave Morris - John M O'Donnell - Konstantin Olchanski - Chris Pearson - Renee Poutissou
- Tamsen Schurman - Andreas Suter - Jan M.Wouters - Piotr Adam Zolnierczuk
<hr WIDTH="100%">

