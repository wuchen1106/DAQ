<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Midas: Electronic logbook (Elog)</title>
<link href="midox.css" rel="stylesheet" type="text/css">
<!--
<link href="doxygen.css" rel="stylesheet" type="text/css">
-->
<link href="tabs.css" rel="stylesheet" type="text/css">

<script type="text/javascript"  src="navigation.js">
</script>

</head>

<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Midas Documentation</a>&nbsp;&raquo&nbsp;<a class="el" href="Features.html">SECTION 4: Features</a>&nbsp;&raquo&nbsp;<a class="el" href="F_Logging.html">Logging in MIDAS</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="F_Elog">Electronic logbook (Elog) </a></h1><p><br/>
  
<script type="text/javascript">
pages( "F_History_logging" ,  "Features","F_LogUtil","F_Elog","end"); // back index next {top bottom}
// sections params:   last section; top of this section; next section
sections("Quickstart", "Features", "RunControl");
</script>
<p><br/>
 <a class="anchor" id="idx_Elog_Introduction"></a> <a class="anchor" id="idx_Logging_Elog"></a> </p>
<h2><a class="anchor" id="F_Elog_Intro">
Introduction</a></h2>
<p>The Electronic logbook (Elog) is an alternative way of recording experiment information. This is implemented through the MIDAS web server <a class="el" href="RC_mhttpd_utility.html">mhttpd</a> (see <a class="el" href="RC_mhttpd_Elog_page.html">Elog page</a>).</p>
<h2><a class="anchor" id="F_Logger_Elog_Files_Location">
Location of Elog Files</a></h2>
<p><a class="anchor" id="F_Logger_Elog_Dir"></a> <a class="anchor" id="idx_Elog_Files_location"></a> By default, <a class="el" href="F_Elog.html">elog</a> files are written into the directory path given by the ODB key <a class="el" href="F_Logging_Data.html#F_Logger_Data_Dir">Data Dir</a> in <a class="el" href="F_Logging_Data.html#F_Logger_tree">/Logger ODB tree</a> .</p>
<p>This location can be changed by use of the ODB Key <span class="odb">Elog dir</span> in the <a class="el" href="F_Logging_Data.html#F_Logger_tree">/Logger ODB tree</a> . This key is optional and doesn't appear by default in the <span class="odb">/Logger</span> tree. <br/>
 If this key <b>is</b> present, the location of the <a class="el" href="F_Elog.html">Electronic logbook (Elog)</a> files is reassigned to the defined path.</p>
<h3><a class="anchor" id="F_Logger_Create_Elog_Dir">
Creation of ODB Key Elog Dir</a></h3>
<p>Using the <a class="el" href="RC_mhttpd_ODB_page.html">mhttpd ODB editor</a> or the <a class="el" href="RC_odbedit_examples.html#RC_odbedit_cr">odbedit command create</a> as shown below, the user may add this key: </p>
<div class="fragment"><pre class="fragment">[local:Default:S]/Logger&gt;create <span class="keywordtype">string</span> <span class="stringliteral">&quot;Elog dir&quot;</span>
String length [32]:128
[local:Default:S]/Logger&gt;<span class="keyword">set</span> <span class="stringliteral">&quot;Elog dir&quot;</span> /mypath/elog/2009
</pre></div><p><br/>
 <hr/>
 <br/>
</p>
<h2><a class="anchor" id="F_Elog_Custom">
Customizing the Elog</a></h2>
<p>The Electronic logbook (Elog) is an alternative way of recording experiment information. This is implemented through the MIDAS web server <a class="el" href="RC_mhttpd_utility.html">mhttpd</a> (see <a class="el" href="RC_mhttpd_Elog_page.html">Elog page</a> ). The <span class="odb">/Elog</span> tree is created automatically when the MIDAS Logger (<span class="utility">mlogger</span>) is started for the first time. The definition of the options are described in <a class="el" href="F_Elog.html#F_ODB_Elog_Tree">The ODB /Elog Tree</a>.</p>
<p><a class="anchor" id="idx_ODB_tree_Elog"></a> </p>
<h3><a class="anchor" id="F_ODB_Elog_Tree">
The ODB /Elog Tree</a></h3>
<p>This tree describes the Elog settings used through the MIDAS web server. See <a class="el" href="RC_mhttpd_Elog_page.html">mhttpd Elog page</a> for setting up the different Elog page displays. The meaning of each key is described in the <a class="el" href="F_Elog.html#F_ODB_Elog_Tree_Keys">table below</a>.</p>
<div class="fragment"><pre class="fragment">[local:midas:S]/Elog&gt;ls -lr
Key name                        Type    #Val  Size  Last Opn Mode Value
---------------------------------------------------------------------------
Elog                            DIR
   Email                       STRING  1     64    25h  0   RWD  midas@triumf.ca
    Display run number          <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     25h  0   RWD  y
    Allow <span class="keyword">delete</span>                <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     25h  0   RWD  n
    Types                       STRING  20    32    25h  0   RWD  
                                        [0]             Routine
                                        [1]             Shift summary
                                        [2]             Minor error
                                        [3]             Severe error
                                        [4]             Fix
                                        [5]             Question
                                        [6]             Info
                                        [7]             Modification
                                        [8]             Reply
                                        [9]             Alarm
                                        [10]            Test
                                        [11]            Other
                                        [12]            
                                        [13]            
                                        [14]            
                                        [15]            
                                        [16]            
                                        [17]            
                                        [18]            
                                        [19]            
    Systems                     STRING  20    32    25h  0   RWD  
                                        [0]             General
                                        [1]             DAQ
                                        [2]             Detector
                                        [3]             Electronics
                                        [4]             Target
                                        [5]             Beamline
                                        [6]             
                                        [7]             
                                        [8]             
                                        [9]             
                                        [10]            
                                        [11]            
                                        [12]            
                                        [13]            
                                        [14]            
                                        [15]            
                                        [16]            
                                        [17]            
                                        [18]            
                                        [19]  
Buttons                         STRING  4     32    &gt;99d 0   RWD  
                                        [0]             8h
                                        [1]             24h
                                        [2]             3d
                                        [3]             7d
Host name                       STRING  1     256   &gt;99d 0   RWD  myhost.triumf.ca
Email DAQ                       STRING  1     45    &gt;99d 0   RWD  daq@triumf.ca,johndoe@triumf.ca
Email Detector                  STRING  1     32    &gt;99d 0   RWD  janedoe@triumf.ca
SMTP host                       STRING  1     32    &gt;99d 0   RWD  localhost
</pre></div><h3><a class="anchor" id="F_ODB_Elog_Tree_Keys">
Meaning of the keys in the /Elog tree</a></h3>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
<caption align="bottom">Above: Explanation of keys in ODB /Elog tree </caption>
<tr align="center">
<td colspan="4" rowspan="1" style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; font-size: 125% ;"><p>Keys in ODB /Elog tree<br/>
  </p>
<p></p>
</td></tr>
<tr>
<td colspan="2" style="vertical-align: top; font-weight: bold; text-align: center; background-color: rgb(204, 204, 255);"><p>Key<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; text-align: center; background-color: rgb(204, 204, 255);"><p>Type<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; text-align: center; background-color: rgb(204, 204, 255);"><p>Explanation<br/>
  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>Elog  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>DIR<br/>
  </p>
</td><td style="vertical-align: top;"><p>Directory containing information for the Elog (Electronic log book)  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><a class="anchor" id="idx_Elog_Email"></a> <a class="anchor" id="F_Email"></a> Email  </p>
</td><td style="vertical-align: top;"><p>STRING<br/>
  </p>
</td><td style="vertical-align: top;"><p>Defines the Email address for the Elog reply. When a user replies to an Elog message, the message with be sent to this address.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><a class="anchor" id="F_Display_RN"></a> Display run number  </p>
</td><td style="vertical-align: top;"><p>BOOL<br/>
  </p>
</td><td style="vertical-align: top;"><p>Enable/disable the run number display in the Elog entries.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><a class="anchor" id="F_Allow_Delete"></a> Allow delete  </p>
</td><td style="vertical-align: top;"><p>BOOL<br/>
  </p>
</td><td style="vertical-align: top;"><p>Permits or prevents Elog entries from being deleted  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><a class="anchor" id="F_Types"></a> Types  </p>
</td><td style="vertical-align: top;"><p>STRING<br/>
  </p>
</td><td style="vertical-align: top;"><p>Pre-defined array of allowed types displayed when composing an Elog entry. A maximum of 20 types are available. The list will be terminated by the encounter of the first blank type. Users can adjust this list as desired.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><a class="anchor" id="F_Systems"></a> Systems  </p>
</td><td style="vertical-align: top;"><p>STRING<br/>
  </p>
</td><td style="vertical-align: top;"><p>Pre-defined array of categories displayed when composing an Elog entry. A maximum of 20 types are available. The list will be terminated by the encounter of the first blank type. Users can adjust this list as desired.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><a class="anchor" id="F_Buttons"></a> Buttons  </p>
</td><td style="vertical-align: top;"><p>STRING<br/>
  </p>
</td><td style="vertical-align: top;"><p>Permits the user to easily recall Elog messages for up to four possible time spans. The example above shows that all messages in the last 8 hours, 24 hours, 3 days or 7 days can be recalled by pressing the appropriate button.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><a class="anchor" id="F_Host_name"></a> Host name  </p>
</td><td style="vertical-align: top;"><p>STRING<br/>
  </p>
</td><td style="vertical-align: top;"><p>Host name  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><a class="anchor" id="F_Email_DAQ"></a> Email DAQ  </p>
</td><td style="vertical-align: top;"><p>STRING<br/>
  </p>
</td><td style="vertical-align: top;"><p>Optional field(s) created by user. It may be desirable that a person receives an email copy of all elog messages sent under a particular system type. The example shows that email copies of messages sent under the System types of "DAQ" and "Detector" will be sent to the addresses listed.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><a class="anchor" id="F_SMTP_Host"></a> SMTP host  </p>
</td><td style="vertical-align: top;"><p>STRING<br/>
  </p>
</td><td style="vertical-align: top;"><p>Mail server address for routing the composed Elog message to the destination.  </p>
<p></p>
</td></tr>
</table>
<p>The optional subtree <span class="odb">/Elog/Forms</span> is described on the <a class="el" href="RC_mhttpd_Elog_page.html#RC_mhttpd_Internal_Elog_shift_check">mhttpd Elog page</a>.</p>
<p><br/>
 <hr/>
 <br/>
</p>
<p><a class="anchor" id="idx_melog-utility"></a> <a class="anchor" id="Elog_submit-entry"></a> </p>
<h2><a class="anchor" id="F_melog_utility">
melog        - submits an entry to the Elog</a></h2>
<p>Electronic Log utility. Submit full Elog entry to the specified Elog port.</p>
<ul>
<li><b> Arguments </b><ul>
<li>[-h ] : help</li>
<li>[-h hostname ] : host name</li>
<li>[-l exptname or logbook ]</li>
<li>[-u username password ]</li>
<li>[-f &lt;attachment&gt; ] : up to 10 files.</li>
<li>-a &lt;attribute&gt;=&lt;value&gt; : up to 20 attributes. The attribute "Author=..." must at least be present for submission of Elog.</li>
<li>-m &lt;textfile&gt; | text&gt; Arguments with blanks must be enclosed in quotes. The elog message can either be submitted on the command line or in a file with the -m flag. Multiple attributes and attachments can be supplied.</li>
</ul>
</li>
</ul>
<ul>
<li><b> Usage </b> By default the attributes are "Author", "Type", "System" and "Subject". The "Author" attribute has to be present in the elog command in order to successfully submit the message. If multiple attributes are required append before "text" field the full specification of the attribute. In case of multiple attachements, only one "-f" is required followed by up to 10 file names. <div class="fragment"><pre class="fragment"> &gt;melog -h myhost -<a class="code" href="sis3803_8c.html#afcb0609a0beab248bb3994a3368bd9ff">p</a> 8081 -l myexpt -a author=pierre <span class="stringliteral">&quot;Just a elog message&quot;</span>
 &gt;melog -h myhost -<a class="code" href="sis3803_8c.html#afcb0609a0beab248bb3994a3368bd9ff">p</a> 8081 -l myexpt -a author=pierre -f file2attach.txt \
                 <span class="stringliteral">&quot;Just this message with an attachement&quot;</span>
 &gt;melog -h myhost -<a class="code" href="sis3803_8c.html#afcb0609a0beab248bb3994a3368bd9ff">p</a> 8081 -l myexpt -a author=pierre -m file_containing_the_message.txt
 &gt;melog -h myhost -<a class="code" href="sis3803_8c.html#afcb0609a0beab248bb3994a3368bd9ff">p</a> 8081 -l myexpt -a Author=pierre -a Type=routine -a system=general \
                 -a Subject=<span class="stringliteral">&quot;my test&quot;</span> <span class="stringliteral">&quot;A full Elog message&quot;</span>
</pre></div></li>
<li><b> Remarks </b> none so far</li>
</ul>
 
<script type="text/javascript">
pages( "F_History_logging" ,  "Features","F_LogUtil","F_Elog",""); // back index next {top bottom}
// sections params:   last section; top of this section; next section
sections("Quickstart", "Features", "RunControl");
</script>
<p><a class="anchor" id="end"></a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<br>
<hr WIDTH="100%">
Midas DOC Version 2.3.0&nbsp;----&nbsp;PSI Stefan Ritt&nbsp;----
<br>
Contributions: Pierre-Andre Amaudruz - Sergio Ballestrero - Suzannah Daviel -
<a href=http://www.stack.nl/~dimitri/doxygen/features.html>Doxygen</a> - Peter Green -
Qing Gu - Greg Hackman - Gertjan Hofman - Paul Knowles - Exaos Lee - Rudi Meier - Glenn
Moloney - Dave Morris - John M O'Donnell - Konstantin Olchanski - Chris Pearson - Renee Poutissou
- Tamsen Schurman - Andreas Suter - Jan M.Wouters - Piotr Adam Zolnierczuk
<hr WIDTH="100%">

