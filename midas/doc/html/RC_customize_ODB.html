<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Midas: Customizing the Experiment</title>
<link href="midox.css" rel="stylesheet" type="text/css">
<!--
<link href="doxygen.css" rel="stylesheet" type="text/css">
-->
<link href="tabs.css" rel="stylesheet" type="text/css">

<script type="text/javascript"  src="navigation.js">
</script>

</head>

<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Midas Documentation</a>&nbsp;&raquo&nbsp;<a class="el" href="RunControl.html">SECTION 5: Run Control</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="RC_customize_ODB">Customizing the Experiment </a></h1><p><br/>
  
<script type="text/javascript">
pages("RC_Monitor" ,"RunControl", "RC_Hot_Link", "RC_customize_ODB","end" ); // back index next {top bottom}
sections("Features", "RunControl","FrontendOperation"); // last section; top of this section; next section
</script>
 <br/>
</p>
<h2><a class="anchor" id="RC_customize_intro">
Introduction</a></h2>
<p>When the MIDAS system is installed, the ODB is loaded with default values, which will provide the user with a working system. However, by customizing the ODB, the user can enable powerful features, thus providing him or herself with very sophisticated DAQ system to suit almost every experiment. The user may even wish to customize their experiment further by providing <a class="el" href="RC_mhttpd_Custom_page.html">custom web-pages</a> for their particular application.</p>
<p>Customizing the ODB for Run Control involves some or all of:</p>
<ul>
<li>setting up the <a class="el" href="RC_customize_ODB.html#RC_Edit_On_Start">Edit-on-Start</a> <a class="el" href="structparameters.html">parameters</a></li>
<li>setting up <a class="el" href="RC_customize_ODB.html#RC_Access_Control">Access control (web security)</a></li>
<li>setting up <a class="el" href="RC_customize_ODB.html#RC_Lock_when_Running">write-protection when running</a></li>
<li>setting up <a class="el" href="RC_Hot_Link.html">hot-links</a></li>
<li>setting up the <a class="el" href="F_Logging_Data.html">data logging</a></li>
<li>setting up the <a class="el" href="F_History_logging.html">history logging</a></li>
<li>setting up scripts to act at end and begin of run</li>
<li>setting up the <a class="el" href="RC_customize_ODB.html#RC_Alarm_System">MIDAS Alarm System</a></li>
<li>setting up <a class="el" href="RC_mhttpd_Alias_page.html">alias links</a></li>
<li>setting up the <a class="el" href="F_Elog.html">elog</a></li>
<li>changing the size of the Midas buffers</li>
</ul>
<p>Other customization may include</p>
<ul>
<li><a class="el" href="RC_customize_ODB.html#RC_starting_clients">Customize the scripts that start up and shut down the clients.</a></li>
</ul>
<p>Some of this customization has already been described, such as setting up the data and history logging and the electronic logbook (see <a class="el" href="Features.html">SECTION 4: Features</a>). Further customization will be described in the following sections.</p>
<hr/>
<p><a class="anchor" id="idx_ODB_tree_Experiment"></a> </p>
<h2><a class="anchor" id="RC_ODB_Experiment_Tree">
The ODB /Experiment tree</a></h2>
<p>When initially created by the MIDAS installation, the ODB <span class="odb">/Experiment</span> tree contains the following keys:</p>
<div class="fragment"><pre class="fragment">[local:t2kgas:S]/&gt;ls -rlt /experiment
Key name                        Type    #Val  Size  Last Opn Mode Value
---------------------------------------------------------------------------
Experiment                      DIR
    Name                        STRING  1     32    13m  0   RWD  t2kgas
    Buffer sizes                DIR
        SYSMSG                  <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     25h  0   RWD  100000
    Menu Buttons                STRING  1     256   25h  0   RWD  Start, ODB, Messages, ELog, Alarms, Programs, History, MSCB, Config, Help
</pre></div><p>The meaning of these keys is explained <a class="el" href="RC_customize_ODB.html#RC_Experiment_tree_keys">below</a>.</p>
<p><br/>
 </p>
<h3><a class="anchor" id="RC_Experiment_tree_keys">
Explanation of the keys in the ODB /Experiment tree</a></h3>
<p><a class="anchor" id="RC_customize_mhttpd_run_buttons"></a> This table also includes some of the <b>optional keys</b> that the user may create.</p>
<p>that <a class="el" href="structparameters.html">parameters</a> <span class="odb">Menu Buttons</span> and <span class="odb">Hide Run Buttons</span> allow the customization of the run control buttons appearing on the <a class="el" href="RC_mhttpd_Main_Status_page.html">Main Status Page</a> . They have no effect when running <a class="el" href="RC_odbedit_utility.html">odbedit</a>;</p>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
<caption align="bottom">Above: Explanation of keys in /Experiment ODB tree</caption>
<tr align="center">
<td colspan="4" rowspan="1" style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; font-size: 125% ;"><p>Keys in /Experiment ODB tree<br/>
   </p>
</td></tr>
<tr>
<td colspan="2" style="vertical-align: top; font-weight: bold; text-align: center; background-color: rgb(204, 204, 255);"><p>Key<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; text-align: center; background-color: rgb(204, 204, 255);"><p>Type<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; text-align: center; background-color: rgb(204, 204, 255);"><p>Explanation<br/>
  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>Name<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>STRING<br/>
  </p>
</td><td style="vertical-align: top;"><p>Contains the name of the experiment. Filled automatically when the ODB is created. </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>Buffer Sizes<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>DIR<br/>
 </p>
<p></p>
</td><td style="vertical-align: top;"><p>Contains the sizes of the <b>Midas</b> <b>Buffers</b> for the experiment. Created with default values. The sizes can be changed to optimize the memory usage. See <a class="el" href="FE_event_buffer_size.html">Increase the Event Buffer Size(s)</a> for details.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>SYSMSG  </p>
</td><td style="vertical-align: top;"><p>DWORD  </p>
</td><td style="vertical-align: top;"><p>Size of SYSMSG buffer </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>SYSTEM  </p>
</td><td style="vertical-align: top;"><p>DWORD  </p>
</td><td style="vertical-align: top;"><p>Size of SYSTEM buffer  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><a class="anchor" id="experiment_menu_buttons"></a> Menu Buttons<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>STRING<br/>
 </p>
<p></p>
</td><td style="vertical-align: top;"><p>This key added automatically by mhttpd <span class="new"> (since <a class="el" href="NDF.html#ndf_dec_2009">Dec 2009</a>). </span> to allow the <a class="el" href="RC_mhttpd_status_page_features.html#RC_mhttpd_status_menu_buttons">Menu buttons</a> that appear on the mhttpd <a class="el" href="RC_mhttpd_Main_Status_page.html">Main Status Page</a> to be customized. The default set of buttons is <b>Start, ODB, Messages, ELog, Alarms, Programs, History, MSCB Config, Help</b></p>
<p></p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><a class="anchor" id="experiment_hide_run_buttons"></a> Hide Run Buttons<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>BOOL<br/>
  </p>
</td><td style="vertical-align: top;"><p>Optional key - hides the <a class="el" href="RC_mhttpd_status_page_features.html#RC_mhttpd_status_RC_buttons">Run Control buttons</a> on the mhttpd Main Status Page if set to "y" <span class="new"> (since <a class="el" href="NDF.html#ndf_nov_2009">Nov 2009</a> ). </span>  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>Edit on Start<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>DIR<br/>
  </p>
</td><td style="vertical-align: top;"><p>This subdirectory may contain user-defined <a class="el" href="structparameters.html">parameters</a> which will be displayed for editing at the beginning of each run. See <a class="el" href="RC_customize_ODB.html#RC_Edit_On_Start">Defining Edit-on-start Parameters</a> for details.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>Edit run number  </p>
</td><td style="vertical-align: top;"><p>BOOL  </p>
</td><td style="vertical-align: top;"><p>Optional key. If present and set to "y" will <a class="el" href="RC_mhttpd_Start_page.html#RC_Prevent_Edit_RN">Prevent the run number being edited at Run Start</a> . Active for <b>mhttpd</b> only (ignored by <b>odbedit</b>)  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
 </p>
<p></p>
</td><td style="vertical-align: top;"><p>Any number of user-defined keys or links may be defined (i.e. the edit-on-start <a class="el" href="structparameters.html">parameters</a>). See example <a class="el" href="RC_customize_ODB.html#RC_Experiment_Tree_Example">below</a>  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>Lock when running<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>DIR<br/>
  </p>
</td><td style="vertical-align: top;"><p>An optional subdirectory that may be created by the user  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
 </p>
<p></p>
</td><td style="vertical-align: top;"><p>may contain user-defined links to keys that are to be write-protected when a run is in progress. See <a class="el" href="RC_customize_ODB.html#RC_Lock_when_Running">Lock when Running</a> for details. </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>Parameter Comments<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>DIR<br/>
  </p>
</td><td style="vertical-align: top;"><p>Optional subdirectory may be created by the user.<br/>
  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>Optional keys may be created by the user to contain parameter comments associated with the <a class="el" href="RC_customize_ODB.html#RC_Edit_On_Start">Edit on Start</a> Parameters. See <a class="el" href="RC_mhttpd_Start_page.html#RC_Edit_PC">Edit-on-start Parameter Comments</a> for details. Active for <b>mhttpd</b> only (ignored by <b>odbedit</b>)   </p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>Security<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>DIR<br/>
  </p>
</td><td style="vertical-align: top;"><p>subdirectory for user to set up security features. See <a class="el" href="RC_customize_ODB.html#RC_Access_Control">Security</a> for details   </p>
</td></tr>
</table>
<h3><a class="anchor" id="RC_Experiment_Tree_Example">
Example of an  ODB /Experiment tree with optional subdirectories</a></h3>
<p>An example of a typical <span class="odb">/Experiment</span> tree containing various optional keys is shown below.</p>
<div class="fragment"><pre class="fragment">[local:midas:S]/&gt;ls -rlt /experiment
Key name                        Type    #Val  Size  Last Opn Mode Value
---------------------------------------------------------------------------
Experiment                      DIR
    Name                        STRING  1     32    14s  0   RWD  midas
    Hide Run Buttons            <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     3h   0   RWD  n
    Buffer sizes                DIR
        SYSMSG                  <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     56h  0   RWD  100000
        SYSTEM                  <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     56h  0   RWD  8388608
    Menu Buttons                STRING  1     256   25h  0   RWD  Start, ODB, Messages, ELog, Alarms, Programs, History, MSCB, Config
    Run Parameters              DIR
        Comment                 STRING  1     32    3m   0   RWD   no beam, test only
        Run Description         STRING  1     32    3m   0   RWD  28.2keV resonant energy 7Li
        Sample                  STRING  1     15    3h   0   RWD  NA
    Edit on Start               DIR
        run_title -&gt; /Experiment/run parameters/Run Description
                                STRING  1     32    3m   0   RWD  28.2keV resonant energy 7Li
        run_comment -&gt; /Experiment/run parameters/comment
                                STRING  1     32    3m   0   RWD   no beam, test only
        experiment number       <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     3h   0   RWD  12
        experimenter            STRING  1     32    3h   0   RWD  Douglas,Thomas,Minnie
        sample -&gt;  /Experiment/run parameters/Sample
                                STRING  1     15    3h   0   RWD  NA
        orientation             STRING  1     15    3h   0   RWD
        temperature             STRING  1     15    3h   0   RWD
        field                   STRING  1     15    3h   0   RWD
        Element                 STRING  1     24    3h   0   RWD  li
        Mass                    <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     3h   0   RWD  7
        DC offset(V)            <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     3h   0   RWD  0
        Ion source (kV)         DOUBLE  1     8     3h   0   RWD  28
        Laser wavelength (nm)   DOUBLE  1     8     3h   0   RWD  14859.952
        write data -&gt; /Logger/Channels/0/Settings/Active
                                <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     3h   0   RWD  y
        Number of scans -&gt; /Equipment/FIFO_acq/sis mcs/hardware/num scans
                                <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     3h   0   RWD  10
        Source HV Bias          STRING  1     12    3h   0   RWD  ISAC-WEST
        Edit run number         <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     3h   0   RWD  n
        Pedestals run           <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     3h   0   RWD  n
    Lock when running           DIR
        dis_rn_check -&gt; /Equipment/FIFO_acq/mdarc/disable run number check
                                <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     56h  0   RWD  n
        SIS test mode -&gt; /Equipment/FIFO_acq/sis mcs/sis test mode
                                <a class="code" href="structKEY.html">KEY</a>     1     12    &gt;99d 0   RWD  &lt;subdirectory&gt;
        PPGinput -&gt; /Equipment/FIFO_acq/sis mcs/Input
                                <a class="code" href="structKEY.html">KEY</a>     1     12    &gt;99d 0   RWD  &lt;subdirectory&gt;
        SIS ref A -&gt; /Equipment/FIFO_acq/sis mcs/Hardware/Enable SIS ref ch1 <a class="code" href="scaler_8c.html#ab391a322195b8a0de3e2fd9d2950b82d">scaler</a> A
                                <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     56h  0   RWD  n
        SIS ref B -&gt; /Equipment/FIFO_acq/sis mcs/Hardware/Enable SIS ref ch1 <a class="code" href="scaler_8c.html#ab391a322195b8a0de3e2fd9d2950b82d">scaler</a> B
                                <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     56h  0   RWD  y
    Parameter Comments          DIR
        Active                  STRING  1     36    56h  0   RWD  &lt;i&gt;Enter y to save data to disk&lt;/i&gt;
        Num scans               STRING 1     80    56h  0   RWD  &lt;i&gt;Stop run after num scans is reached. Enter 0 to disable (free running)&lt;/i&gt;
        Num cycles              STRING  1     80    56h  0   RWD  &lt;i&gt;Stop run after num cycles is reached. Enter 0 to disable (freerunning)&lt;/i&gt;
        Source HV Bias          STRING  1     80    56h  0   RWD  &lt;i&gt;Enter one of &apos;OLIS&apos;, &apos;ISAC-WEST&apos; or &apos;ISAC-EAST&apos; &lt;/i&gt;
    Transition debug flag       <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     21h  0   RWD  0
    Transition connect timeout  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     21h  0   RWD  10000
    Transition timeout          <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     21h  0   RWD  120000
    security                    DIR
        Web Password            STRING  1     32    15h  0   RWD  mim2Q41CV.GW3
</pre></div><p>The meaning of these keys is described <a class="el" href="RC_customize_ODB.html#RC_Experiment_tree_keys">above</a> and in the following sections.</p>
<p><a class="anchor" id="idx_ODB_tree_Experiment_Customize"></a> <a class="anchor" id="idx_ODB_tree_Experiment_Parameter-comments"></a></p>
<h3><a class="anchor" id="RC_customize_experiment_tree">
Customizing parameters under the ODB /Experiment tree</a></h3>
<p>The user can optionally create the following subdirectories under the <span class="odb">/Experiment</span> tree if they do not exist already. These must have the names <b></p>
<ul>
<li><span class="odb">/Experiment/</span><ul>
<li><a class="el" href="RC_customize_ODB.html#RC_Edit_On_Start">Edit on Start</a></li>
<li><a class="el" href="RC_customize_ODB.html#RC_parameter_comments">Parameter Comments</a></li>
<li><a class="el" href="RC_customize_ODB.html#RC_Run_Parameters">Run Parameters</a></li>
<li><a class="el" href="RC_customize_ODB.html#RC_Lock_when_Running">Lock when running</a></li>
<li><a class="el" href="RC_customize_ODB.html#RC_Access_Control">Security</a></li>
</ul>
</li>
</ul>
<p></b></p>
<p><b></b> These keynames have a particular meaning for the MIDAS system which will be described below.</p>
<p><br/>
<hr/>
<br/>
 <a class="anchor" id="idx_run_start_parameters"></a></p>
<h4><a class="anchor" id="RC_Edit_On_Start">
Defining Edit-on-start Parameters</a></h4>
<p>With <b>no</b> optional "edit-on-start" <a class="el" href="structparameters.html">parameters</a> set up, when a run is started,</p>
<ul>
<li>either by the <a class="el" href="RC_odbedit_utility.html">odbedit</a> command <a class="el" href="RC_odbedit_examples.html#RC_odbedit_start">start</a></li>
<li>or by clicking the <a class="el" href="RC_mhttpd_utility.html">mhttpd</a> start button (see <a class="el" href="RC_mhttpd_status_page_features.html#RC_mhttpd_status_menu_buttons">menu buttons</a> ) on the mhttpd main status page</li>
</ul>
<p>a <b> TR_START transition </b> is received, and the <b>run number</b> of the upcoming run will be displayed for editing. It will have been <b>automatically incremented</b> relative to the last run.</p>
<p>The following example shows a run started using <span class="utility"> odbedit</span>. See (see <a class="el" href="RC_mhttpd_Start_page.html">Start page</a>) ,</p>
<p>The default run number of the next run is 30499. The user has changed this to 500. </p>
<div class="fragment"><pre class="fragment">[local:bnmr:S]/Experiment&gt;start
Run number [30499]: 500
Are the above parameters correct? ([y]/n/q): 
</pre></div><p><a class="anchor" id="idx_edit-on-start"></a> <a class="anchor" id="idx_ODB_tree_Experiment_Edit-on-Start-parameters"></a></p>
<p>It is often convenient to <b>display and edit additional <a class="el" href="structparameters.html">parameters</a> </b> at this time. These <a class="el" href="structparameters.html">parameters</a> are known as <b>Edit-on-start</b> <a class="el" href="structparameters.html">parameters</a> since they automatically appear every time a run starts, and they are editable by the user. <b>Edit-on-start</b> <a class="el" href="structparameters.html">parameters</a> are defined by creating them or linking to them in a special subdirectory named <span class="odb">"Edit on start"</span> that the user may create in the ODB <a class="el" href="RC_customize_ODB.html#RC_ODB_Experiment_Tree">/Experiment tree</a>. Links can point to any ODB key including the logger settings. It is often convenient to create a link to the logger setting which enables/disables writing of data. A quick test run can then be made without data logging, for example: </p>
<div class="fragment"><pre class="fragment">[local:bnmr:S]/Experiment&gt;start
Write data : n
Run number [30499]:
Are the above parameters correct? ([y]/n/q):  
</pre></div><p>The first step to setting up the <b>Edit on Start</b> <a class="el" href="structparameters.html">parameters</a> is to <b>create the subdirectory "Edit on Start"</b> in the ODB under <b>/Experiment</b> as follows: </p>
<div class="fragment"><pre class="fragment">$odbedit
[local:Default:S]/&gt;cd /experiment
[local:Default:S]/Experiment&gt;mkdir <span class="stringliteral">&quot;Edit on start&quot;</span>
[local:Default:S]/Experiment&gt;cd <span class="stringliteral">&quot;Edit on start&quot;</span>
[local:Default:S]/Edit on start&gt;
</pre></div><p><a class="anchor" id="RC_rp"></a> Then the user either <b>creates the required <a class="el" href="structparameters.html">parameters</a></b>, or, if the <a class="el" href="structparameters.html">parameters</a> already exist elsewhere in the ODB, <b>creates links to the <a class="el" href="structparameters.html">parameters</a></b> in the <span class="odb">Edit on start</span> subdirectory. Many users find it convenient to create their run <a class="el" href="structparameters.html">parameters</a> in a subdirectory of <span class="odb">/Experiment</span> named <b>"Run Parameters"</b>, and create links to them in the <span class="odb">Edit on start</span> subdirectory.</p>
<p><br/>
<br/>
The example below shows the creation of three <a class="el" href="structparameters.html">parameters</a> in the <span class="odb">Edit on start</span> subdirectory: </p>
<ol>
<li>
a <b>parameter</b> to contain the title of the run (called "run_title") <br/>
 The user will be able to enter the title of each run before it starts </li>
<li>
a <b>link</b> to the ODB parameter <span class="odb">/Logger/Write data</span> <br/>
 It can make sense to create a link to the logger setting which enables/disables writing of data. A quick test run can then be made without data logging </li>
<li>
a <b>link</b> to the ODB parameter <span class="odb">/Equipment/FIFO_acq/hardware/num scans</span> which has been previously created by the user </li>
<li>
a <b>link</b> to the ODB parameter <span class="odb">/Equipment/Run Parameters/Sample</span> which has been previously created by the user </li>
</ol>
<div class="fragment"><pre class="fragment">[local:Default:S]/Edit on start&gt;
[local:Default:S]/Edit on start&gt;create <span class="keywordtype">string</span> run_title
String length [32]:128
[local:Default:S]/Edit on start&gt;ln <span class="stringliteral">&quot;/Logger/Write data&quot;</span> <span class="stringliteral">&quot;write data&quot;</span>
[local:Default:S]/Edit on start&gt;ln <span class="stringliteral">&quot;/Equipment/FIFO_acq/hardware/num scans&quot;</span> <span class="stringliteral">&quot;Number of scans&quot;</span>
[local:Default:S]/Edit on start&gt;ln <span class="stringliteral">&quot;/Experiment/Run Parameters/Sample&quot;</span> <span class="stringliteral">&quot;sample&quot;</span>
</pre></div><p>Here is an example of the <b>Edit on start</b> <a class="el" href="structparameters.html">parameters</a> from an experiment:</p>
<div class="fragment"><pre class="fragment">[local:Default:S]Edit on start&gt;ls -lt
Key name                        Type    #Val  Size  Last Opn Mode Value
---------------------------------------------------------------------------
run_title                       STRING  1     128   3h   0   RWD  2e test
experiment number               <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     3h   0   RWD  9999
experimenter                    STRING  1     32    3h   0   RWD  gdm
sample                          STRING  1     23    3h   0   RWD  /Experiment/Run Parameters/Sample -&gt; NA
orientation                     STRING  1     15    11h  0   RWD  
temperature                     STRING  1     32    3h   0   RWD  285.12K
field                           STRING  1     32    3h   0   RWD  0G
Number of scans                 <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     11h  0   RWD  /Equipment/FIFO_acq/hardware/num scans -&gt; 0
write data                      <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     7s   0   RWD  /Logger/Write data -&gt; y
Edit run number                 <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     11h  0   RWD  n
</pre></div><p>that the "Edit run number" feature (that prevents editing the run number) is available for <span class="utility">mhttpd</span> only. See <a class="el" href="RC_mhttpd_Start_page.html#RC_Prevent_Edit_RN">Prevent the run number being edited at Run Start</a> .</p>
<p><b>Examples</b> of starting a run with <b> edit on start </b> <a class="el" href="structparameters.html">parameters</a> are shown here:</p>
<ul>
<li>using <a class="el" href="RC_odbedit_examples.html#RC_EOS_example2">odbedit</a> or</li>
<li>using <a class="el" href="RC_mhttpd_Start_page.html#RC_mhttpd_Edit_On_Start">mhttpd</a> .</li>
</ul>
<h4><a class="anchor" id="RC_parameter_comments">
Parameter Comments subdirectory</a></h4>
<p>Optional parameter comments (in the <span class="odb">/Experiment/Parameter Comments</span> subdirectory) can be set up to give more information about the Edit-on-Start <a class="el" href="structparameters.html">parameters</a>. This feature is only active when using <span class="utility">mhttpd</span>. Setting up <a class="el" href="RC_mhttpd_Start_page.html#RC_Edit_PC">Edit-on-start Parameter Comments</a> is described in the mhttpd <a class="el" href="RC_mhttpd_Start_page.html">Start page</a> section. <br/>
<hr/>
<br/>
</p>
<h4><a class="anchor" id="RC_Run_Parameters">
Run Parameters subdirectory</a></h4>
<p>Users often create a subdirectory <span class="odb">/Experiment/Run Parameters</span> to contain any <a class="el" href="structparameters.html">parameters</a> needed for the run. These may be the subject of links from the <span class="odb">Edit on start</span> subdirectory (see <a class="el" href="RC_customize_ODB.html#RC_rp">example above</a>). <br/>
 In the case of <span class="utility">mhttpd</span>, two keys in this directory have special meaning. If the keys <b>"Comment"</b> or <b>"Run Description"</b> are created in the <span class="odb">"Run Parameter"</span> subdirectory, the contents of each key will be displayed on an extra line on the <span class="utility">mhttpd</span> main status page. See <a class="el" href="RC_mhttpd_status_page_features.html#RC_Edit_RP">Comment and Run Description</a> for details. <br/>
<hr/>
<br/>
</p>
<p><a class="anchor" id="idx_ODB_tree_Experiment_Lock-when-Running"></a> </p>
<h4><a class="anchor" id="RC_Lock_when_Running">
Lock when Running</a></h4>
<p>Often it is desirable that various experimental ODB <a class="el" href="structparameters.html">parameters</a> should not to be changed when a run is in progress, i.e. that they are set to a "read-only" mode while running. This can be done by creating logical links to these ODB keys in the optional directory <b> "Lock when Running" </b> in the <a class="el" href="RC_customize_ODB.html#RC_ODB_Experiment_Tree">The ODB /Experiment tree</a>. <br/>
 In the example below, all the <a class="el" href="structparameters.html">parameters</a> under the declared tree will be switched to read-only, thus preventing any modification of these <a class="el" href="structparameters.html">parameters</a> during the run. </p>
<div class="fragment"><pre class="fragment">  [local]/&gt;create key <span class="stringliteral">&quot;/Experiment/Lock when running&quot;</span>
  [local]/&gt;cd <span class="stringliteral">&quot;/Experiment/Lock when running&quot;</span>
  [local]/&gt;ln <span class="stringliteral">&quot;/Experiment/Run parameters&quot;</span> <span class="stringliteral">&quot;Run parameter&quot;</span>
  [local]/&gt;ln <span class="stringliteral">&quot;/Logger/Write Data&quot;</span> <span class="stringliteral">&quot;Write Data?&quot;</span>
</pre></div><p>In the following example, the user attempts to change one of the read-only <a class="el" href="structparameters.html">parameters</a>: </p>
<div class="fragment"><pre class="fragment">[local:bnmr:R]/&gt;<span class="keyword">set</span> <span class="stringliteral">&quot;/Logger/Write Data&quot;</span> y
Write access not allowed
</pre></div><p><br/>
<hr/>
<br/>
</p>
<p><a class="anchor" id="idx_access-control_ODB"></a> <a class="anchor" id="idx_ODB-access-control"></a> </p>
<h4><a class="anchor" id="RC_Access_Control">
Access Control (Security) using the ODB</a></h4>
<dl class="note"><dt><b>Note:</b></dt><dd>To prevent access by determined or malicious hackers, a <b>firewall</b> and/or <b>restrictions on off-site access</b> should be implemented. This kind of security can be provided by setting up <a class="el" href="RC_mhttpd_utility.html#RC_mhttpd_proxy">Proxy Access to mhttpd</a> . <br/>
</dd></dl>
<p>By default, there is no restriction for any user to connect locally or remotely to a given experiment. MIDAS provides a means to setup access restrictions using the ODB in order to protect the experiment from accidental or unauthorized access.</p>
<p>There are two levels of access restriction available each of which can be enabled independently:</p>
<ul>
<li>To require a password before MIDAS clients can start running on the host.</li>
<li>To restrict write access via the web by requiring a password before any parameter can be changed.</li>
</ul>
<p>The user can select <b>either</b> or <b>both</b> of these security features.</p>
<p>Note that other forms of ODB access control independent of these security features is also available:</p>
<ul>
<li>Write access can be restricted during a run (see <a class="el" href="RC_customize_ODB.html#RC_Lock_when_Running">Lock when Running</a> )</li>
<li>Individual keys or subdirectories in the experiment's ODB can be set "read only" with the <span class="utility">odbedit</span> command <a class="el" href="RC_odbedit_examples.html#RC_odbedit_chmod">chmod</a>.</li>
</ul>
<p><br/>
<hr/>
<br/>
</p>
<p><a class="anchor" id="idx_ODB_tree_Experiment_Security"></a></p>
<h4><a class="anchor" id="RC_Setup_Security">
How to Setup Client Access Restrictions</a></h4>
<p><a class="anchor" id="idx_access-control_client"></a> In order to <a class="el" href="RC_customize_ODB.html#RC_Access_Control">restrict access</a> to the experiment, a password mechanism needs to be defined. This is provided by the "Security" subdirectory in odb. This subdirectory is automatically created (if not already present) when the <a class="el" href="RC_odbedit_utility.html">odbedit</a> command <b>passwd</b> is issued as follows: </p>
<div class="fragment"><pre class="fragment">  C:\online&gt;odbedit
  [local:Default:S]/&gt;cd Experiment/
  [local]/&gt;passwd
  Password:&lt;xxxx&gt;
  Retype password:&lt;xxxx&gt;
</pre></div><p> After running the odb command "passwd", three new sub-fields (odb keys) will be present under the <span class="odb">/Experiment/Security</span> subtree.</p>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
<caption align="bottom">Above: Explanation of keys in ODB /Experiment/Security subtree</caption>
<tr align="center">
<td colspan="4" rowspan="1" style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; font-size: 125% ;"><p>Keys in ODB /Experiment/Security subtree<br/>
   </p>
</td></tr>
<tr>
<td colspan="2" style="vertical-align: top; font-weight: bold; text-align: center; background-color: rgb(204, 204, 255);"><p>Key<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; text-align: center; background-color: rgb(204, 204, 255);"><p>Type<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; text-align: center; background-color: rgb(204, 204, 255);"><p>Explanation<br/>
  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>Password  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>STRING<br/>
  </p>
</td><td style="vertical-align: top;"><p>Contains the encrypted password. Key is created when <a class="el" href="RC_odbedit_utility.html">odbedit</a> command <b>passwd</b> is issued.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>Allowed hosts<br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>DIR  </p>
</td><td style="vertical-align: top;"><p>This key is created when <a class="el" href="RC_odbedit_utility.html">odbedit</a> command <b>passwd</b> is issued. Subdirectory may contain names of remote hosts allowed to have free access (i.e. without password) to the current experiment. See <a class="el" href="RC_customize_ODB.html#RC_security_allowed_hosts">Allowed Hosts</a> .  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>pierre.triumf.ca  </p>
</td><td style="vertical-align: top;"><p><br/>
INT  </p>
</td><td style="vertical-align: top;"><p><br/>
Example - name of a host allowed password-less access to experiment (key created by the user).  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>Allowed programs  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>DIR  </p>
</td><td style="vertical-align: top;"><p>This key is created when <a class="el" href="RC_odbedit_utility.html">odbedit</a> command <b>passwd</b> is issued. Subdirectory may contain names of clients allowed to have free access (i.e. without password) to the current experiment. See <a class="el" href="RC_customize_ODB.html#RC_security_allowed_programs">Allowed programs</a> .  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>mstat  </p>
</td><td style="vertical-align: top;"><p><br/>
INT  </p>
</td><td style="vertical-align: top;"><p><br/>
Example - name of a client (run from any host) allowed password-less access to the experiment (key created by the user).  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p>Web Password  </p>
</td><td style="vertical-align: top; font-weight: bold; background-color: lightyellow;"><p><br/>
  </p>
</td><td style="vertical-align: top;"><p>STRING<br/>
  </p>
</td><td style="vertical-align: top;"><p>This key specifies a separate encrypted password for Web server access. Key is created when <a class="el" href="RC_odbedit_utility.html">odbedit</a> command <b>webpasswd</b> is issued. See <a class="el" href="RC_customize_ODB.html#RC_Setup_Web_Security">Web Access restriction</a>.  </p>
<p></p>
</td></tr>
</table>
<h4><a class="anchor" id="RC_security_allowed_hosts">
Allowed Hosts</a></h4>
<p>This key is a fixed directory name where names of remote hosts can be defined for free access to the current experiment. While the access restriction can make sense to deny access to outsider to a given experiment, it can be annoying for the people working directly at the back-end computer or for the automatic frontend reloading mechanism (MS-DOS, VxWorks configuration). To address this problem, specific hosts can be exempt from having to supply a password before being granted of full access.</p>
<div class="fragment"><pre class="fragment">  [local]/&gt;cd <span class="stringliteral">&quot;/Experiment/Security/Allowed hosts&quot;</span>
  [local]rhosts&gt;create <span class="keywordtype">int</span> myhost.domain
  [local]rhosts&gt;
</pre></div><p> where &lt;myHost.domain&gt; is to be replaced by the full IP address of the host requesting full clearance, e.g "pierre.triumf.ca".</p>
<h4><a class="anchor" id="RC_security_allowed_programs">
Allowed programs</a></h4>
<p>This key is a fixed directory name where a list of programs can be defined that have full access to the ODB <em>regardless of the node they are running on.</em> </p>
<div class="fragment"><pre class="fragment">  [local]/&gt;cd <span class="stringliteral">&quot;/Experiment/Security/Allowed programs&quot;</span>
  [local]:S&gt;create <span class="keywordtype">int</span> mstat
  [local]:S&gt;
</pre></div><p> <br/>
<br/>
</p>
<p><br/>
<hr/>
<br/>
 <a class="anchor" id="idx_ODB_tree_Experiment_Security_Restrict-Web-access"></a> </p>
<h4><a class="anchor" id="RC_Setup_Web_Security">
How to Setup Web Access Restriction</a></h4>
<p><a class="anchor" id="idx_access-control_web"></a></p>
<p>This section is only applicable to access using <span class="utility">mhttpd</span> (i.e. web access). Access with <span class="utility">odbedit</span> is unaffected.</p>
<p>The ODB <span class="odb">/Experiment/Security</span> subtree can also be used to <a class="el" href="RC_customize_ODB.html#RC_Access_Control">restrict access</a> to the experiment via the Web. This subtree is automatically created (if not already present) when the <span class="utility">odbedit</span> command <b>webpasswd</b> is issued as follows: </p>
<div class="fragment"><pre class="fragment">  C:\online&gt;odbedit
  [local:Default:S]/&gt;cd Experiment/
  [local]/&gt;webpasswd
  Password:&lt;xxxx&gt;
  Retype password:&lt;xxxx&gt;
</pre></div><p>After running <b>webpasswd</b>, one new sub-field (odb key) i.e. <b>"Web Password"</b> will be present under the Security tree. If, of course, <a class="el" href="RC_customize_ODB.html#RC_Setup_Security">client security</a> is ALSO enabled, there will now be a total of four keys present.</p>
<h4><a class="anchor" id="RC_security_web_pw">
Web Password</a></h4>
<p>This key specifies a separate password for the Web server access via <a class="el" href="RC_mhttpd_utility.html">mhttpd</a>. If this field is active, the user will be requested to provide the "Web Password" when accessing the requested experiment in "Write Access" mode (see <a class="el" href="RC_mhttpd_ODB_page.html">example</a>). The "Read Only Access" mode is still available to all users. </p>
<div class="fragment"><pre class="fragment">[local:bnqr:S]/Experiment&gt;ls Security/
Web Password                    pon4@#@%SSDF2
</pre></div><hr/>
<h4><a class="anchor" id="RC_Example_security">
Examples of Access Control using the ODB Security subtree</a></h4>
<p>The following examples illustrate <a class="el" href="RC_customize_ODB.html#RC_Access_Control">access control</a> using the ODB Security features:</p>
<h4><a class="anchor" id="RC_Example_full_security">
Example of Full access control  setup for an experiment</a></h4>
<p>The following example shows the odb when <b>both client and web security</b> have been setup. If client security <b>only</b> is enabled, the key "Web Password" would not be present.</p>
<div class="fragment"><pre class="fragment">Key name                        Type    #Val  Size  Last Opn Mode Value
---------------------------------------------------------------------------
Experiment                      DIR
    Security                    DIR
        Password                STRING  1     32    16h  0   RWD  #@D&amp;%F56
        Allowed hosts           DIR
            host.sample.domain  <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
            pierre.triumf.ca    <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
            pcch02.triumf.ca    <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
            koslx1.triumf.ca    <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
            koslx2.triumf.ca    <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
            vwchaos.triumf.ca   <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
            koslx0.triumf.ca    <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
        Allowed programs        DIR
            mstat               <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
            fechaos             <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
        Web Password            STRING  1     32    16h  0   RWD  pon4@#@%SSDF2
</pre></div><p><br/>
<hr/>
<br/>
</p>
<h4><a class="anchor" id="RC_Example_web_security">
Example of Web-Only access control setup for an experiment</a></h4>
<p>The following example shows the odb when <b>web security only</b> has been enabled. See also <a class="el" href="RC_customize_ODB.html#RC_Example_full_security">Example of Full access control setup for an experiment</a> </p>
<div class="fragment"><pre class="fragment">Key name                        Type    #Val  Size  Last Opn Mode Value
---------------------------------------------------------------------------
Experiment                      DIR
    Security                    DIR
        Web Password            STRING  1     32    16h  0   RWD  pon4@#@%SSDF2
</pre></div><hr/>
 <a class="anchor" id="idx_ODB_tree_Experiment_Security_Remove-Access-restrictions"></a> </p>
<h4><a class="anchor" id="RC_Remove_Security">
To Remove Access Restrictions</a></h4>
<p><a class="anchor" id="idx_access-control_remove"></a> To remove the full password checking mechanism completely, the ODB security sub-tree has to be entirely deleted using the following command: </p>
<div class="fragment"><pre class="fragment">  [local]/&gt;rm /Experiment/Security
  Are you sure to <span class="keyword">delete</span> the key
  <span class="stringliteral">&quot;/Experiment/Security&quot;</span>
  and all its subkeys? (y/[n]) y
</pre></div><p>To partially remove access restrictions, remove only those keys relevent to web or client security. i.e. to remove web access restriction only, remove the key "Web Password"</p>
<div class="fragment"><pre class="fragment">  [local]/&gt;cd /Experiment/Security
[local:bnmr:S]Security&gt;ls
Password                        #@D&amp;%F56
Allowed hosts
Allowed programs
Web Password                    pon4@#@%SSDF2

[local:bnqr:S]Security&gt;rm <span class="stringliteral">&quot;Web Password&quot;</span>
Are you sure to <span class="keyword">delete</span> the key
<span class="stringliteral">&quot;/Experiment/Security/Web Password&quot;</span>
(y/[n]) y
</pre></div><p>Client security is retained: </p>
<div class="fragment"><pre class="fragment">[local:bnmr:S]Security&gt;ls
Password                      #@D&amp;%F56  
Allowed hosts
Allowed programs
</pre></div><p>Alternatively, to retain web security only, delete the keys Password, Allowed hosts and Allowed Programs </p>
<div class="fragment"><pre class="fragment">  [local]/&gt;cd /Experiment/Security
[local:bnmr:S]Security&gt;ls
Password                        #@D&amp;%F56
Allowed hosts
Allowed programs
Web Password                    pon4@#@%SSDF2

[local:bnqr:S]Security&gt;rm <span class="stringliteral">&quot;Password&quot;</span>
[local:bnqr:S]Security&gt;rm <span class="stringliteral">&quot;Allowed Hosts&quot;</span>
[local:bnqr:S]Security&gt;rm <span class="stringliteral">&quot;Allowed programs&quot;</span>
\encode

So that the only key remaining is the Web Password key:
\code
[local:bnmr:S]Security&gt;ls
Web Password                    pon4@#@%SSDF2
</pre></div><p><br/>
 <hr/>
 <br/>
</p>
<h2><a class="anchor" id="RC_starting_clients">
Customize the scripts that start up and shut down the clients.</a></h2>
<p><a class="anchor" id="idx_startup_script"></a> <a class="anchor" id="idx_shutdown_script"></a> Before a run can be started, all the clients necessary to the experiment must be started. We have already seen in <a class="el" href="Quickstart.html">SECTION 3: Quick Start</a> that templates of scripts to <a class="el" href="RC_customize_ODB.html#start-all">start and kill</a> the required clients are provided in the MIDAS package. These must be customized for your experiment. The following example shows the template start-up script <b>start_daq.sh</b> that starts</p>
<ul>
<li>a frontend</li>
<li>an analyzer,</li>
<li><a class="el" href="F_Logging.html#F_mlogger_utility">MIDAS logger</a> to save the data</li>
<li>the run-control/monitoring program <a class="el" href="RC_mhttpd_utility.html">mhttpd</a> and the template kill script <b>kill_daq.sh</b> that shuts then all down.</li>
</ul>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="0">
<caption align="bottom">Above: Template scripts to start and kill the clients </caption>
<tr>
<td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>start_daq.sh </p>
</td><td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>kill_daq.sh </p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><div class="fragment"><pre class="fragment"><span class="preprocessor">#!/bin/sh</span>
<span class="preprocessor"></span>
. setup.sh


./kill_daq.sh

odbedit -c clean

mhttpd -p 8081 -D
sleep 2
xterm -e ./frontend &amp;
xterm -e ./analyzer &amp;
mlogger -D


echo Please point your web browser to http:<span class="comment">//localhost:8081</span>
echo Or run: firefox http:<span class="comment">//localhost:8081 &amp;</span>
echo To look at live histograms, run: roody -Hlocalhost

<span class="preprocessor">#end file</span>
</pre></div>  </td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#!/bin/sh</span>
<span class="preprocessor"></span>
killall mlogger
killall mhttpd
killall frontend
killall analyzer
sleep 1

<span class="preprocessor">#end file</span>
</pre></div>   </td></tr>
</table>
<h3><a class="anchor" id="RC_start_all_example">
Example of a start-all script</a></h3>
<p>The following is a start-all script from an experiment at TRIUMF. It can be run at any time to restart any clients that have stopped. Note that it also starts <a class="el" href="RC_customize_ODB.html#RC_mserver_utility">mserver</a>, because the frontend is run on a remote host.</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#!/bin/sh</span>
<span class="preprocessor"></span><span class="preprocessor"># Host based</span>
<span class="preprocessor"></span><span class="keywordflow">if</span> [ $HOST == <span class="stringliteral">&quot;lxebit.triumf.ca&quot;</span> ]; then
 echo <span class="stringliteral">&quot;run start-all from titan04 only &quot;</span>
<span class="keywordflow">else</span>
<span class="preprocessor">#. setup.sh</span>
<span class="preprocessor"></span>

odbedit -c clean
<span class="preprocessor">#odbedit -c &quot;rm /Analyzer/Trigger/Statistics&quot;</span>
<span class="preprocessor"></span><span class="preprocessor">#odbedit -c &quot;rm /Analyzer/Scaler/Statistics&quot;</span>
<span class="preprocessor"></span>

ps -ef &gt; ~/temp
grep --silent <span class="stringliteral">&quot;mserver&quot;</span> ~/temp
<span class="keywordflow">if</span> [ <span class="stringliteral">&quot;$?&quot;</span> != <span class="stringliteral">&quot;0&quot;</span> ];  then
    echo <span class="stringliteral">&quot;Starting mserver &quot;</span>
    $MIDASSYS/linux/bin/mserver -D
<span class="keywordflow">else</span>
 echo <span class="stringliteral">&quot;mserver is already running&quot;</span>
fi
rm ~/temp

<span class="preprocessor"># Start the http MIDAS server</span>
<span class="preprocessor"></span>ps -ef &gt; ~/temp
grep --silent <span class="stringliteral">&quot;mhttpd -p 8089&quot;</span> ~/temp
<span class="keywordflow">if</span> [ <span class="stringliteral">&quot;$?&quot;</span> != <span class="stringliteral">&quot;0&quot;</span> ] ; then
    echo <span class="stringliteral">&quot;Starting mhttpd&quot;</span>
     $MIDASSYS/linux/bin/mhttpd -p 8089 -D
  <span class="keywordflow">else</span>
 echo mhttpd is already running
fi
rm ~/temp

sleep 2
<span class="preprocessor">#xterm -e ./frontend &amp;</span>
<span class="preprocessor"></span><span class="preprocessor">#xterm -e ./analyzer &amp;</span>
<span class="preprocessor"></span>
<span class="preprocessor"># The  MIDAS logger</span>
<span class="preprocessor"></span><span class="preprocessor"># Start the logger</span>
<span class="preprocessor"></span>$MIDASSYS/linux/bin/odbedit -c scl | grep --silent  Logger
<span class="keywordflow">if</span> [ <span class="stringliteral">&quot;$?&quot;</span> != <span class="stringliteral">&quot;0&quot;</span> ] ; then
    echo <span class="stringliteral">&quot;Starting mlogger&quot;</span>
    $MIDASSYS/linux/bin/mlogger  -D
  <span class="keywordflow">else</span>
 echo mlogger is already running
fi


<span class="preprocessor"># start the feebit program via remote login on lxebit</span>
<span class="preprocessor"></span>ssh lxebit ~/online/bin/start_feebit_ppg


echo Please point your web browser to http:<span class="comment">//localhost:8089</span>
<span class="preprocessor">#echo Or run: mozilla http://localhost:8089 &amp;</span>
<span class="preprocessor"></span><span class="preprocessor">#echo To look at live histograms, run: roody -Hlocalhost</span>
<span class="preprocessor"></span>fi
<span class="preprocessor">#end file</span>
</pre></div><h3><a class="anchor" id="RC_kill_all_example">
Example of a kill-all script</a></h3>
<p>This is the kill-all script for the ebit experiment at TRIUMF.</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#!/bin/sh</span>
<span class="preprocessor"></span><span class="preprocessor"># Host based</span>
<span class="preprocessor"></span><span class="keywordflow">if</span> [ $HOST == <span class="stringliteral">&quot;lxebit.triumf.ca&quot;</span> ] ; then
 echo <span class="stringliteral">&quot;run kill-all from titan04 only &quot;</span>
<span class="keywordflow">else</span>
  killall mserver
  killall mlogger
  killall mhttpd
  killall feebit_ppg
  killall analyzer
  sleep 1
fi
<span class="preprocessor">#end file</span>
</pre></div><p><br/>
<hr/>
<br/>
 <a class="anchor" id="idx_access-control_remote"></a> <a class="anchor" id="idx_mserver-utility"></a> </p>
<h2><a class="anchor" id="RC_mserver_utility">
mserver      - MIDAS Remote server</a></h2>
<p><span class="utility">mserver</span> provides remote access to any MIDAS client. It is needed when <b>one or more of the MIDAS clients for an experiment are running on a different host</b>. In this case, an <span class="utility">mserver</span> client must be started on the host where the experiment resides.</p>
<p>For example, if there is no <span class="utility">mserver</span> client is running on host dasdevpc2, then an attempt to run a client on dasdevpc2 from a remote computer (isdaq01) will result in an error message: </p>
<div class="fragment"><pre class="fragment">[bnmr@isdaq01 ~/online]$ odb -e t2kgas -h dasdevpc2
Cannot connect to remote host
</pre></div><p> If an <span class="utility">mserver</span> client is now started on host dasdevpc2, </p>
<div class="fragment"><pre class="fragment">[suz@dasdevpc2 ~]$ mserver -D
mserver started interactively
Becoming a daemon...
</pre></div><p> Now one can connect to the remote experiment : </p>
<div class="fragment"><pre class="fragment">[bnmr@isdaq01 ~/online]$ odb -e t2kgas -h dasdevpc2
[dasdevpc2:t2kgas:S]/&gt;quit
</pre></div><p>The <span class="utility">mserver</span> utility usually runs in the background and doesn't need to be modified. In the case where debugging is required, the <span class="utility">mserver</span> can be started with the -d flag which will write an entry for each transaction to a log file <em> /tmp/mserver.log </em> . The log entry contains the time stamp and RPC call request. <br/>
</p>
<p>More than one <span class="utility">mserver</span> can be started on a system, provided they use different tcp ports. This is useful if, for example, different versions of MIDAS are in use on a single host at the same time. To start a version of <span class="utility">mserver</span> on a different port, use the -p argument, e.g. mserver -p XXXX -D <br/>
 To connect a client to this version of <span class="utility">mserver</span>, use the format "hostname:port", e.g. </p>
<div class="fragment"><pre class="fragment">   fe_test -h lin08:7066 -e expt
</pre></div><p> <br/>
</p>
<h3><a class="anchor" id="RC_mserver_arguments">
mserver arguments</a></h3>
<ul>
<li><b> Arguments </b><ul>
<li>[-h ] : help</li>
<li>[-s ] : Single process server</li>
<li>[-t ] : Multi thread server</li>
<li>[-m ] : Multi process server (default)</li>
<li>[-p ] : Port number; listen for connections on non-default tcp port</li>
<li>[-d ] : Write debug info to /tmp/mserver.log</li>
<li>[-D ] : Become a Daemon</li>
</ul>
</li>
</ul>
<p><a class="anchor" id="idx_ODB_tree_Programs"></a></p>
<h2><a class="anchor" id="RC_ODB_Programs_Tree">
The ODB /Programs tree</a></h2>
<p>The ODB <b>/Programs</b> tree is created by the system. It contains</p>
<ul>
<li>key <b>Execute on start run</b></li>
<li>key <b>Execute on stop run</b></li>
<li>a <b>subdirectory for each client</b> that runs on the experiment.</li>
</ul>
<p>The subdirectory is created by the system the first time a client runs. The following is an example of the <b>/Programs</b> tree from an experiment:</p>
<div class="fragment"><pre class="fragment">[local:bnmr:S]/&gt;ls -lt /programs
Key name                        Type    #Val  Size  Last Opn Mode Value
---------------------------------------------------------------------------
Execute on start run            STRING  1     256   18h  0   RWD  /home/bnmr/online/bnmr/bin/at_start_run.csh
Execute on stop run             STRING  1     256   18h  0   RWD  /home/bnmr/online/bnmr/bin/at_end_run.csh
ODBEdit                         DIR
Logger                          DIR
Epics                           DIR
rf_config                       DIR
mheader                         DIR
Mdarc                           DIR
autorun                         DIR
feBNMR                          DIR
camplog                         DIR
Lcrplot                         DIR
mhttpd                          DIR
mdump                           DIR
Speaker                         DIR
mdarc_cleanup                   DIR
</pre></div><h3><a class="anchor" id="RC_ODB_programs_client">
The ODB /Programs/&lt;client&gt; subtree</a></h3>
<p>The subdirectory for each client contains system information as well as task-specific characteristics, such as the watchdog timeout, optionally a command to restart the task, the optional <a class="el" href="RC_customize_ODB.html#RC_Alarm_System">alarm condition</a> etc. The following example shows the subdirectory for the <a class="el" href="F_Logging.html#F_mlogger_utility">mlogger</a> client:</p>
<div class="fragment"><pre class="fragment">[local:bnmr:S]/&gt;ls -lt /programs/logger
Key name                        Type    #Val  Size  Last Opn Mode Value
---------------------------------------------------------------------------
Required                        <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     4h   0   RWD  y
Watchdog timeout                <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     4h   0   RWD  10000
Check interval                  <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     4h   0   RWD  180000
Start command                   STRING  1     256   4h   0   RWD  mlogger -D
Auto start                      <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     4h   0   RWD  n
Auto stop                       <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     4h   0   RWD  n
Auto restart                    <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     4h   0   RWD  y
Alarm <span class="keyword">class                     </span>STRING  1     32    4h   0   RWD  Caution
First failed                    <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     4h   0   RWD  1259294464
</pre></div><p>The fields of the /Programs tree are explained below.</p>
<h3><a class="anchor" id="RC_customize_Programs_tree">
Customize the ODB /Programs tree</a></h3>
<p>The <a class="el" href="structparameters.html">parameters</a> of each client in the <b>/Programs</b> tree should be customized for the experiment. The meaning of the fields is explained below. This may involve adjusting the watchdog timer, turning on an alarm if the client dies, starting the client automatically using a supplied start command etc. Customizing is done individually for each client.</p>
<p>The fields <b>Execute on start run</b> and <b>Execute on stop run</b> may be filled by the user with a command to be executed on the appropriate run transition, for example</p>
<ul>
<li>an <a class="el" href="RC_odbedit_utility.html">odbedit</a> command, to set or clear an odb parameter e.g <br/>
 <b> odb -c 'set "/Equipment/fifo_acq/client flags/client alarm" 0' </b></li>
<li>or the <b> name and path of a script</b> as shown in the example above.</li>
</ul>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="0">
<caption align="bottom">Above: Meaning of keys in the ODB /Programs tree. </caption>
<tr>
<td colspan="5" style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>Keys in the ODB tree /Programs   </p>
</td></tr>
<tr>
<td colspan="4" style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>ODB Key  </p>
</td><td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>Explanation  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Programs  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Execute on start run  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Contains optional command or script to be executed on START transition.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Execute on stop run  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Contains optional command or script to be executed on STOP transition (see <a class="el" href="RC_odbedit_examples.html#RC_example_script_1">example</a>)  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Logger </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Name of client. There will be a subdirectory created for each client named with the client-name. This example shows the subdirectory for the client "Logger".  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="RC_programs_Required"></a> Required </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If set to "y", a run will be prevented from starting if this client is not running. Set to "y" for essential clients only. It should be combined with setting <a class="el" href="RC_customize_ODB.html#RC_programs_Auto_start">Auto start</a> and/or <a class="el" href="RC_customize_ODB.html#RC_programs_Auto_restart">Auto restart</a> to "y", and supplying a <a class="el" href="RC_customize_ODB.html#RC_programs_Start_command">Start command</a>. If set to "n", the run will start successfully without this client running. <span class="note">Note that this field also changes the display in the </span> <a class="el" href="RC_mhttpd_utility.html">mhttpd</a> <a class="el" href="RC_mhttpd_Program_page.html">Programs page</a>.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="RC_programs_Watchdog_timeout"></a> Watchdog timeout </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>INT </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>This value is the watchdog timeout set in milliseconds. A watchdog runs automatically checking (every <a class="el" href="RC_customize_ODB.html#RC_programs_Check_interval">Check interval</a> ms) whether the client responds. If the client has not been responded for <b>Watchdog</b> <b>timeout</b> ms, the client will be assumed to have timed out, and it will be killed. The watchdog time for each client should be adjusted as required. For example, clients that contact external hardware that is slow to respond should have a longer time set, or they may timeout before the operation is complete.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="RC_programs_Check_interval"></a> Check interval </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>INT </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>This value is the time interval in milliseconds that the Watchdog checks the client to see if it is responding. See <a class="el" href="RC_customize_ODB.html#RC_programs_Watchdog_timeout">Watchdog timeout</a> .  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="RC_programs_Start_command"></a> Start Command </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Contains the command used to restart the client. It is required if either <a class="el" href="RC_customize_ODB.html#RC_programs_Auto_start">Auto start</a>, or <a class="el" href="RC_customize_ODB.html#RC_programs_Auto_restart">Auto restart</a> is set to "y", or the user wishes to start or restart the client using the <a class="el" href="RC_mhttpd_Program_page.html">mhttpd restart button</a>). If no start command is supplied, the user can restart the client by hand, or by using the (customized) script <a class="anchor" id="start-all"></a> "start_daq.sh" .  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="RC_programs_Auto_start"></a> <a class="anchor" id="idx_Auto_client_start"></a> Auto start </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If set to "y" the client will be started automatically using the <a class="el" href="RC_customize_ODB.html#RC_programs_Start_command">Start Command</a>. This will occur when an experiment is first started after killing all clients. If the client then dies (or times out - see <a class="el" href="RC_customize_ODB.html#RC_programs_Watchdog_timeout">Watchdog time out</a>) the client will <b>not</b> be restarted unless <a class="el" href="RC_customize_ODB.html#RC_programs_Auto_restart">Auto restart</a> is set to "y".  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="RC_programs_Auto_stop"></a> <a class="anchor" id="idx_Auto_client_stop"></a> Auto stop </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If this is set to "y" ...  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="RC_programs_Auto_restart"></a> <a class="anchor" id="idx_Auto_client_restart"></a> Auto restart </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If set to "y" the client will be restarted automatically using the <a class="el" href="RC_customize_ODB.html#RC_programs_Start_command">Start Command</a>. This will occur if the client dies or times out (see <a class="el" href="RC_customize_ODB.html#RC_programs_Watchdog_timeout">Watchdog time out</a>). If set to "n", the client must be restarted by the user (see <a class="el" href="RC_customize_ODB.html#RC_programs_Start_command">Start command</a>). See also <a class="el" href="RC_customize_ODB.html#RC_programs_Auto_start">Auto start</a>.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="RC_programs_Alarm_class"></a> Alarm class </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If this field is set to one of the existing <a class="el" href="RC_customize_ODB.html#RC_alarm_classes">alarm classes</a>, an entry in the <b>/Alarms/alarms</b> tree will be automatically created for this program. The <a class="el" href="RC_customize_ODB.html#RC_alarm_type">Alarm Type</a> will be <em>Program</em> <em>Alarm</em> . This will cause an alarm to go off if the program is not running (provided both the <a class="el" href="RC_customize_ODB.html#RC_alarm_system_active">alarm system</a> and the <a class="el" href="RC_customize_ODB.html#RC_active">individual alarm</a> are enabled).  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="RC_programs_First_failed"></a> First_failed </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DWORD </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Value filled by the System to indicate when client first failed.  </p>
<p></p>
</td></tr>
</table>
<p><br/>
</p>
<p><a class="anchor" id="idx_alarm_system"></a> <hr/>
 <h2><a class="anchor" id="RC_Alarm_System">
MIDAS Alarm System</a></h2>
<p>MIDAS provides an alarm system, which by default is turned off. When the alarm system is <a class="el" href="RC_customize_ODB.html#RC_alarm_system_active">activated</a> and an alarm condition is detected, alarms messages are sent by the system which appear as an <a class="el" href="RC_mhttpd_Alarm_page.html#RC_mhttpd_alarm_banner">alarm banner</a> on the <a class="el" href="RC_mhttpd_utility.html">mhttpd</a> main status page, and as a <a class="el" href="RC_mhttpd_Alarm_page.html#RC_odb_alarm_msg">message</a> on any windows running <a class="el" href="RC_odbedit_utility.html">odbedit</a> clients. The alarm system is flexible and can be extensively customized for each experiment.</p>
<p>The MIDAS alarm system is built-in and part of the main experiment scheduler. This means no separate task is necessary to benefit from the alarm system. <span class="note">The Alarm feature is active during <b>ONLINE</b> mode <b>ONLY</b>. </span> Alarm setup and activation is done through the Online DataBase (ODB). The alarm system includes several other features such as sequencing and control of the experiment. The alarm capabilities are:</p>
<ul>
<li>Alarm setting on any ODB variable against a threshold parameter.</li>
<li>Alarm triggered by <a class="el" href="RC_customize_ODB.html#RC_evaluated_alarm_condition">evaluated condition</a></li>
<li>Selection of Alarm check frequency</li>
<li>Selection of Alarm trigger frequency</li>
<li>Customizable alarm scheme; under this scheme multiple choices of alarm type can be selected.</li>
<li>Selection of alarm message destination ( to system message log or to elog)</li>
<li><a class="el" href="RC_customize_ODB.html#RC_alarms_email">email or SMS alerts</a> can be sent</li>
<li>Program control on run transition.</li>
</ul>
<p>The alarm system can be customized through <a class="el" href="RC_odbedit_utility.html">ODBEdit</a> or the <a class="el" href="RC_mhttpd_ODB_page.html">mhttpd Alarm page</a>. Some of the features (such as colour) are applicable only to <b>mhttpd</b>.</p>
<p>The following sections describe how to use the MIDAS Alarm System.</p>
<p>See also <a class="el" href="RC_customize_ODB.html#RC_ODB_Alarm_system_implementation">Implementation of the MIDAS Alarm System</a></p>
<p><a class="anchor" id="idx_alarm_classes"></a> <a class="anchor" id="idx_alarm_type"></a> <a class="anchor" id="idx_ODB_tree_Alarms"></a> <a class="anchor" id="RC_alarm_classes"></a> <a class="anchor" id="RC_alarm_type"></a> <hr/>
 <h3><a class="anchor" id="RC_ODB_Alarms_Tree">
ODB /Alarms Tree</a></h3>
<p>The <b> ODB /Alarms tree </b> contains user and system information related to alarms. When the ODB is created,</p>
<ul>
<li>two <b>Classes</b> of alarm are created : <b>Alarm</b> and <b>Warning</b> </li>
<li>two <b>Alarms</b> are created: <b>Demo</b> <b>ODB</b> and <b>Demo</b> <b>Periodic</b> </li>
<li>by default, the <b>alarm system is NOT active</b></li>
</ul>
<p>Currently, the overall alarm is checked once every minute. Once the alarm has been triggered, the message associated with the alarm can be repeated at a different rate. The <b>Alarms</b> structure is split into 2 sections:</p>
<ul>
<li><b>"Alarms"</b> which define the condition to be tested. The user can create as many Alarms as desired, but each must be one of the four defined <a class="el" href="RC_customize_ODB.html#RC_alarm_types">Alarm Types</a> .</li>
<li><b>"Classes"</b> which define the action to be taken when the alarm occurs. Two Classes (Alarm and Warning) are defined by default. The user can add more Classes as desired.</li>
</ul>
<p><a class="anchor" id="RC_alarm_types"></a> The four available Alarm Types are shown in the following table. They are defined in <a class="el" href="midas_8h.html">midas.h</a>. <br/>
</p>
<table style="text-align: left; width: 50%;" border="1" cellpadding="2" cellspacing="0">
<caption align="bottom">Above: Defined Alarm Types. </caption>
<tr>
<td colspan="2" style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold;
 text-align: center;"><p>Alarm Type  </p>
</td><td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold;
 text-align: center;"><p>INT value </p>
</td><td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold;
 text-align: center;"><p>Explanation  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; text-align: left;"><p>Internal alarms  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>AT_INTERNAL </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>1 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Trigger on internal (program) alarm setting through the use of the <em>al_...()</em> functions.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; text-align: left;"><p>Program alarms  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>AT_PROGRAM </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>2 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Triggered on condition of the state of the defined task.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; text-align: left;"><p>Evaluated  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>AT_EVALUATED </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>3 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Triggered by ODB value on given arithmetical condition.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: bold; text-align: left;"><p>Periodic alarms  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>AT_PERIODIC </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>4 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Triggered by timeout condition defined in the alarm setting.   </p>
</td></tr>
</table>
<p>In order to make the system flexible, each alarm class may perform different actions when an alarm is given. For example, it may write a system message, write to the elog, stop the run or spawn a detached script listed in the ODB variable <span class="odb">/Programs/Classes/Execute command</span>. This feature is used when an <a class="el" href="RC_customize_ODB.html#RC_alarms_email">Alarm triggers Email or SMS alerts</a> .</p>
<h4><a class="anchor" id="RC_evaluated_alarm_condition">
Evaluated Alarm conditions</a></h4>
<p>The alarm <b>condition</b> for evaluated alarms is entered into the ODB key <span class="odb">/Alarms/Alarms/&lt;alarm_name&gt;/Condition </span> where <span class="odb">&lt;alarm_name&gt;</span> is the name of the alarm. See <a class="el" href="RC_customize_ODB.html#RC_condition">condition key</a>.</p>
<p>The <b>condition</b> may be simply a comparison between any ODB variable and a threshold parameter, e.g. </p>
<div class="fragment"><pre class="fragment"> /Runinfo/Run number &gt; 100
</pre></div><p> or it may be an evaluated condition. One can write conditions like </p>
<div class="fragment"><pre class="fragment">  /Equipment/HV/Variables/Input[*] &lt; 100
</pre></div><p> or </p>
<div class="fragment"><pre class="fragment">  /Equipment/HV/Variables/Input[2-3] &lt; 100
</pre></div><p> to check all values from an array or a certain range. If one array element fulfills the alarm condition, the alarm is triggerrd. In addition, bit-wise alarm conditions are possible, e.g. </p>
<div class="fragment"><pre class="fragment">  /Equipment/Environment/Variables/Input[0] &amp; 8
</pre></div><p> The alarm is triggered if bit #2 is set in Input[0].</p>
<hr/>
<h4><a class="anchor" id="RC_explanation_of_alarms_tree">
Meaning of the keys in the /Alarms ODB tree</a></h4>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="0">
<caption align="bottom">Above: Meaning of keys in the ODB /Alarms tree. </caption>
<tr>
<td colspan="6" style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>Keys in the ODB tree /Alarms   </p>
</td></tr>
<tr>
<td colspan="5" style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>ODB Key  </p>
</td><td style="vertical-align: top; background-color: rgb(204, 204, 255); font-weight: bold; text-align: center;"><p>Explanation  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Alarms  </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DIR</p>
<p></p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="RC_alarm_system_active"></a> Alarm system active </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><span class="note">If set to "y"the alarm system is active</span>. Set to "n" to deactivate.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Alarms </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DIR </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Sub-tree defining each individual alarm condition. </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Demo odb </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DIR </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Name of one of the defined alarms </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="RC_active"></a> Active </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If set to "y" , this particular alarm is active.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Triggered </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>INT </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If non-zero, alarm is triggered. Filled by System.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Type </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>INT </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>One of the listed <a class="el" href="RC_customize_ODB.html#RC_alarm_types">Alarm Types</a>  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Check interval </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>INT </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Frequency in seconds that alarm condition is checked  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Checked last </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DWORD </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Written by Alarm System  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Time triggered first </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Written by Alarm System  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Time triggered last </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Written by Alarm System  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p><a class="anchor" id="RC_condition"></a> Condition </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><a class="el" href="RC_customize_ODB.html#RC_evaluated_alarm_condition">Condition</a> on which alarm should trigger.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Alarm class </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Set to one of the existing Alarm classes, e.g. Alarm, Warning  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Alarm message </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Message to be written when alarm triggers  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Classes </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DIR </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Sub-tree defining each individual action to be performed by a pre-defined and requested alarm. </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Warning </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DIR </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Name of one of the defined classes </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Write System Message </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If set to "y" a message will be sent to the System log when alarm is triggered.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Write Elog Message </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>If set to "y" a message will be written to the Elog when alarm is triggered  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>System message interval </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>INT </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Interval in seconds between successive system messages when alarm is triggered  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>System message last </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DWORD </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Filled by System...  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Execute command </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Command to be executed when alarm is triggered.  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Execute last </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>DWORD </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Stop run </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>BOOL </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Display BGColor </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Background colour of <a class="el" href="RC_mhttpd_Alarm_page.html#RC_mhttpd_alarm_banner">alarm banner</a> (mhttpd only).  </p>
<p></p>
</td></tr>
<tr>
<td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p><br/>
 </p>
</td><td style="vertical-align: top; background-color: lightyellow; font-weight: bold; text-align: left;"><p>Display FGColor </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>STRING </p>
</td><td style="vertical-align: top; font-weight: normal; text-align: left;"><p>Foreground colour of <a class="el" href="RC_mhttpd_Alarm_page.html#RC_mhttpd_alarm_banner">alarm banner</a> (mhttpd only).   </p>
</td></tr>
</table>
<p><br/>
<hr/>
<br/>
</p>
<h4><a class="anchor" id="RC_alarms_tree_example">
Examples of an /Alarms tree</a></h4>
<p>Part of the <b> /Alarms </b> tree is shown below using <a class="el" href="RC_odbedit_utility.html">odbedit</a> (see also <a class="el" href="RC_mhttpd_Alarm_page.html">mhttpd Alarm page</a>).</p>
<div class="fragment"><pre class="fragment">[local:pol:S]/&gt;cd /alarms
[local:pol:S]/Alarms&gt;ls
Alarm system active             y
Alarms
Classes
</pre></div><p>Some of the types of alarm under the <b> /Alarms/Alarms </b> tree for an experiment are shown below: </p>
<div class="fragment"><pre class="fragment">[local:pol:S]/Alarms&gt;ls -r -lt
Key name                        Type    #Val  Size  Last Opn Mode Value
---------------------------------------------------------------------------
Alarms                          DIR
    Alarm system active         <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     4h   0   RWD  y
    Alarms                      DIR
        Demo ODB                DIR
            Active              <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     &gt;99d 0   RWD  n
            Triggered           <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
            Type                <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  3
            Check interval      <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  60
            Checked last        <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     &gt;99d 0   RWD  0
            Time triggered firstSTRING  1     32    &gt;99d 0   RWD
            Time triggered last STRING  1     32    &gt;99d 0   RWD
            Condition           STRING  1     256   &gt;99d 0   RWD  /Runinfo/Run number &gt; 100
            Alarm Class         STRING  1     32    &gt;99d 0   RWD  Alarm
            Alarm Message       STRING  1     80    &gt;99d 0   RWD  Run number became too large
        Demo periodic           DIR
              Active              <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     &gt;99d 0   RWD  n
            Triggered           <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
            Type                <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  4
            Check interval      <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  28800
            Checked last        <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     &gt;99d 0   RWD  1058817867
            Time triggered firstSTRING  1     32    &gt;99d 0   RWD
            Time triggered last STRING  1     32    &gt;99d 0   RWD
            Condition           STRING  1     256   &gt;99d 0   RWD
            Alarm Class         STRING  1     32    &gt;99d 0   RWD  Warning
            Alarm Message       STRING  1     80    &gt;99d 0   RWD  Please <span class="keywordflow">do</span> your shift checks
        fePOL                   DIR
            Active              <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     19s  0   RWD  y
            Triggered           <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     19s  0   RWD  205
            Type                <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     3s   0   RWD  2
            Check interval      <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     19s  0   RWD  60
            Checked last        <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     19s  0   RWD  1259196026
            Time triggered firstSTRING  1     32    19s  0   RWD  Wed Nov 25 12:59:33 2009
            Time triggered last STRING  1     32    19s  0   RWD  Wed Nov 25 16:40:26 2009
            Condition           STRING  1     256   3s   0   RWD  Program not running
            Alarm Class         STRING  1     32    19s  0   RWD  Caution
            Alarm Message       STRING  1     80    19s  0   RWD  Program fePOL is not running
        thr2 trip               DIR
            Active              <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     3s   0   RWD  y
            Triggered           <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     3s   0   RWD  0
            Type                <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     3s   0   RWD  3
            Check interval      <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     3s   0   RWD  15
            Checked last        <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     3s   0   RWD  1259196042
            Time triggered firstSTRING  1     32    3s   0   RWD
            Time triggered last STRING  1     32    3s   0   RWD
            Condition           STRING  1     256   3s   0   RWD  /Equipment/Info ODB/Variables/last failed thr test = 2
            Alarm Class         STRING  1     32    3s   0   RWD  Threshold
            Alarm Message       STRING  1     80    3s   0   RWD  Laser threshold check failed
</pre></div><p>In the above example,</p>
<ul>
<li><b>Demo odb</b> and <b>Demo periodic</b> were created when the ODB was created.</li>
<li>The alarm <b>Fepol</b> was added automatically when the user filled the <a class="el" href="RC_customize_ODB.html#RC_programs_Alarm_class">alarm class</a> field in the <b>/Programs/fepol</b> sub-tree.</li>
<li>The other alarm <b>thr2_trip</b> was added by the user. <br/>
</li>
</ul>
<p>Four Classes of alarms (Alarm, Caution, Warning and Threshold) are defined under the /Alarms/Classes tree for this experiment. Alarm and Warning were created when the ODB was created. The user added two more classes, Caution and Threshold, by <a class="el" href="RC_odbedit_examples.html#RC_odbedit_copy">copying</a> and <a class="el" href="RC_odbedit_examples.html#RC_odbedit_set">editing</a> one of the existing classes. The Classes defined for the experiment are shown below:</p>
<div class="fragment"><pre class="fragment">   Classes                      DIR
        Alarm                   DIR
            Write system messageBOOL    1     4     27h  0   RWD  y
            Write Elog message  <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     27h  0   RWD  n
            System message interINT     1     4     27h  0   RWD  60
            System message last <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     27h  0   RWD  0
            Execute command     STRING  1     256   27h  0   RWD
            Execute interval    <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     27h  0   RWD  0
            Execute last        <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     27h  0   RWD  0
            Stop run            <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     27h  0   RWD  n
            Display BGColor     STRING  1     32    27h  0   RWD  red
            Display FGColor     STRING  1     32    27h  0   RWD  black
        Warning                 DIR
            Write system messageBOOL    1     4     &gt;99d 0   RWD  y
            Write Elog message  <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     &gt;99d 0   RWD  n
            System message interINT     1     4     &gt;99d 0   RWD  60
            System message last <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     &gt;99d 0   RWD  0
            Execute command     STRING  1     256   &gt;99d 0   RWD
            Execute interval    <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
            Execute last        <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     &gt;99d 0   RWD  0
            Stop run            <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     &gt;99d 0   RWD  n
            Display BGColor     STRING  1     32    &gt;99d 0   RWD  red
            Display FGColor     STRING  1     32    &gt;99d 0   RWD  black
      Caution                 DIR
            Write system messageBOOL    1     4     19s  0   RWD  y
            Write Elog message  <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     19s  0   RWD  n
            System message interINT     1     4     19s  0   RWD  60
            System message last <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     19s  0   RWD  1259196026
            Execute command     STRING  1     256   19s  0   RWD
            Execute interval    <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     19s  0   RWD  0
            Execute last        <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     19s  0   RWD  0
            Stop run            <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     19s  0   RWD  y
            Display BGColor     STRING  1     32    19s  0   RWD  blue
            Display FGColor     STRING  1     32    19s  0   RWD  red
       Threshold               DIR
            Write system messageBOOL    1     4     &gt;99d 0   RWD  n
            Write Elog message  <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     &gt;99d 0   RWD  n
            System message interINT     1     4     &gt;99d 0   RWD  60
            System message last <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     &gt;99d 0   RWD  0
            Execute command     STRING  1     256   &gt;99d 0   RWD
            Execute interval    <a class="code" href="sis3803_8h.html#a09fddde158a3a20bd2dcadb609de11dc">INT</a>     1     4     &gt;99d 0   RWD  0
            Execute last        <a class="code" href="sis3801_8h.html#a408a2366473807fbe658ba18e75dea66">DWORD</a>   1     4     &gt;99d 0   RWD  0
            Stop run            <a class="code" href="vt2_8h.html#a239c7f0d40651c3e419c5b9651507d14">BOOL</a>    1     4     &gt;99d 0   RWD  n
            Display BGColor     STRING  1     32    &gt;99d 0   RWD  yellow
            Display FGColor     STRING  1     32    &gt;99d 0   RWD  black
</pre></div><p><br/>
<hr/>
<br/>
</p>
<h2><a class="anchor" id="RC_alarms_email">
Alarm triggers Email or SMS alerts</a></h2>
<p>It is also possible to have the MIDAS alarm system send email or SMS alerts to cell phones when alarms are triggered. This can be configured by defining an ODB alarm on a critical ODB parameter, e.g. </p>
<div class="fragment"><pre class="fragment">/Alarms/Alarms/Liquid Level
Active                   y
Triggered                0 (0x0)
Type                     3 (0x3)
Check interval          60 (0x3C)
Checked last    1227690148 (0x492D10A4)
Time triggered first    (empty)
Time triggered last     (empty)
Condition               /Equipment/Environment/Variables/Input[0] &lt; 10
Alarm Class             Level Alarm
Alarm Message           Liquid Level is only %s
</pre></div><p> In this example, the alarm triggers an alarm of class "Level Alarm". This alarm class is defined as follows: </p>
<div class="fragment"><pre class="fragment">/Alarms/Classes/Level Alarm
Write system message    y
Write Elog message      n
System message interval 600 (0x258)
System message last     0 (0x0)
Execute command         /home/midas/level_alarm &apos;%s&apos;
Execute interval        1800 (0x708)
Execute last            0 (0x0)
Stop run                n
Display BGColor         red
Display FGColor         black
</pre></div><p> The key here is to call a script "level_alarm", which can send emails. Use something like: </p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#/bin/csh</span>
<span class="preprocessor"></span>echo $1 | mail -s \<span class="stringliteral">&quot;Level Alarm\&quot; your.name@domain.edu</span>
<span class="stringliteral">odbedit -c &apos;msg 2 level_alarm \&quot;Alarm was sent to your.name@domain.edu\&quot;&apos;</span>
</pre></div><p> The second command just generates a MIDAS system message for confirmation. Most cell phones (depends on the provider) have an email address. If you send an email there, it will be translated into a SMS message.</p>
<p>The script file above can of course be more complicated. A perl script could be used that parses an address list, so other interested parties can register by adding his/her email address to that list. The script may also collects some other slow control variables (like pressure, temperature) and combine them into the SMS message.</p>
<p>For very sensitive systems, having an alarm via SMS may not be sufficient, since the alarm system could be down (e.g. computer crash, network failure). In this case 'negative alarms' can be used. For example, every 30 minutes the system may send an SMS with the current parameter values. If the expected message is not received, it may indicate that something in the MIDAS system is wrong.</p>
<h2><a class="anchor" id="RC_ODB_Alarm_system_implementation">
Implementation of the MIDAS Alarm System</a></h2>
<p>Alarms are checked inside <a class="el" href="group__alfunctioncode.html#gaf31864a8bc5fe779057e81bde12167a9">alarm.c::al_check()</a>. This function is called by <a class="el" href="group__cmfunctionc.html#ga115565c5a1d9591fcabf844c1dd624f8">cm_yield()</a> every 10 seconds and by rpc_server_thread(), also every 10 seconds. For remote MIDAS clients, their <a class="el" href="group__alfunctioncode.html#gaf31864a8bc5fe779057e81bde12167a9">al_check()</a> issues an RPC_AL_CHECK RPC call into the MIDAS server utility <a class="el" href="RC_customize_ODB.html#RC_mserver_utility">mserver</a>, where rpc_server_dispatch() calls the local <a class="el" href="group__alfunctioncode.html#gaf31864a8bc5fe779057e81bde12167a9">al_check()</a>. As result, all alarm checks run inside a process directly attached to the local MIDAS shared memory (inside a local client or inside an <span class="utility">mserver</span> process for a remote client). Each and every MIDAS client runs the alarm checks. To prevent race conditions between different MIDAS clients, access to <a class="el" href="group__alfunctioncode.html#gaf31864a8bc5fe779057e81bde12167a9">al_check()</a> is serialized using the <a class="el" href="structALARM.html">ALARM</a> semaphore. Inside <a class="el" href="group__alfunctioncode.html#gaf31864a8bc5fe779057e81bde12167a9">al_check()</a>, alarms are triggered using <a class="el" href="group__alfunctioncode.html#gac024cd8160dc8b9418f05a63678f6c68">al_trigger_alarm()</a>, which in turn calls al_trigger_class(). Inside al_trigger_class(), the alarm is recorded into an elog or into midas.log using cm_msg(MTALK).</p>
<p>Special note should be made of the ODB setting "/Alarm/Classes/xxx/System
message interval", which has a surprising effect - after an alarm is recorded into system messages (using cm_msg(MTALK)), no record is made of any subsequent alarms until the time interval set by this variable elapses. With default value of 60 seconds, after one alarm, no more alarms are recorded for 60 seconds. Also, because all the alarms are checked at the same time, only the first triggered alarm will be recorded.</p>
<p><span class="new">As of <a class="el" href="alarm_8c.html">alarm.c</a> rev 4683, </span> "System message interval" is set to 0 ensures that every alarm is recorded into the MIDAS log file. (In previous revisions, this setting may still miss some alarms).</p>
<p>There are 3 types of alarms:</p>
<p>1) "program not running" alarms.</p>
<p>These alarms are enabled in ODB by setting <span class="odb">/Programs/ppp/Alarm class</span>. Each time <a class="el" href="group__alfunctioncode.html#gaf31864a8bc5fe779057e81bde12167a9">al_check()</a> runs, every program listed in <span class="odb">/Programs</span> is tested using "cm_exist()" and if the program is not running, the time of first failure is remembered in <span class="odb">/Programs/ppp/First failed</span>.</p>
<p>If the program has not been running for longer than the time set in ODB key <span class="odb">/Programs/ppp/Check interval</span>, an alarm is triggered (if enabled by <span class="odb">/Programs/ppp/Alarm class</span> and the program is restarted (if enabled by <span class="odb">/Programs/ppp/Auto restart</span>).</p>
<p>The "not running" condition is tested every 10 seconds (each time <a class="el" href="group__alfunctioncode.html#gaf31864a8bc5fe779057e81bde12167a9">al_check()</a> is called), but the frequency of "program not running" alarms can be reduced by increasing the value of <span class="odb">/Alarms/Alarms/ppp/Check interval</span> (default value 60 seconds). This can be useful if <span class="odb">System message interval</span> is set to zero.</p>
<p>2) "evaluated" alarms</p>
<p>3) "periodic" alarms</p>
<p>There is nothing surprising in these alarms. Each alarm is checked with a time period set by <span class="odb">/Alarm/xxx/Check interval</span>. The value of an evaluated alarm is computed using al_evaluate_condition().</p>
 
<script type="text/javascript">
pages("RC_Monitor" ,"RunControl", "RC_Hot_Link", "RC_customize_ODB","" ); // back index next {top bottom}
sections("Features", "RunControl","FrontendOperation"); // last section; top of this section; next section
</script>
 <br/>
</p>
<p><a class="anchor" id="end"></a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<br>
<hr WIDTH="100%">
Midas DOC Version 2.3.0&nbsp;----&nbsp;PSI Stefan Ritt&nbsp;----
<br>
Contributions: Pierre-Andre Amaudruz - Sergio Ballestrero - Suzannah Daviel -
<a href=http://www.stack.nl/~dimitri/doxygen/features.html>Doxygen</a> - Peter Green -
Qing Gu - Greg Hackman - Gertjan Hofman - Paul Knowles - Exaos Lee - Rudi Meier - Glenn
Moloney - Dave Morris - John M O'Donnell - Konstantin Olchanski - Chris Pearson - Renee Poutissou
- Tamsen Schurman - Andreas Suter - Jan M.Wouters - Piotr Adam Zolnierczuk
<hr WIDTH="100%">

