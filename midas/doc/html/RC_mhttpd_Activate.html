<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Midas: How to activate custom page(s) in the ODB</title>
<link href="midox.css" rel="stylesheet" type="text/css">
<!--
<link href="doxygen.css" rel="stylesheet" type="text/css">
-->
<link href="tabs.css" rel="stylesheet" type="text/css">

<script type="text/javascript"  src="navigation.js">
</script>

</head>

<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Midas Documentation</a>&nbsp;&raquo&nbsp;<a class="el" href="RunControl.html">SECTION 5: Run Control</a>&nbsp;&raquo&nbsp;<a class="el" href="RC_run_control.html">Run Control Programs</a>&nbsp;&raquo&nbsp;<a class="el" href="RC_mhttpd.html">mhttpd: the MIDAS Web-based Run Control utility</a>&nbsp;&raquo&nbsp;<a class="el" href="RC_mhttpd_Custom_page.html">Custom pages</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="RC_mhttpd_Activate">How to activate custom page(s) in the ODB </a></h1><p><br/>
  
<script type="text/javascript">
// pages parameters: back index next {top bottom}
pages( "RC_mhttpd_Custom_page", "RC_section_index","RC_mhttpd_custom_js_lib", "RC_mhttpd_Activate",  "end" );
sections("Features", "RunControl","FrontendOperation"); // last section; top of this section; next section
</script>
 <br/>
 <br/>
 </p>
<h2><a class="anchor" id="RC_odb_custom_intro">
Introduction</a></h2>
<p><span class="note"> In order to activate a custom page from the within the MIDAS web interface, the pages must be listed in the ODB under the optional</span> <span class="odb">/Custom</span> <span class="note"> tree as described below. This applies to <a class="el" href="RC_mhttpd_Activate.html#RC_odb_custom_external_example">external</a> and <a class="el" href="RC_mhttpd_Activate.html#RC_odb_custom_internal_example">internal</a> custom pages, as explained below.</span></p>
<p>The <span class="odb">/Custom</span> tree must be created by the user, e.g. using <a class="el" href="RC_odbedit_utility.html">odbedit</a> </p>
<div class="fragment"><pre class="fragment">odbedit
[local:midas:S] mkdir Custom
</pre></div><p> <a class="anchor" id="idx_mhttpd_buttons_custom"></a> <a class="anchor" id="idx_ODB_tree_custom"></a> </p>
<h2><a class="anchor" id="RC_odb_custom_tree">
The /Custom ODB tree</a></h2>
<p>Features involving the <span class="odb">/Custom</span> tree is applicable only to <a class="el" href="RC_mhttpd.html">mhttpd</a>, and ignored by <a class="el" href="RC_odbedit.html">odbedit</a> , which has no web capabilities.</p>
<p><br/>
 The optional ODB <span class="odb">/Custom</span> tree may contain</p>
<ul>
<li>links to <b>local</b> <b>external</b> custom web pages created by the user (see <a class="el" href="RC_mhttpd_Activate.html#remote">below</a> for <b>remote</b> <b>external</b> pages)</li>
<li>HTML content of an <b>internal</b> custom web page created by the user.</li>
<li><b>images</b> subtree (explained <a class="el" href="RC_mhttpd_Image_access.html#RC_mhttpd_custom_image">later</a>) used to specify images for custom pages</li>
</ul>
<p>If keys are defined in this tree, except where noted <a class="el" href="RC_mhttpd_Activate.html#RC_odb_custom_keynames">below</a>, the names of the keys will appear as <span class="new">custom-buttons</span> in versions after <a class="el" href="NDF.html#ndf_dec_2009">Dec 2009</a> (or <a class="el" href="RC_mhttpd_Alias_page.html">custom-links</a> in earlier versions) on the <span class="utility"> mhttpd</span> <a class="el" href="RC_mhttpd_Main_Status_page.html#RC_mhttpd_main_status">Main Status page</a>. By clicking on one of these alias-buttons, the custom page will be visible in a new frame. <br/>
</p>
<h3><a class="anchor" id="RC_odb_custom_keynames">
Keynames in the /Custom directory</a></h3>
<p>There are two characters that have special meaning if they are the <b>last</b> character of the keyname:</p>
<ul>
<li>The character <b>"&amp;"</b> forces the page to be opened within the current frame. If this character is omitted, the page will be opened in a new frame (default).</li>
</ul>
<ul>
<li>The character <b>"!"</b> suppresses the link appearing on the main status page as a button (or link). This can be used to provide external webpages initially hidden from the user, such as code for pop-ups, or to access a file of Javascript functions needed by other custom pages.</li>
</ul>
<h3><a class="anchor" id="RC_odb_custom_external_example">
Create a link to an external webpage</a></h3>
<p>If activating an <span class="warn">external</span> webpage, create a link for it in the ODB <span class="odb">/Custom</span> tree. For example, to create a link called <span class="odb">Test&amp;</span> that will open a <span class="note"> local </span> <b>external</b> html file <em> /home/t2ktpc/online/custom/try.html </em> in a new frame: </p>
<div class="fragment"><pre class="fragment">odbedit
[local:pol:S] mkdir Custom   &lt;-- <span class="keywordflow">if</span> /Custom is not present
[local:pol:S] cd Custom
[local:pol:S]/&gt;create <span class="keywordtype">string</span> Test&amp;
String length [32]: 80
[local:pol:S]/&gt;<span class="keyword">set</span> Test&amp; <span class="stringliteral">&quot;/home/t2ktpc/online/custom/try.html&quot;</span>
[local:pol:S]/&gt;ls -lt my_page
Test&amp;                            STRING  1     80    &gt;99d 0   RWD  /home/t2ktpc/online/custom/<span class="keywordflow">try</span>.html
</pre></div><p> <br/>
 <a class="anchor" id="remote"></a> If the external HTML file is on a <span class="note"> remote </span> <b>webserver</b>, the link should be placed under the <a class="el" href="RC_mhttpd_Alias_page.html#RC_odb_alias_tree">/Alias</a> tree rather than the <span class="odb">/Custom</span> tree, e.g.</p>
<div class="fragment"><pre class="fragment">[local:Default:Stopped]/&gt;mkdir Alias  &lt;-- <span class="keywordflow">if</span> /Alias is not present
[local:Default:Stopped]/&gt;cd alias
[local:Default:Stopped]/alias&gt;create <span class="keywordtype">string</span> WebDewpoint&amp;
String length [32]: 256
[local:Default:Stopped]/alias&gt;<span class="keyword">set</span> WebDewpoint&amp; <span class="stringliteral">&quot;http://www.decatur.de/javascript/dew/index.html&quot;</span>
</pre></div><h3><a class="anchor" id="RC_odb_custom_internal_example">
Import an internal webpage</a></h3>
<p>If creating an <span class="warn">internal</span> webpage, it must be imported into the ODB using the <a class="el" href="RC_odbedit_examples.html#RC_odbedit_import">odbedit import command</a>. This example shows a file <b>mcustom.html</b> imported into the key <span class="odb">/Custom/Test&amp;</span>.</p>
<div class="fragment"><pre class="fragment">  Tue&gt; odbedit                      
  [local:midas:Stopped]/&gt;mkdir Custom    &lt;-- create /Custom <span class="keywordflow">if</span> it does not exist
  [local:midas:Stopped]/&gt;cd Custom/
  [local:midas:Stopped]/Custom&gt;<span class="keyword">import</span> mcustom.html   &lt;-- <span class="keyword">import</span> an html file
  Key name: Test&amp;              
  [local:midas:Stopped]/Custom&gt;
</pre></div><p>Example of an <a class="el" href="RC_mhttpd_Internal.html">Internal custom page</a> is shown here.</p>
<h3><a class="anchor" id="RC_odb_custom_keys_examples">
Examples of /Custom keys</a></h3>
<p>Here is an example of different keys in <span class="odb">/Custom</span> (all for <b>external</b> webpages) </p>
<div class="fragment"><pre class="fragment">GasMain&amp;                        STRING  1     80    &gt;99d 0   RWD  /home/t2ktpc/online/custom_gas/GasMain.html
js_functions!                   STRING  1     64    &gt;99d 0   RWD  /home/t2ktpc/online/custom_gas/custom_functions.js
Purifier!                       STRING  1     132   &gt;99d 0   RWD  /home/t2ktpc/online/custom_gas/purifier.html
style0!                         STRING  1     45    &gt;99d 0   RWD  /home/t2ktpc/online/custom_gas/t0.css                    
</pre></div><ul>
<li>The first key <span class="odb">GasMain&amp;</span> will produce an alias-link on the main status page called <b>GasMain</b>. Clicking this alias-link will load the file <b>GasMain.html</b> into the <b>same</b> frame (the keyname ends in "&amp;").</li>
</ul>
<p>The other keys will not produce alias-links, since the keynames end with "!").</p>
<ul>
<li>The key <span class="odb">js_functions!</span> is used to load some javascript functions needed by the html code of the other custom pages.</li>
<li>The key <span class="odb">Purifier!</span> is a custom page that can be loaded by clicking on a box in the custom page GasMain.</li>
<li>The key <span class="odb">style0!</span> contains a style sheet for use with all the html custom pages.</li>
</ul>
<p>The output is shown in <a class="el" href="RC_T2K_Gas_Page.html#T2K_example_2">this example</a>.</p>
<h2><a class="anchor" id="RC_odb_custom_status">
How to replace the default Status page by a Custom Status page</a></h2>
<p>By using a keyname of <span class="odb">Status</span> (no "&amp;") in the link to a custom page, that page will replace the Default main status page. Clicking on the <b>Status</b> button on any of the sub-pages will return to the <b>Custom</b> status page.</p>
<p><br/>
 See <a class="el" href="RC_mhttpd_custom_status.html">Custom Status page</a> for more information and examples.</p>
<p><br/>
  
<script type="text/javascript">
// pages parameters: back index next {top bottom}
pages( "RC_mhttpd_Custom_page", "RC_section_index","RC_mhttpd_custom_js_lib", "RC_mhttpd_Activate",  "" );
sections("Features", "RunControl","FrontendOperation"); // last section; top of this section; next section
</script>
<p><a class="anchor" id="end"></a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<br>
<hr WIDTH="100%">
Midas DOC Version 2.3.0&nbsp;----&nbsp;PSI Stefan Ritt&nbsp;----
<br>
Contributions: Pierre-Andre Amaudruz - Sergio Ballestrero - Suzannah Daviel -
<a href=http://www.stack.nl/~dimitri/doxygen/features.html>Doxygen</a> - Peter Green -
Qing Gu - Greg Hackman - Gertjan Hofman - Paul Knowles - Exaos Lee - Rudi Meier - Glenn
Moloney - Dave Morris - John M O'Donnell - Konstantin Olchanski - Chris Pearson - Renee Poutissou
- Tamsen Schurman - Andreas Suter - Jan M.Wouters - Piotr Adam Zolnierczuk
<hr WIDTH="100%">

