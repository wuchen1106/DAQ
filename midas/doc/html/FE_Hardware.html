<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Midas: Supported Hardware: MIDAS driver library</title>
<link href="midox.css" rel="stylesheet" type="text/css">
<!--
<link href="doxygen.css" rel="stylesheet" type="text/css">
-->
<link href="tabs.css" rel="stylesheet" type="text/css">

<script type="text/javascript"  src="navigation.js">
</script>

</head>

<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Midas Documentation</a>&nbsp;&raquo&nbsp;<a class="el" href="FrontendOperation.html">SECTION 6: Frontend Operation</a>&nbsp;&raquo&nbsp;<a class="el" href="Frontend_code.html">Frontend code</a>&nbsp;&raquo&nbsp;<a class="el" href="FE_Appendices.html">Frontend Appendices</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="FE_Hardware">Supported Hardware: MIDAS driver library </a></h1><p><br/>
  
<script type="text/javascript">
pages("FE_Data_format","FrontendOperation","FE_camac_vme_function_calls","FE_Hardware", "end" ); // back index next {top bottom}
// section parameters: last section; top of this section; next section
sections("RunControl","FrontendOperation","DataAnalysis");
</script>
<p><a class="anchor" id="idx_Hardware_driver_library"></a></p>
<p>The driver library is continuously extended to suit the needs of various experiments based on the selected hardware modules. Not all commercially available modules are included as we don't have all the modules in hand. But you're more than welcome to contribute by providing your driver code if the module that you're using is not yet listed.</p>
<p>The <b>/drivers</b> directory is subdivided in several directories which refers to either the type of bus ie: CAMAC, FastBus, VME, PCI, USB or type of software layer such as Class, Device, Bus.</p>
<p>The software layers sections are used in particular for <a class="el" href="FE_Slow_Control_system.html">Slow Control System</a>. Example are available in the distribution under <b>examples/slowcont/frontend.c</b> including the <b>hv</b> and <b>multi</b> class with the <b>nulldev</b> device and <b>null</b> bus driver. Note: not all the device drivers implement the triple layer (Class,Device,Bus) as some include directly the hardware calls in the device layer. Please contact <a href="mailto:midas@psi.ch, midas@triumf.ca?subject=VME support">midas</a> for specific support or for submitting new drivers.</p>
<center> Non exhaustive Drivers/ directory structure </p>
<div align="center">
<img src="driverlisting.jpg" alt="driverlisting.jpg"/>
</div>
 </center><ul>
<li><a class="el" href="FE_Hardware.html#CAMAC_drivers">CAMAC drivers</a> This section is slowly getting obsolete. But still some ISA and PCI interface are in use. Most recent development is the USB/CAMAC interface from Wiener (<a href="http://www.wiener-d.com/M/17/7.html">CCUSB</a>). While this interface permits <b>CAMAC Command Stacks</b> this option is not yet supported by the MIDAS API limiting the access speed of a R/W 24bit cycle to ~360us!</li>
</ul>
<ul>
<li><a class="el" href="FE_Hardware.html#VME_drivers">VME drivers</a> The VME API has been revisited for a better function call set. Not all the hardware modules have been ported to this new scheme. DMA and Interrupt support have been included. The main hardware support is for the SBS PCI/VME, SIS PCI/VME, VMIC processor.</li>
</ul>
<ul>
<li><a class="el" href="FE_Hardware.html#USB_drivers">USB drivers</a> USB is getting popular in particular for the <a href="http://midas.psi.ch/mscb/">MSCB</a> system. Following the same concept as for the CAMAC and VME, the <b>musbstd.h/c</b> is available for USB access.</li>
</ul>
<ul>
<li><a class="el" href="FE_Hardware.html#GPIB_drivers">GPIB drivers</a></li>
</ul>
<ul>
<li><a class="el" href="FE_Hardware.html#Other_drivers">Other drivers</a> This include the TCP/IP, Serial access layer.</li>
</ul>
<p><a class="anchor" id="idx_Hardware_drivers_CAMAC"></a> <hr/>
 <h2><a class="anchor" id="CAMAC_drivers">
CAMAC drivers</a></h2>
<p>The CAMAC drivers can be used in different configuration and may have special behaviors depending on the type of hardware involved. Below are summurized some remarks about these particular hardware modules.</p>
<ul>
<li>CAMAC controllers<ul>
<li><b></b>[hyt1331.c] This interface uses an ISA board to connect to the crate controller. This card implement a "fast" readout cycle by re-triggering the CAMAC read at the end of the previous one. This feature is unfortunately not reliable when fast processor is used. Wrong returned data can be expected when CPU clocks is above 250MHz. Attempt on "slowing down" the IO through software has not guaranteed perfect result. Contact has been taken with HYTEC in order to see if possible fix can be applied to the interface. First revision of the PC-card PAL has been tested but did not show improvement. CVS version of the hyt1331.c until 1.2 contains "fast readout
  cycle" and should not be trusted. CVS 1.3 driver revision contains a patch to this problem. In the mean time you can apply your own patch (see <a class="el" href="FAQ.html">SECTION 12: Frequently Asked Questions</a>) and also <a href="http://www.hytec-electronics.co.uk/index.html">Hytec </a>)</li>
<li><b> [hyt1331.c Version &gt;= 1.8.3]</b> This version has been modified for 5331 PCI card support running under the <a class="el" href="FE_utils.html#FE_dio_utility">dio - direct I/O driver</a>.</li>
<li><b>[khyt1331.c Version &gt;= 1.8.3]</b> A full Linux driver is available for the 5331 PCI card interfacing to the hyt1331. The kernel driver has been written for the Linux kernel 2.4.2, which comes with RedHat 7.1. It could be ported back to the 2.2.x kernel because no special feature of 2.4.x are used, although many data structures and function <a class="el" href="structparameters.html">parameters</a> have changed between 2.2 and 2.4, which makes the porting a bit painful. The driver supports only one 5331 card with up to four CAMAC crates.</li>
<li><b>[kcs292x.c]</b> The 2926 is an 8 bit ISA board, while the 2927 is a 16bit ISA board. An equivalent PCI interface (2915) exists but is not yet supported by MIDAS (See <a href="http://www.kscorp.com/www/camac/1000/2915.html">KCS</a>). No support for Windowx yet. <br/>
<br/>
 Both cards can be used also through a proper Linux driver <em>camaclx.c</em>. This requires to first load a module <em>camac-kcs292x.o</em>. This software is available but not part of the MIDAS distribution yet. Please contact <a href="mailto:midas@triumf.ca?subject=KCS driver">midas</a> for further information. <br/>
<br/>
</li>
<li><b>[wecc32.c]</b> The CAMAC crate controller CC32 interface to a PCI card... you will need the proper Linux module... Currently under test. WindowsNT and W95 drivers available but not implemented under MIDAS. (see <a href="http://www.wiener-d.com/cc32.htm">CC32</a>)</li>
<li><b>[dsp004.c]</b> The dsp004 is an 8 bit ISA board PC interface which connect to the PC6002 CAMAC crate controller. This module is not being manufactured anymore, but somehow several labs still have that controller in use.</li>
<li><b>[ces8210.c]</b> The CAMAC crate controller CBD8210 interface is a VME module to give access up to 7 CAMAC crate. In conjunction with the <a class="el" href="mvmestd_8h.html">mvmestd.h</a> and <a class="el" href="mcstd_8h.html">mcstd.h</a>, this driver can be used on any MIDAS/VME interface.</li>
<li><b>[jorway73a.c]</b> The CAMAC crate controller Jorway73a is accessed through SCSI commands. This driver implement the <a class="el" href="mcstd_8h.html">mcstd.h</a> calls.</li>
</ul>
</li>
</ul>
<ul>
<li>CAMAC drivers<ul>
<li><b></b>[camacnul.c] Handy fake CAMAC driver for code development.</li>
<li><b></b>[camacrpc.c] Remote Procedure Call CAMAC driver used for accessing the CAMAC server part of the standard MIDAS frontend code. This driver is used for example in the <a class="el" href="FE_utils.html#FE_mcnaf_utility">mcnaf</a> and <a class="el" href="RC_mhttpd_utility.html">mhttpd</a> utilities.</li>
</ul>
</li>
</ul>
<p><a class="anchor" id="idx_Hardware_drivers_VME"></a> <hr/>
 <h2><a class="anchor" id="VME_drivers">
VME drivers</a></h2>
<p>The VME modules drivers can be interfaced to any type of PCI/VME controller. This is done by dedicated MIDAS VME Standard calls from the <a class="el" href="mvmestd_8h.html">mvmestd.h</a> files.</p>
<ul>
<li>PCI/VME interface<ul>
<li><b></b>[sis1100.c] PCI/VME with optical fiber link. Driver is under development (March 2002). (see <a href="http://www.sruck.de/vme.htm">SIS</a>).</li>
<li><b></b>[bt617.c] Routines for accessing VME over SBS Bit3 Model 617 interface under Windows NT using the NT device driver Model 983 and under Linux using the vmehb device driver. The VME calls are implemented for the "mvmestd" MIDAS VME Standard. (see <a href="http://www.sbs.com/computer/products/cp_adapters.shtml">Bit3</a>).</li>
<li><b></b>[wevmemm.c] PCI/VME Wiener board supported. (see <a href="http://www.wiener-d.com/vmepci.htm">Wiener PCI</a>).</li>
<li>[vxVME.c] mvmestd implementation for VxWorks Operating System. Does require cross compiler for the VxWorks target hardware processor and proper WindRiver license.</li>
</ul>
</li>
</ul>
<ul>
<li>VME modules<ul>
<li><b></b>[<a class="el" href="lrs1190_8c.html">lrs1190.c</a>] LeCroy Dual-port memory ECL 32bits.</li>
<li><b></b>[<a class="el" href="lrs1151_8c.html">lrs1151.c</a>] LeCroy 16 ECL 32bits scalers.</li>
<li><b></b>[lrs2365.c] LeCroy Logic matrix.</li>
<li><b></b>[lrs2373.c] LeCroy Memory Lookup unit.</li>
<li><b></b>[sis3700.c] SIS FERA Fifo 32 bits.</li>
<li><b></b>[<a class="el" href="sis3801_8c.html">sis3801.c</a>] SIS MultiChannel Scalers 32 channels.</li>
<li><b></b>[<a class="el" href="sis3803_8c.html">sis3803.c</a>] SIS Standard 32 Scalers 32 bits.</li>
<li><b></b>[ps7106.c] Phillips Scientific Discriminator.</li>
<li><b></b>[ces8210.c] CES CAMAC crate controller.</li>
<li><b></b>[<a class="el" href="vmeio_8c.html">vmeio.c</a>] Triumf VMEIO General purpose I/O 24bits.</li>
</ul>
</li>
</ul>
<p><a class="anchor" id="idx_Hardware_drivers_USB"></a> <hr/>
 <h2><a class="anchor" id="USB_drivers">
USB drivers</a></h2>
<p>This section is under development for the Wiener USB/CAMAC CCUSB controller. Support for Linux and XP is undergo. Please contact <a href="mailto:midas@psi.ch, midas@triumf.ca?subject=USB driver">midas</a> for further information.</p>
<p><a class="anchor" id="idx_Hardware_drivers_GPIB"></a> <hr/>
 <h2><a class="anchor" id="GPIB_drivers">
GPIB drivers</a></h2>
<p>There is no specific GPIB driver part of the MIDAS package. But GPIB is used at Triumf under WindowsNT for several Slow Control frontends. The basic GPIB DLL library is provided by <a href="http://www.ni.com/default.htm">National Instrument</a>. Please contact <a href="mailto:midas@triumf.ca?subject=GPIB driver">midas</a> for further information.</p>
<p>For GPIB Linux support please refer to <a href="http://www.llp.fu-berlin.de/pool/software/busses/">The Linux Lab Project</a></p>
<p><a class="anchor" id="idx_Hardware_drivers_other"></a> <hr/>
 <h2><a class="anchor" id="Other_drivers">
Other drivers</a></h2>
<ul>
<li><b>[Serial driver]</b> rs232.c communication routines.</li>
<li><b>[Network driver]</b> <b>tcpip.c/h</b> TCP/IP socket communication routines.</li>
<li><b>[SCSI driver]</b> Support for the jorway73a SCSI/CAMAC controller under Linux has been done by Greg Hackman (see <a class="el" href="FE_Hardware.html#CAMAC_drivers">CAMAC drivers</a>).</li>
</ul>
<p><br/>
 <br/>
</p>
 
<script type="text/javascript">
pages("FE_Data_format","FrontendOperation","FE_camac_vme_function_calls","FE_Hardware", "" ); // back index next {top bottom}
// section parameters: last section; top of this section; next section
sections("RunControl","FrontendOperation","DataAnalysis");
</script>
 <br/>
 <a class="anchor" id="end"></a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<br>
<hr WIDTH="100%">
Midas DOC Version 2.3.0&nbsp;----&nbsp;PSI Stefan Ritt&nbsp;----
<br>
Contributions: Pierre-Andre Amaudruz - Sergio Ballestrero - Suzannah Daviel -
<a href=http://www.stack.nl/~dimitri/doxygen/features.html>Doxygen</a> - Peter Green -
Qing Gu - Greg Hackman - Gertjan Hofman - Paul Knowles - Exaos Lee - Rudi Meier - Glenn
Moloney - Dave Morris - John M O'Donnell - Konstantin Olchanski - Chris Pearson - Renee Poutissou
- Tamsen Schurman - Andreas Suter - Jan M.Wouters - Piotr Adam Zolnierczuk
<hr WIDTH="100%">

